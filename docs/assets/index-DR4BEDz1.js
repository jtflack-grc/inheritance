var Yu=Object.defineProperty;var Ku=(e,t,n)=>t in e?Yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ys=(e,t,n)=>Ku(e,typeof t!="symbol"?t+"":t,n);import{r as w,G as Qu,R as ci}from"./globe-BYeatn_S.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var mc={exports:{}},Ki={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=w,Xu=Symbol.for("react.element"),qu=Symbol.for("react.fragment"),Zu=Object.prototype.hasOwnProperty,ep=Ju.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tp={key:!0,ref:!0,__self:!0,__source:!0};function gc(e,t,n){var r,o={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Zu.call(t,r)&&!tp.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Xu,type:e,key:a,ref:s,props:o,_owner:ep.current}}Ki.Fragment=qu;Ki.jsx=gc;Ki.jsxs=gc;mc.exports=Ki;var i=mc.exports,$o={},hc={exports:{}},Ue={},xc={exports:{}},yc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,T){var z=L.length;L.push(T);e:for(;0<z;){var P=z-1>>>1,N=L[P];if(0<o(N,T))L[P]=T,L[z]=N,z=P;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var T=L[0],z=L.pop();if(z!==T){L[0]=z;e:for(var P=0,N=L.length,H=N>>>1;P<H;){var Q=2*(P+1)-1,F=L[Q],G=Q+1,re=L[G];if(0>o(F,z))G<N&&0>o(re,F)?(L[P]=re,L[G]=z,P=G):(L[P]=F,L[Q]=z,P=Q);else if(G<N&&0>o(re,z))L[P]=re,L[G]=z,P=G;else break e}}return T}function o(L,T){var z=L.sortIndex-T.sortIndex;return z!==0?z:L.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();e.unstable_now=function(){return s.now()-c}}var l=[],d=[],u=1,f=null,m=3,x=!1,y=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(L){for(var T=n(d);T!==null;){if(T.callback===null)r(d);else if(T.startTime<=L)r(d),T.sortIndex=T.expirationTime,t(l,T);else break;T=n(d)}}function C(L){if(b=!1,p(L),!y)if(n(l)!==null)y=!0,V(v);else{var T=n(d);T!==null&&Y(C,T.startTime-L)}}function v(L,T){y=!1,b&&(b=!1,g(k),k=-1),x=!0;var z=m;try{for(p(T),f=n(l);f!==null&&(!(f.expirationTime>T)||L&&!R());){var P=f.callback;if(typeof P=="function"){f.callback=null,m=f.priorityLevel;var N=P(f.expirationTime<=T);T=e.unstable_now(),typeof N=="function"?f.callback=N:f===n(l)&&r(l),p(T)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var Q=n(d);Q!==null&&Y(C,Q.startTime-T),H=!1}return H}finally{f=null,m=z,x=!1}}var S=!1,j=null,k=-1,A=5,I=-1;function R(){return!(e.unstable_now()-I<A)}function D(){if(j!==null){var L=e.unstable_now();I=L;var T=!0;try{T=j(!0,L)}finally{T?W():(S=!1,j=null)}}else S=!1}var W;if(typeof h=="function")W=function(){h(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,_=$.port2;$.port1.onmessage=D,W=function(){_.postMessage(null)}}else W=function(){E(D,0)};function V(L){j=L,S||(S=!0,W())}function Y(L,T){k=E(function(){L(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,V(v))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var T=3;break;default:T=m}var z=m;m=T;try{return L()}finally{m=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,T){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=m;m=L;try{return T()}finally{m=z}},e.unstable_scheduleCallback=function(L,T,z){var P=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?P+z:P):z=P,L){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=z+N,L={id:u++,callback:T,priorityLevel:L,startTime:z,expirationTime:N,sortIndex:-1},z>P?(L.sortIndex=z,t(d,L),n(l)===null&&L===n(d)&&(b?(g(k),k=-1):b=!0,Y(C,z-P))):(L.sortIndex=N,t(l,L),y||x||(y=!0,V(v))),L},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(L){var T=m;return function(){var z=m;m=T;try{return L.apply(this,arguments)}finally{m=z}}}})(yc);xc.exports=yc;var np=xc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp=w,He=np;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vc=new Set,xr={};function pn(e,t){Wn(e,t),Wn(e+"Capture",t)}function Wn(e,t){for(xr[e]=t,e=0;e<t.length;e++)vc.add(t[e])}var St=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=Object.prototype.hasOwnProperty,ip=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ks={},Qs={};function op(e){return Vo.call(Qs,e)?!0:Vo.call(Ks,e)?!1:ip.test(e)?Qs[e]=!0:(Ks[e]=!0,!1)}function ap(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sp(e,t,n,r){if(t===null||typeof t>"u"||ap(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Re(e,t,n,r,o,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Se[e]=new Re(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Se[t]=new Re(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Se[e]=new Re(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Se[e]=new Re(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Se[e]=new Re(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Se[e]=new Re(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Se[e]=new Re(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Se[e]=new Re(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Se[e]=new Re(e,5,!1,e.toLowerCase(),null,!1,!1)});var $a=/[\-:]([a-z])/g;function Va(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($a,Va);Se[t]=new Re(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($a,Va);Se[t]=new Re(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($a,Va);Se[t]=new Re(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Se[e]=new Re(e,1,!1,e.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Se[e]=new Re(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ya(e,t,n,r){var o=Se.hasOwnProperty(t)?Se[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sp(t,n,o,r)&&(n=null),r||o===null?op(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Tt=rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gr=Symbol.for("react.element"),yn=Symbol.for("react.portal"),vn=Symbol.for("react.fragment"),Ka=Symbol.for("react.strict_mode"),Yo=Symbol.for("react.profiler"),wc=Symbol.for("react.provider"),bc=Symbol.for("react.context"),Qa=Symbol.for("react.forward_ref"),Ko=Symbol.for("react.suspense"),Qo=Symbol.for("react.suspense_list"),Ja=Symbol.for("react.memo"),zt=Symbol.for("react.lazy"),Sc=Symbol.for("react.offscreen"),Js=Symbol.iterator;function Qn(e){return e===null||typeof e!="object"?null:(e=Js&&e[Js]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,xo;function ir(e){if(xo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xo=t&&t[1]||""}return`
`+xo+e}var yo=!1;function vo(e,t){if(!e||yo)return"";yo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),a=r.stack.split(`
`),s=o.length-1,c=a.length-1;1<=s&&0<=c&&o[s]!==a[c];)c--;for(;1<=s&&0<=c;s--,c--)if(o[s]!==a[c]){if(s!==1||c!==1)do if(s--,c--,0>c||o[s]!==a[c]){var l=`
`+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=c);break}}}finally{yo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ir(e):""}function lp(e){switch(e.tag){case 5:return ir(e.type);case 16:return ir("Lazy");case 13:return ir("Suspense");case 19:return ir("SuspenseList");case 0:case 2:case 15:return e=vo(e.type,!1),e;case 11:return e=vo(e.type.render,!1),e;case 1:return e=vo(e.type,!0),e;default:return""}}function Jo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vn:return"Fragment";case yn:return"Portal";case Yo:return"Profiler";case Ka:return"StrictMode";case Ko:return"Suspense";case Qo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bc:return(e.displayName||"Context")+".Consumer";case wc:return(e._context.displayName||"Context")+".Provider";case Qa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ja:return t=e.displayName||null,t!==null?t:Jo(e.type)||"Memo";case zt:t=e._payload,e=e._init;try{return Jo(e(t))}catch{}}return null}function cp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jo(t);case 8:return t===Ka?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $t(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dp(e){var t=Cc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hr(e){e._valueTracker||(e._valueTracker=dp(e))}function jc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Cc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Si(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xo(e,t){var n=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xs(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$t(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kc(e,t){t=t.checked,t!=null&&Ya(e,"checked",t,!1)}function qo(e,t){kc(e,t);var n=$t(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zo(e,t.type,$t(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qs(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zo(e,t,n){(t!=="number"||Si(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var or=Array.isArray;function zn(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$t(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ea(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zs(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(or(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$t(n)}}function Tc(e,t){var n=$t(t.value),r=$t(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function el(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ec(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ta(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ec(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ur,Ic=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ur=Ur||document.createElement("div"),Ur.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ur.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var lr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},up=["Webkit","ms","Moz","O"];Object.keys(lr).forEach(function(e){up.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),lr[t]=lr[e]})});function Rc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||lr.hasOwnProperty(e)&&lr[e]?(""+t).trim():t+"px"}function zc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Rc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var pp=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function na(e,t){if(t){if(pp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function ra(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ia=null;function Xa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oa=null,An=null,Mn=null;function tl(e){if(e=Wr(e)){if(typeof oa!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Zi(t),oa(e.stateNode,e.type,t))}}function Ac(e){An?Mn?Mn.push(e):Mn=[e]:An=e}function Mc(){if(An){var e=An,t=Mn;if(Mn=An=null,tl(e),t)for(e=0;e<t.length;e++)tl(t[e])}}function Dc(e,t){return e(t)}function Pc(){}var wo=!1;function Lc(e,t,n){if(wo)return e(t,n);wo=!0;try{return Dc(e,t,n)}finally{wo=!1,(An!==null||Mn!==null)&&(Pc(),Mc())}}function vr(e,t){var n=e.stateNode;if(n===null)return null;var r=Zi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var aa=!1;if(St)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){aa=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{aa=!1}function fp(e,t,n,r,o,a,s,c,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var cr=!1,Ci=null,ji=!1,sa=null,mp={onError:function(e){cr=!0,Ci=e}};function gp(e,t,n,r,o,a,s,c,l){cr=!1,Ci=null,fp.apply(mp,arguments)}function hp(e,t,n,r,o,a,s,c,l){if(gp.apply(this,arguments),cr){if(cr){var d=Ci;cr=!1,Ci=null}else throw Error(M(198));ji||(ji=!0,sa=d)}}function fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nl(e){if(fn(e)!==e)throw Error(M(188))}function xp(e){var t=e.alternate;if(!t){if(t=fn(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return nl(o),e;if(a===r)return nl(o),t;a=a.sibling}throw Error(M(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function Nc(e){return e=xp(e),e!==null?Bc(e):null}function Bc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bc(e);if(t!==null)return t;e=e.sibling}return null}var Fc=He.unstable_scheduleCallback,rl=He.unstable_cancelCallback,yp=He.unstable_shouldYield,vp=He.unstable_requestPaint,le=He.unstable_now,wp=He.unstable_getCurrentPriorityLevel,qa=He.unstable_ImmediatePriority,_c=He.unstable_UserBlockingPriority,ki=He.unstable_NormalPriority,bp=He.unstable_LowPriority,Oc=He.unstable_IdlePriority,Qi=null,mt=null;function Sp(e){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Qi,e,void 0,(e.current.flags&128)===128)}catch{}}var at=Math.clz32?Math.clz32:kp,Cp=Math.log,jp=Math.LN2;function kp(e){return e>>>=0,e===0?32:31-(Cp(e)/jp|0)|0}var $r=64,Vr=4194304;function ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ti(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var c=s&~o;c!==0?r=ar(c):(a&=s,a!==0&&(r=ar(a)))}else s=n&~o,s!==0?r=ar(s):a!==0&&(r=ar(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-at(t),o=1<<n,r|=e[n],t&=~o;return r}function Tp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ep(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-at(a),c=1<<s,l=o[s];l===-1?(!(c&n)||c&r)&&(o[s]=Tp(c,t)):l<=t&&(e.expiredLanes|=c),a&=~c}}function la(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gc(){var e=$r;return $r<<=1,!($r&4194240)&&($r=64),e}function bo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-at(t),e[t]=n}function Ip(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function Za(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var q=0;function Hc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uc,es,$c,Vc,Yc,ca=!1,Yr=[],Nt=null,Bt=null,Ft=null,wr=new Map,br=new Map,Mt=[],Rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function il(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Bt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":br.delete(t.pointerId)}}function Xn(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=Wr(t),t!==null&&es(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function zp(e,t,n,r,o){switch(t){case"focusin":return Nt=Xn(Nt,e,t,n,r,o),!0;case"dragenter":return Bt=Xn(Bt,e,t,n,r,o),!0;case"mouseover":return Ft=Xn(Ft,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return wr.set(a,Xn(wr.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,br.set(a,Xn(br.get(a)||null,e,t,n,r,o)),!0}return!1}function Kc(e){var t=tn(e.target);if(t!==null){var n=fn(t);if(n!==null){if(t=n.tag,t===13){if(t=Wc(n),t!==null){e.blockedOn=t,Yc(e.priority,function(){$c(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function di(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=da(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ia=r,n.target.dispatchEvent(r),ia=null}else return t=Wr(n),t!==null&&es(t),e.blockedOn=n,!1;t.shift()}return!0}function ol(e,t,n){di(e)&&n.delete(t)}function Ap(){ca=!1,Nt!==null&&di(Nt)&&(Nt=null),Bt!==null&&di(Bt)&&(Bt=null),Ft!==null&&di(Ft)&&(Ft=null),wr.forEach(ol),br.forEach(ol)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,ca||(ca=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,Ap)))}function Sr(e){function t(o){return qn(o,e)}if(0<Yr.length){qn(Yr[0],e);for(var n=1;n<Yr.length;n++){var r=Yr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Nt!==null&&qn(Nt,e),Bt!==null&&qn(Bt,e),Ft!==null&&qn(Ft,e),wr.forEach(t),br.forEach(t),n=0;n<Mt.length;n++)r=Mt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&(n=Mt[0],n.blockedOn===null);)Kc(n),n.blockedOn===null&&Mt.shift()}var Dn=Tt.ReactCurrentBatchConfig,Ei=!0;function Mp(e,t,n,r){var o=q,a=Dn.transition;Dn.transition=null;try{q=1,ts(e,t,n,r)}finally{q=o,Dn.transition=a}}function Dp(e,t,n,r){var o=q,a=Dn.transition;Dn.transition=null;try{q=4,ts(e,t,n,r)}finally{q=o,Dn.transition=a}}function ts(e,t,n,r){if(Ei){var o=da(e,t,n,r);if(o===null)Ao(e,t,r,Ii,n),il(e,r);else if(zp(o,e,t,n,r))r.stopPropagation();else if(il(e,r),t&4&&-1<Rp.indexOf(e)){for(;o!==null;){var a=Wr(o);if(a!==null&&Uc(a),a=da(e,t,n,r),a===null&&Ao(e,t,r,Ii,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else Ao(e,t,r,null,n)}}var Ii=null;function da(e,t,n,r){if(Ii=null,e=Xa(r),e=tn(e),e!==null)if(t=fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Wc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ii=e,null}function Qc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wp()){case qa:return 1;case _c:return 4;case ki:case bp:return 16;case Oc:return 536870912;default:return 16}default:return 16}}var Pt=null,ns=null,ui=null;function Jc(){if(ui)return ui;var e,t=ns,n=t.length,r,o="value"in Pt?Pt.value:Pt.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[a-r];r++);return ui=o.slice(e,1<r?1-r:void 0)}function pi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kr(){return!0}function al(){return!1}function $e(e){function t(n,r,o,a,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Kr:al,this.isPropagationStopped=al,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),t}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=$e(Hn),Lr=ae({},Hn,{view:0,detail:0}),Pp=$e(Lr),So,Co,Zn,Ji=ae({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zn&&(Zn&&e.type==="mousemove"?(So=e.screenX-Zn.screenX,Co=e.screenY-Zn.screenY):Co=So=0,Zn=e),So)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),sl=$e(Ji),Lp=ae({},Ji,{dataTransfer:0}),Wp=$e(Lp),Np=ae({},Lr,{relatedTarget:0}),jo=$e(Np),Bp=ae({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fp=$e(Bp),_p=ae({},Hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Op=$e(_p),Gp=ae({},Hn,{data:0}),ll=$e(Gp),Hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$p={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$p[e])?!!t[e]:!1}function is(){return Vp}var Yp=ae({},Lr,{key:function(e){if(e.key){var t=Hp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Up[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(e){return e.type==="keypress"?pi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kp=$e(Yp),Qp=ae({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=$e(Qp),Jp=ae({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),Xp=$e(Jp),qp=ae({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zp=$e(qp),ef=ae({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tf=$e(ef),nf=[9,13,27,32],os=St&&"CompositionEvent"in window,dr=null;St&&"documentMode"in document&&(dr=document.documentMode);var rf=St&&"TextEvent"in window&&!dr,Xc=St&&(!os||dr&&8<dr&&11>=dr),dl=" ",ul=!1;function qc(e,t){switch(e){case"keyup":return nf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wn=!1;function of(e,t){switch(e){case"compositionend":return Zc(t);case"keypress":return t.which!==32?null:(ul=!0,dl);case"textInput":return e=t.data,e===dl&&ul?null:e;default:return null}}function af(e,t){if(wn)return e==="compositionend"||!os&&qc(e,t)?(e=Jc(),ui=ns=Pt=null,wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xc&&t.locale!=="ko"?null:t.data;default:return null}}var sf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sf[e.type]:t==="textarea"}function ed(e,t,n,r){Ac(r),t=Ri(t,"onChange"),0<t.length&&(n=new rs("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ur=null,Cr=null;function lf(e){ud(e,0)}function Xi(e){var t=Cn(e);if(jc(t))return e}function cf(e,t){if(e==="change")return t}var td=!1;if(St){var ko;if(St){var To="oninput"in document;if(!To){var fl=document.createElement("div");fl.setAttribute("oninput","return;"),To=typeof fl.oninput=="function"}ko=To}else ko=!1;td=ko&&(!document.documentMode||9<document.documentMode)}function ml(){ur&&(ur.detachEvent("onpropertychange",nd),Cr=ur=null)}function nd(e){if(e.propertyName==="value"&&Xi(Cr)){var t=[];ed(t,Cr,e,Xa(e)),Lc(lf,t)}}function df(e,t,n){e==="focusin"?(ml(),ur=t,Cr=n,ur.attachEvent("onpropertychange",nd)):e==="focusout"&&ml()}function uf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xi(Cr)}function pf(e,t){if(e==="click")return Xi(t)}function ff(e,t){if(e==="input"||e==="change")return Xi(t)}function mf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:mf;function jr(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Vo.call(t,o)||!ct(e[o],t[o]))return!1}return!0}function gl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hl(e,t){var n=gl(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gl(n)}}function rd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function id(){for(var e=window,t=Si();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Si(e.document)}return t}function as(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gf(e){var t=id(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rd(n.ownerDocument.documentElement,n)){if(r!==null&&as(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=hl(n,a);var s=hl(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hf=St&&"documentMode"in document&&11>=document.documentMode,bn=null,ua=null,pr=null,pa=!1;function xl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pa||bn==null||bn!==Si(r)||(r=bn,"selectionStart"in r&&as(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pr&&jr(pr,r)||(pr=r,r=Ri(ua,"onSelect"),0<r.length&&(t=new rs("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bn)))}function Qr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sn={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionend:Qr("Transition","TransitionEnd")},Eo={},od={};St&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);function qi(e){if(Eo[e])return Eo[e];if(!Sn[e])return e;var t=Sn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in od)return Eo[e]=t[n];return e}var ad=qi("animationend"),sd=qi("animationiteration"),ld=qi("animationstart"),cd=qi("transitionend"),dd=new Map,yl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yt(e,t){dd.set(e,t),pn(t,[e])}for(var Io=0;Io<yl.length;Io++){var Ro=yl[Io],xf=Ro.toLowerCase(),yf=Ro[0].toUpperCase()+Ro.slice(1);Yt(xf,"on"+yf)}Yt(ad,"onAnimationEnd");Yt(sd,"onAnimationIteration");Yt(ld,"onAnimationStart");Yt("dblclick","onDoubleClick");Yt("focusin","onFocus");Yt("focusout","onBlur");Yt(cd,"onTransitionEnd");Wn("onMouseEnter",["mouseout","mouseover"]);Wn("onMouseLeave",["mouseout","mouseover"]);Wn("onPointerEnter",["pointerout","pointerover"]);Wn("onPointerLeave",["pointerout","pointerover"]);pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pn("onBeforeInput",["compositionend","keypress","textInput","paste"]);pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vf=new Set("cancel close invalid load scroll toggle".split(" ").concat(sr));function vl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,hp(r,t,void 0,e),e.currentTarget=null}function ud(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var c=r[s],l=c.instance,d=c.currentTarget;if(c=c.listener,l!==a&&o.isPropagationStopped())break e;vl(o,c,d),a=l}else for(s=0;s<r.length;s++){if(c=r[s],l=c.instance,d=c.currentTarget,c=c.listener,l!==a&&o.isPropagationStopped())break e;vl(o,c,d),a=l}}}if(ji)throw e=sa,ji=!1,sa=null,e}function ee(e,t){var n=t[xa];n===void 0&&(n=t[xa]=new Set);var r=e+"__bubble";n.has(r)||(pd(t,e,2,!1),n.add(r))}function zo(e,t,n){var r=0;t&&(r|=4),pd(n,e,r,t)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function kr(e){if(!e[Jr]){e[Jr]=!0,vc.forEach(function(n){n!=="selectionchange"&&(vf.has(n)||zo(n,!1,e),zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jr]||(t[Jr]=!0,zo("selectionchange",!1,t))}}function pd(e,t,n,r){switch(Qc(t)){case 1:var o=Mp;break;case 4:o=Dp;break;default:o=ts}n=o.bind(null,t,n,e),o=void 0,!aa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ao(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;c!==null;){if(s=tn(c),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}c=c.parentNode}}r=r.return}Lc(function(){var d=a,u=Xa(n),f=[];e:{var m=dd.get(e);if(m!==void 0){var x=rs,y=e;switch(e){case"keypress":if(pi(n)===0)break e;case"keydown":case"keyup":x=Kp;break;case"focusin":y="focus",x=jo;break;case"focusout":y="blur",x=jo;break;case"beforeblur":case"afterblur":x=jo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Xp;break;case ad:case sd:case ld:x=Fp;break;case cd:x=Zp;break;case"scroll":x=Pp;break;case"wheel":x=tf;break;case"copy":case"cut":case"paste":x=Op;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=cl}var b=(t&4)!==0,E=!b&&e==="scroll",g=b?m!==null?m+"Capture":null:m;b=[];for(var h=d,p;h!==null;){p=h;var C=p.stateNode;if(p.tag===5&&C!==null&&(p=C,g!==null&&(C=vr(h,g),C!=null&&b.push(Tr(h,C,p)))),E)break;h=h.return}0<b.length&&(m=new x(m,y,null,n,u),f.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==ia&&(y=n.relatedTarget||n.fromElement)&&(tn(y)||y[Ct]))break e;if((x||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=d,y=y?tn(y):null,y!==null&&(E=fn(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=d),x!==y)){if(b=sl,C="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(b=cl,C="onPointerLeave",g="onPointerEnter",h="pointer"),E=x==null?m:Cn(x),p=y==null?m:Cn(y),m=new b(C,h+"leave",x,n,u),m.target=E,m.relatedTarget=p,C=null,tn(u)===d&&(b=new b(g,h+"enter",y,n,u),b.target=p,b.relatedTarget=E,C=b),E=C,x&&y)t:{for(b=x,g=y,h=0,p=b;p;p=gn(p))h++;for(p=0,C=g;C;C=gn(C))p++;for(;0<h-p;)b=gn(b),h--;for(;0<p-h;)g=gn(g),p--;for(;h--;){if(b===g||g!==null&&b===g.alternate)break t;b=gn(b),g=gn(g)}b=null}else b=null;x!==null&&wl(f,m,x,b,!1),y!==null&&E!==null&&wl(f,E,y,b,!0)}}e:{if(m=d?Cn(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var v=cf;else if(pl(m))if(td)v=ff;else{v=uf;var S=df}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(v=pf);if(v&&(v=v(e,d))){ed(f,v,n,u);break e}S&&S(e,m,d),e==="focusout"&&(S=m._wrapperState)&&S.controlled&&m.type==="number"&&Zo(m,"number",m.value)}switch(S=d?Cn(d):window,e){case"focusin":(pl(S)||S.contentEditable==="true")&&(bn=S,ua=d,pr=null);break;case"focusout":pr=ua=bn=null;break;case"mousedown":pa=!0;break;case"contextmenu":case"mouseup":case"dragend":pa=!1,xl(f,n,u);break;case"selectionchange":if(hf)break;case"keydown":case"keyup":xl(f,n,u)}var j;if(os)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else wn?qc(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Xc&&n.locale!=="ko"&&(wn||k!=="onCompositionStart"?k==="onCompositionEnd"&&wn&&(j=Jc()):(Pt=u,ns="value"in Pt?Pt.value:Pt.textContent,wn=!0)),S=Ri(d,k),0<S.length&&(k=new ll(k,e,null,n,u),f.push({event:k,listeners:S}),j?k.data=j:(j=Zc(n),j!==null&&(k.data=j)))),(j=rf?of(e,n):af(e,n))&&(d=Ri(d,"onBeforeInput"),0<d.length&&(u=new ll("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:d}),u.data=j))}ud(f,t)})}function Tr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ri(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=vr(e,n),a!=null&&r.unshift(Tr(e,a,o)),a=vr(e,t),a!=null&&r.push(Tr(e,a,o))),e=e.return}return r}function gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wl(e,t,n,r,o){for(var a=t._reactName,s=[];n!==null&&n!==r;){var c=n,l=c.alternate,d=c.stateNode;if(l!==null&&l===r)break;c.tag===5&&d!==null&&(c=d,o?(l=vr(n,a),l!=null&&s.unshift(Tr(n,l,c))):o||(l=vr(n,a),l!=null&&s.push(Tr(n,l,c)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var wf=/\r\n?/g,bf=/\u0000|\uFFFD/g;function bl(e){return(typeof e=="string"?e:""+e).replace(wf,`
`).replace(bf,"")}function Xr(e,t,n){if(t=bl(t),bl(e)!==t&&n)throw Error(M(425))}function zi(){}var fa=null,ma=null;function ga(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ha=typeof setTimeout=="function"?setTimeout:void 0,Sf=typeof clearTimeout=="function"?clearTimeout:void 0,Sl=typeof Promise=="function"?Promise:void 0,Cf=typeof queueMicrotask=="function"?queueMicrotask:typeof Sl<"u"?function(e){return Sl.resolve(null).then(e).catch(jf)}:ha;function jf(e){setTimeout(function(){throw e})}function Mo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Sr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Sr(t)}function _t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Un=Math.random().toString(36).slice(2),ft="__reactFiber$"+Un,Er="__reactProps$"+Un,Ct="__reactContainer$"+Un,xa="__reactEvents$"+Un,kf="__reactListeners$"+Un,Tf="__reactHandles$"+Un;function tn(e){var t=e[ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ct]||n[ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cl(e);e!==null;){if(n=e[ft])return n;e=Cl(e)}return t}e=n,n=e.parentNode}return null}function Wr(e){return e=e[ft]||e[Ct],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Zi(e){return e[Er]||null}var ya=[],jn=-1;function Kt(e){return{current:e}}function te(e){0>jn||(e.current=ya[jn],ya[jn]=null,jn--)}function Z(e,t){jn++,ya[jn]=e.current,e.current=t}var Vt={},Te=Kt(Vt),Le=Kt(!1),sn=Vt;function Nn(e,t){var n=e.type.contextTypes;if(!n)return Vt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function We(e){return e=e.childContextTypes,e!=null}function Ai(){te(Le),te(Te)}function jl(e,t,n){if(Te.current!==Vt)throw Error(M(168));Z(Te,t),Z(Le,n)}function fd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(M(108,cp(e)||"Unknown",o));return ae({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vt,sn=Te.current,Z(Te,e),Z(Le,Le.current),!0}function kl(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=fd(e,t,sn),r.__reactInternalMemoizedMergedChildContext=e,te(Le),te(Te),Z(Te,e)):te(Le),Z(Le,n)}var yt=null,eo=!1,Do=!1;function md(e){yt===null?yt=[e]:yt.push(e)}function Ef(e){eo=!0,md(e)}function Qt(){if(!Do&&yt!==null){Do=!0;var e=0,t=q;try{var n=yt;for(q=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}yt=null,eo=!1}catch(o){throw yt!==null&&(yt=yt.slice(e+1)),Fc(qa,Qt),o}finally{q=t,Do=!1}}return null}var kn=[],Tn=0,Di=null,Pi=0,Ke=[],Qe=0,ln=null,vt=1,wt="";function Zt(e,t){kn[Tn++]=Pi,kn[Tn++]=Di,Di=e,Pi=t}function gd(e,t,n){Ke[Qe++]=vt,Ke[Qe++]=wt,Ke[Qe++]=ln,ln=e;var r=vt;e=wt;var o=32-at(r)-1;r&=~(1<<o),n+=1;var a=32-at(t)+o;if(30<a){var s=o-o%5;a=(r&(1<<s)-1).toString(32),r>>=s,o-=s,vt=1<<32-at(t)+o|n<<o|r,wt=a+e}else vt=1<<a|n<<o|r,wt=e}function ss(e){e.return!==null&&(Zt(e,1),gd(e,1,0))}function ls(e){for(;e===Di;)Di=kn[--Tn],kn[Tn]=null,Pi=kn[--Tn],kn[Tn]=null;for(;e===ln;)ln=Ke[--Qe],Ke[Qe]=null,wt=Ke[--Qe],Ke[Qe]=null,vt=Ke[--Qe],Ke[Qe]=null}var Ge=null,Oe=null,ne=!1,ot=null;function hd(e,t){var n=Je(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Tl(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ge=e,Oe=_t(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ge=e,Oe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ln!==null?{id:vt,overflow:wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Je(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ge=e,Oe=null,!0):!1;default:return!1}}function va(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wa(e){if(ne){var t=Oe;if(t){var n=t;if(!Tl(e,t)){if(va(e))throw Error(M(418));t=_t(n.nextSibling);var r=Ge;t&&Tl(e,t)?hd(r,n):(e.flags=e.flags&-4097|2,ne=!1,Ge=e)}}else{if(va(e))throw Error(M(418));e.flags=e.flags&-4097|2,ne=!1,Ge=e}}}function El(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ge=e}function qr(e){if(e!==Ge)return!1;if(!ne)return El(e),ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ga(e.type,e.memoizedProps)),t&&(t=Oe)){if(va(e))throw xd(),Error(M(418));for(;t;)hd(e,t),t=_t(t.nextSibling)}if(El(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Oe=_t(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Oe=null}}else Oe=Ge?_t(e.stateNode.nextSibling):null;return!0}function xd(){for(var e=Oe;e;)e=_t(e.nextSibling)}function Bn(){Oe=Ge=null,ne=!1}function cs(e){ot===null?ot=[e]:ot.push(e)}var If=Tt.ReactCurrentBatchConfig;function er(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var c=o.refs;s===null?delete c[a]:c[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function Zr(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Il(e){var t=e._init;return t(e._payload)}function yd(e){function t(g,h){if(e){var p=g.deletions;p===null?(g.deletions=[h],g.flags|=16):p.push(h)}}function n(g,h){if(!e)return null;for(;h!==null;)t(g,h),h=h.sibling;return null}function r(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function o(g,h){return g=Ut(g,h),g.index=0,g.sibling=null,g}function a(g,h,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<h?(g.flags|=2,h):p):(g.flags|=2,h)):(g.flags|=1048576,h)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,h,p,C){return h===null||h.tag!==6?(h=_o(p,g.mode,C),h.return=g,h):(h=o(h,p),h.return=g,h)}function l(g,h,p,C){var v=p.type;return v===vn?u(g,h,p.props.children,C,p.key):h!==null&&(h.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===zt&&Il(v)===h.type)?(C=o(h,p.props),C.ref=er(g,h,p),C.return=g,C):(C=vi(p.type,p.key,p.props,null,g.mode,C),C.ref=er(g,h,p),C.return=g,C)}function d(g,h,p,C){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=Oo(p,g.mode,C),h.return=g,h):(h=o(h,p.children||[]),h.return=g,h)}function u(g,h,p,C,v){return h===null||h.tag!==7?(h=an(p,g.mode,C,v),h.return=g,h):(h=o(h,p),h.return=g,h)}function f(g,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=_o(""+h,g.mode,p),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Gr:return p=vi(h.type,h.key,h.props,null,g.mode,p),p.ref=er(g,null,h),p.return=g,p;case yn:return h=Oo(h,g.mode,p),h.return=g,h;case zt:var C=h._init;return f(g,C(h._payload),p)}if(or(h)||Qn(h))return h=an(h,g.mode,p,null),h.return=g,h;Zr(g,h)}return null}function m(g,h,p,C){var v=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return v!==null?null:c(g,h,""+p,C);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Gr:return p.key===v?l(g,h,p,C):null;case yn:return p.key===v?d(g,h,p,C):null;case zt:return v=p._init,m(g,h,v(p._payload),C)}if(or(p)||Qn(p))return v!==null?null:u(g,h,p,C,null);Zr(g,p)}return null}function x(g,h,p,C,v){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(p)||null,c(h,g,""+C,v);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Gr:return g=g.get(C.key===null?p:C.key)||null,l(h,g,C,v);case yn:return g=g.get(C.key===null?p:C.key)||null,d(h,g,C,v);case zt:var S=C._init;return x(g,h,p,S(C._payload),v)}if(or(C)||Qn(C))return g=g.get(p)||null,u(h,g,C,v,null);Zr(h,C)}return null}function y(g,h,p,C){for(var v=null,S=null,j=h,k=h=0,A=null;j!==null&&k<p.length;k++){j.index>k?(A=j,j=null):A=j.sibling;var I=m(g,j,p[k],C);if(I===null){j===null&&(j=A);break}e&&j&&I.alternate===null&&t(g,j),h=a(I,h,k),S===null?v=I:S.sibling=I,S=I,j=A}if(k===p.length)return n(g,j),ne&&Zt(g,k),v;if(j===null){for(;k<p.length;k++)j=f(g,p[k],C),j!==null&&(h=a(j,h,k),S===null?v=j:S.sibling=j,S=j);return ne&&Zt(g,k),v}for(j=r(g,j);k<p.length;k++)A=x(j,g,k,p[k],C),A!==null&&(e&&A.alternate!==null&&j.delete(A.key===null?k:A.key),h=a(A,h,k),S===null?v=A:S.sibling=A,S=A);return e&&j.forEach(function(R){return t(g,R)}),ne&&Zt(g,k),v}function b(g,h,p,C){var v=Qn(p);if(typeof v!="function")throw Error(M(150));if(p=v.call(p),p==null)throw Error(M(151));for(var S=v=null,j=h,k=h=0,A=null,I=p.next();j!==null&&!I.done;k++,I=p.next()){j.index>k?(A=j,j=null):A=j.sibling;var R=m(g,j,I.value,C);if(R===null){j===null&&(j=A);break}e&&j&&R.alternate===null&&t(g,j),h=a(R,h,k),S===null?v=R:S.sibling=R,S=R,j=A}if(I.done)return n(g,j),ne&&Zt(g,k),v;if(j===null){for(;!I.done;k++,I=p.next())I=f(g,I.value,C),I!==null&&(h=a(I,h,k),S===null?v=I:S.sibling=I,S=I);return ne&&Zt(g,k),v}for(j=r(g,j);!I.done;k++,I=p.next())I=x(j,g,k,I.value,C),I!==null&&(e&&I.alternate!==null&&j.delete(I.key===null?k:I.key),h=a(I,h,k),S===null?v=I:S.sibling=I,S=I);return e&&j.forEach(function(D){return t(g,D)}),ne&&Zt(g,k),v}function E(g,h,p,C){if(typeof p=="object"&&p!==null&&p.type===vn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Gr:e:{for(var v=p.key,S=h;S!==null;){if(S.key===v){if(v=p.type,v===vn){if(S.tag===7){n(g,S.sibling),h=o(S,p.props.children),h.return=g,g=h;break e}}else if(S.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===zt&&Il(v)===S.type){n(g,S.sibling),h=o(S,p.props),h.ref=er(g,S,p),h.return=g,g=h;break e}n(g,S);break}else t(g,S);S=S.sibling}p.type===vn?(h=an(p.props.children,g.mode,C,p.key),h.return=g,g=h):(C=vi(p.type,p.key,p.props,null,g.mode,C),C.ref=er(g,h,p),C.return=g,g=C)}return s(g);case yn:e:{for(S=p.key;h!==null;){if(h.key===S)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(g,h.sibling),h=o(h,p.children||[]),h.return=g,g=h;break e}else{n(g,h);break}else t(g,h);h=h.sibling}h=Oo(p,g.mode,C),h.return=g,g=h}return s(g);case zt:return S=p._init,E(g,h,S(p._payload),C)}if(or(p))return y(g,h,p,C);if(Qn(p))return b(g,h,p,C);Zr(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(g,h.sibling),h=o(h,p),h.return=g,g=h):(n(g,h),h=_o(p,g.mode,C),h.return=g,g=h),s(g)):n(g,h)}return E}var Fn=yd(!0),vd=yd(!1),Li=Kt(null),Wi=null,En=null,ds=null;function us(){ds=En=Wi=null}function ps(e){var t=Li.current;te(Li),e._currentValue=t}function ba(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pn(e,t){Wi=e,ds=En=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pe=!0),e.firstContext=null)}function qe(e){var t=e._currentValue;if(ds!==e)if(e={context:e,memoizedValue:t,next:null},En===null){if(Wi===null)throw Error(M(308));En=e,Wi.dependencies={lanes:0,firstContext:e}}else En=En.next=e;return t}var nn=null;function fs(e){nn===null?nn=[e]:nn.push(e)}function wd(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,fs(t)):(n.next=o.next,o.next=n),t.interleaved=n,jt(e,r)}function jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var At=!1;function ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ot(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,jt(e,n)}return o=r.interleaved,o===null?(t.next=t,fs(r)):(t.next=o.next,o.next=t),r.interleaved=t,jt(e,n)}function fi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Za(e,n)}}function Rl(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ni(e,t,n,r){var o=e.updateQueue;At=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var l=c,d=l.next;l.next=null,s===null?a=d:s.next=d,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==s&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=l))}if(a!==null){var f=o.baseState;s=0,u=d=l=null,c=a;do{var m=c.lane,x=c.eventTime;if((r&m)===m){u!==null&&(u=u.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,b=c;switch(m=t,x=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){f=y.call(x,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,m=typeof y=="function"?y.call(x,f,m):y,m==null)break e;f=ae({},f,m);break e;case 2:At=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[c]:m.push(c))}else x={eventTime:x,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=x,l=f):u=u.next=x,s|=m;if(c=c.next,c===null){if(c=o.shared.pending,c===null)break;m=c,c=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(u===null&&(l=f),o.baseState=l,o.firstBaseUpdate=d,o.lastBaseUpdate=u,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);dn|=s,e.lanes=s,e.memoizedState=f}}function zl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var Nr={},gt=Kt(Nr),Ir=Kt(Nr),Rr=Kt(Nr);function rn(e){if(e===Nr)throw Error(M(174));return e}function gs(e,t){switch(Z(Rr,t),Z(Ir,e),Z(gt,Nr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ta(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ta(t,e)}te(gt),Z(gt,t)}function _n(){te(gt),te(Ir),te(Rr)}function Sd(e){rn(Rr.current);var t=rn(gt.current),n=ta(t,e.type);t!==n&&(Z(Ir,e),Z(gt,n))}function hs(e){Ir.current===e&&(te(gt),te(Ir))}var ie=Kt(0);function Bi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Po=[];function xs(){for(var e=0;e<Po.length;e++)Po[e]._workInProgressVersionPrimary=null;Po.length=0}var mi=Tt.ReactCurrentDispatcher,Lo=Tt.ReactCurrentBatchConfig,cn=0,oe=null,me=null,he=null,Fi=!1,fr=!1,zr=0,Rf=0;function Ce(){throw Error(M(321))}function ys(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ct(e[n],t[n]))return!1;return!0}function vs(e,t,n,r,o,a){if(cn=a,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mi.current=e===null||e.memoizedState===null?Df:Pf,e=n(r,o),fr){a=0;do{if(fr=!1,zr=0,25<=a)throw Error(M(301));a+=1,he=me=null,t.updateQueue=null,mi.current=Lf,e=n(r,o)}while(fr)}if(mi.current=_i,t=me!==null&&me.next!==null,cn=0,he=me=oe=null,Fi=!1,t)throw Error(M(300));return e}function ws(){var e=zr!==0;return zr=0,e}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?oe.memoizedState=he=e:he=he.next=e,he}function Ze(){if(me===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var t=he===null?oe.memoizedState:he.next;if(t!==null)he=t,me=e;else{if(e===null)throw Error(M(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},he===null?oe.memoizedState=he=e:he=he.next=e}return he}function Ar(e,t){return typeof t=="function"?t(e):t}function Wo(e){var t=Ze(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=me,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var c=s=null,l=null,d=a;do{var u=d.lane;if((cn&u)===u)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(c=l=f,s=r):l=l.next=f,oe.lanes|=u,dn|=u}d=d.next}while(d!==null&&d!==a);l===null?s=r:l.next=c,ct(r,t.memoizedState)||(Pe=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,oe.lanes|=a,dn|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Ze(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do a=e(a,s.action),s=s.next;while(s!==o);ct(a,t.memoizedState)||(Pe=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Cd(){}function jd(e,t){var n=oe,r=Ze(),o=t(),a=!ct(r.memoizedState,o);if(a&&(r.memoizedState=o,Pe=!0),r=r.queue,bs(Ed.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Mr(9,Td.bind(null,n,r,o,t),void 0,null),xe===null)throw Error(M(349));cn&30||kd(n,t,o)}return o}function kd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Td(e,t,n,r){t.value=n,t.getSnapshot=r,Id(t)&&Rd(e)}function Ed(e,t,n){return n(function(){Id(t)&&Rd(e)})}function Id(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ct(e,n)}catch{return!0}}function Rd(e){var t=jt(e,1);t!==null&&st(t,e,1,-1)}function Al(e){var t=pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:e},t.queue=e,e=e.dispatch=Mf.bind(null,oe,e),[t.memoizedState,e]}function Mr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function zd(){return Ze().memoizedState}function gi(e,t,n,r){var o=pt();oe.flags|=e,o.memoizedState=Mr(1|t,n,void 0,r===void 0?null:r)}function to(e,t,n,r){var o=Ze();r=r===void 0?null:r;var a=void 0;if(me!==null){var s=me.memoizedState;if(a=s.destroy,r!==null&&ys(r,s.deps)){o.memoizedState=Mr(t,n,a,r);return}}oe.flags|=e,o.memoizedState=Mr(1|t,n,a,r)}function Ml(e,t){return gi(8390656,8,e,t)}function bs(e,t){return to(2048,8,e,t)}function Ad(e,t){return to(4,2,e,t)}function Md(e,t){return to(4,4,e,t)}function Dd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pd(e,t,n){return n=n!=null?n.concat([e]):null,to(4,4,Dd.bind(null,t,e),n)}function Ss(){}function Ld(e,t){var n=Ze();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ys(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wd(e,t){var n=Ze();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ys(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nd(e,t,n){return cn&21?(ct(n,t)||(n=Gc(),oe.lanes|=n,dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pe=!0),e.memoizedState=n)}function zf(e,t){var n=q;q=n!==0&&4>n?n:4,e(!0);var r=Lo.transition;Lo.transition={};try{e(!1),t()}finally{q=n,Lo.transition=r}}function Bd(){return Ze().memoizedState}function Af(e,t,n){var r=Ht(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fd(e))_d(t,n);else if(n=wd(e,t,n,r),n!==null){var o=Ie();st(n,e,r,o),Od(n,t,r)}}function Mf(e,t,n){var r=Ht(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fd(e))_d(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,c=a(s,n);if(o.hasEagerState=!0,o.eagerState=c,ct(c,s)){var l=t.interleaved;l===null?(o.next=o,fs(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=wd(e,t,o,r),n!==null&&(o=Ie(),st(n,e,r,o),Od(n,t,r))}}function Fd(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function _d(e,t){fr=Fi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Od(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Za(e,n)}}var _i={readContext:qe,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},Df={readContext:qe,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:qe,useEffect:Ml,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gi(4194308,4,Dd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gi(4194308,4,e,t)},useInsertionEffect:function(e,t){return gi(4,2,e,t)},useMemo:function(e,t){var n=pt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Af.bind(null,oe,e),[r.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:Al,useDebugValue:Ss,useDeferredValue:function(e){return pt().memoizedState=e},useTransition:function(){var e=Al(!1),t=e[0];return e=zf.bind(null,e[1]),pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oe,o=pt();if(ne){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),xe===null)throw Error(M(349));cn&30||kd(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Ml(Ed.bind(null,r,a,e),[e]),r.flags|=2048,Mr(9,Td.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=pt(),t=xe.identifierPrefix;if(ne){var n=wt,r=vt;n=(r&~(1<<32-at(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Rf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pf={readContext:qe,useCallback:Ld,useContext:qe,useEffect:bs,useImperativeHandle:Pd,useInsertionEffect:Ad,useLayoutEffect:Md,useMemo:Wd,useReducer:Wo,useRef:zd,useState:function(){return Wo(Ar)},useDebugValue:Ss,useDeferredValue:function(e){var t=Ze();return Nd(t,me.memoizedState,e)},useTransition:function(){var e=Wo(Ar)[0],t=Ze().memoizedState;return[e,t]},useMutableSource:Cd,useSyncExternalStore:jd,useId:Bd,unstable_isNewReconciler:!1},Lf={readContext:qe,useCallback:Ld,useContext:qe,useEffect:bs,useImperativeHandle:Pd,useInsertionEffect:Ad,useLayoutEffect:Md,useMemo:Wd,useReducer:No,useRef:zd,useState:function(){return No(Ar)},useDebugValue:Ss,useDeferredValue:function(e){var t=Ze();return me===null?t.memoizedState=e:Nd(t,me.memoizedState,e)},useTransition:function(){var e=No(Ar)[0],t=Ze().memoizedState;return[e,t]},useMutableSource:Cd,useSyncExternalStore:jd,useId:Bd,unstable_isNewReconciler:!1};function rt(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Sa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var no={isMounted:function(e){return(e=e._reactInternals)?fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ie(),o=Ht(e),a=bt(r,o);a.payload=t,n!=null&&(a.callback=n),t=Ot(e,a,o),t!==null&&(st(t,e,o,r),fi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ie(),o=Ht(e),a=bt(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ot(e,a,o),t!==null&&(st(t,e,o,r),fi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ie(),r=Ht(e),o=bt(n,r);o.tag=2,t!=null&&(o.callback=t),t=Ot(e,o,r),t!==null&&(st(t,e,r,n),fi(t,e,r))}};function Dl(e,t,n,r,o,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!jr(n,r)||!jr(o,a):!0}function Gd(e,t,n){var r=!1,o=Vt,a=t.contextType;return typeof a=="object"&&a!==null?a=qe(a):(o=We(t)?sn:Te.current,r=t.contextTypes,a=(r=r!=null)?Nn(e,o):Vt),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Pl(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function Ca(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},ms(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=qe(a):(a=We(t)?sn:Te.current,o.context=Nn(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Sa(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&no.enqueueReplaceState(o,o.state,null),Ni(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function On(e,t){try{var n="",r=t;do n+=lp(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Bo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ja(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Wf=typeof WeakMap=="function"?WeakMap:Map;function Hd(e,t,n){n=bt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gi||(Gi=!0,Pa=r),ja(e,t)},n}function Ud(e,t,n){n=bt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ja(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){ja(e,t),typeof r!="function"&&(Gt===null?Gt=new Set([this]):Gt.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Ll(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Wf;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Jf.bind(null,e,t,n),t.then(e,e))}function Wl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nl(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bt(-1,1),t.tag=2,Ot(n,t,1))),n.lanes|=1),e)}var Nf=Tt.ReactCurrentOwner,Pe=!1;function Ee(e,t,n,r){t.child=e===null?vd(t,null,n,r):Fn(t,e.child,n,r)}function Bl(e,t,n,r,o){n=n.render;var a=t.ref;return Pn(t,o),r=vs(e,t,n,r,a,o),n=ws(),e!==null&&!Pe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kt(e,t,o)):(ne&&n&&ss(t),t.flags|=1,Ee(e,t,r,o),t.child)}function Fl(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!zs(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,$d(e,t,a,r,o)):(e=vi(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:jr,n(s,r)&&e.ref===t.ref)return kt(e,t,o)}return t.flags|=1,e=Ut(a,r),e.ref=t.ref,e.return=t,t.child=e}function $d(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(jr(a,r)&&e.ref===t.ref)if(Pe=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(Pe=!0);else return t.lanes=e.lanes,kt(e,t,o)}return ka(e,t,n,r,o)}function Vd(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(Rn,_e),_e|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Z(Rn,_e),_e|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Z(Rn,_e),_e|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Z(Rn,_e),_e|=r;return Ee(e,t,o,n),t.child}function Yd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,o){var a=We(n)?sn:Te.current;return a=Nn(t,a),Pn(t,o),n=vs(e,t,n,r,a,o),r=ws(),e!==null&&!Pe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kt(e,t,o)):(ne&&r&&ss(t),t.flags|=1,Ee(e,t,n,o),t.child)}function _l(e,t,n,r,o){if(We(n)){var a=!0;Mi(t)}else a=!1;if(Pn(t,o),t.stateNode===null)hi(e,t),Gd(t,n,r),Ca(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,c=t.memoizedProps;s.props=c;var l=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=qe(d):(d=We(n)?sn:Te.current,d=Nn(t,d));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==r||l!==d)&&Pl(t,s,r,d),At=!1;var m=t.memoizedState;s.state=m,Ni(t,r,s,o),l=t.memoizedState,c!==r||m!==l||Le.current||At?(typeof u=="function"&&(Sa(t,n,u,r),l=t.memoizedState),(c=At||Dl(t,n,c,r,m,l,d))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=d,r=c):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,bd(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:rt(t.type,c),s.props=d,f=t.pendingProps,m=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=qe(l):(l=We(n)?sn:Te.current,l=Nn(t,l));var x=n.getDerivedStateFromProps;(u=typeof x=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==f||m!==l)&&Pl(t,s,r,l),At=!1,m=t.memoizedState,s.state=m,Ni(t,r,s,o);var y=t.memoizedState;c!==f||m!==y||Le.current||At?(typeof x=="function"&&(Sa(t,n,x,r),y=t.memoizedState),(d=At||Dl(t,n,d,r,m,y,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),s.props=r,s.state=y,s.context=l,r=d):(typeof s.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Ta(e,t,n,r,a,o)}function Ta(e,t,n,r,o,a){Yd(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&kl(t,n,!1),kt(e,t,a);r=t.stateNode,Nf.current=t;var c=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Fn(t,e.child,null,a),t.child=Fn(t,null,c,a)):Ee(e,t,c,a),t.memoizedState=r.state,o&&kl(t,n,!0),t.child}function Kd(e){var t=e.stateNode;t.pendingContext?jl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jl(e,t.context,!1),gs(e,t.containerInfo)}function Ol(e,t,n,r,o){return Bn(),cs(o),t.flags|=256,Ee(e,t,n,r),t.child}var Ea={dehydrated:null,treeContext:null,retryLane:0};function Ia(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qd(e,t,n){var r=t.pendingProps,o=ie.current,a=!1,s=(t.flags&128)!==0,c;if((c=s)||(c=e!==null&&e.memoizedState===null?!1:(o&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Z(ie,o&1),e===null)return wa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=oo(s,r,0,null),e=an(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ia(n),t.memoizedState=Ea,e):Cs(t,s));if(o=e.memoizedState,o!==null&&(c=o.dehydrated,c!==null))return Bf(e,t,s,r,c,o,n);if(a){a=r.fallback,s=t.mode,o=e.child,c=o.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Ut(o,l),r.subtreeFlags=o.subtreeFlags&14680064),c!==null?a=Ut(c,a):(a=an(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?Ia(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Ea,r}return a=e.child,e=a.sibling,r=Ut(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Cs(e,t){return t=oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ei(e,t,n,r){return r!==null&&cs(r),Fn(t,e.child,null,n),e=Cs(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bf(e,t,n,r,o,a,s){if(n)return t.flags&256?(t.flags&=-257,r=Bo(Error(M(422))),ei(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=oo({mode:"visible",children:r.children},o,0,null),a=an(a,o,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Fn(t,e.child,null,s),t.child.memoizedState=Ia(s),t.memoizedState=Ea,a);if(!(t.mode&1))return ei(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(M(419)),r=Bo(a,r,void 0),ei(e,t,s,r)}if(c=(s&e.childLanes)!==0,Pe||c){if(r=xe,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,jt(e,o),st(r,e,o,-1))}return Rs(),r=Bo(Error(M(421))),ei(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Xf.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,Oe=_t(o.nextSibling),Ge=t,ne=!0,ot=null,e!==null&&(Ke[Qe++]=vt,Ke[Qe++]=wt,Ke[Qe++]=ln,vt=e.id,wt=e.overflow,ln=t),t=Cs(t,r.children),t.flags|=4096,t)}function Gl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ba(e.return,t,n)}function Fo(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Jd(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Ee(e,t,r.children,n),r=ie.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gl(e,n,t);else if(e.tag===19)Gl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Z(ie,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Bi(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Fo(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Bi(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Fo(t,!0,n,null,a);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=Ut(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ut(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ff(e,t,n){switch(t.tag){case 3:Kd(t),Bn();break;case 5:Sd(t);break;case 1:We(t.type)&&Mi(t);break;case 4:gs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Z(Li,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Z(ie,ie.current&1),t.flags|=128,null):n&t.child.childLanes?Qd(e,t,n):(Z(ie,ie.current&1),e=kt(e,t,n),e!==null?e.sibling:null);Z(ie,ie.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Jd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Z(ie,ie.current),r)break;return null;case 22:case 23:return t.lanes=0,Vd(e,t,n)}return kt(e,t,n)}var Xd,Ra,qd,Zd;Xd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ra=function(){};qd=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,rn(gt.current);var a=null;switch(n){case"input":o=Xo(e,o),r=Xo(e,r),a=[];break;case"select":o=ae({},o,{value:void 0}),r=ae({},r,{value:void 0}),a=[];break;case"textarea":o=ea(e,o),r=ea(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zi)}na(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var c=o[d];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xr.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var l=r[d];if(c=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(l!=null||c!=null))if(d==="style")if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(a=a||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xr.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&ee("scroll",e),a||c===l||(a=[])):(a=a||[]).push(d,l))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Zd=function(e,t,n,r){n!==r&&(t.flags|=4)};function tr(e,t){if(!ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _f(e,t,n){var r=t.pendingProps;switch(ls(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return We(t.type)&&Ai(),je(t),null;case 3:return r=t.stateNode,_n(),te(Le),te(Te),xs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(qr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ot!==null&&(Na(ot),ot=null))),Ra(e,t),je(t),null;case 5:hs(t);var o=rn(Rr.current);if(n=t.type,e!==null&&t.stateNode!=null)qd(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return je(t),null}if(e=rn(gt.current),qr(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ft]=t,r[Er]=a,e=(t.mode&1)!==0,n){case"dialog":ee("cancel",r),ee("close",r);break;case"iframe":case"object":case"embed":ee("load",r);break;case"video":case"audio":for(o=0;o<sr.length;o++)ee(sr[o],r);break;case"source":ee("error",r);break;case"img":case"image":case"link":ee("error",r),ee("load",r);break;case"details":ee("toggle",r);break;case"input":Xs(r,a),ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ee("invalid",r);break;case"textarea":Zs(r,a),ee("invalid",r)}na(n,a),o=null;for(var s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Xr(r.textContent,c,e),o=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Xr(r.textContent,c,e),o=["children",""+c]):xr.hasOwnProperty(s)&&c!=null&&s==="onScroll"&&ee("scroll",r)}switch(n){case"input":Hr(r),qs(r,a,!0);break;case"textarea":Hr(r),el(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=zi)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ec(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ft]=t,e[Er]=r,Xd(e,t,!1,!1),t.stateNode=e;e:{switch(s=ra(n,r),n){case"dialog":ee("cancel",e),ee("close",e),o=r;break;case"iframe":case"object":case"embed":ee("load",e),o=r;break;case"video":case"audio":for(o=0;o<sr.length;o++)ee(sr[o],e);o=r;break;case"source":ee("error",e),o=r;break;case"img":case"image":case"link":ee("error",e),ee("load",e),o=r;break;case"details":ee("toggle",e),o=r;break;case"input":Xs(e,r),o=Xo(e,r),ee("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ae({},r,{value:void 0}),ee("invalid",e);break;case"textarea":Zs(e,r),o=ea(e,r),ee("invalid",e);break;default:o=r}na(n,o),c=o;for(a in c)if(c.hasOwnProperty(a)){var l=c[a];a==="style"?zc(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ic(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yr(e,l):typeof l=="number"&&yr(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(xr.hasOwnProperty(a)?l!=null&&a==="onScroll"&&ee("scroll",e):l!=null&&Ya(e,a,l,s))}switch(n){case"input":Hr(e),qs(e,r,!1);break;case"textarea":Hr(e),el(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$t(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?zn(e,!!r.multiple,a,!1):r.defaultValue!=null&&zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=zi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)Zd(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=rn(Rr.current),rn(gt.current),qr(t)){if(r=t.stateNode,n=t.memoizedProps,r[ft]=t,(a=r.nodeValue!==n)&&(e=Ge,e!==null))switch(e.tag){case 3:Xr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xr(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ft]=t,t.stateNode=r}return je(t),null;case 13:if(te(ie),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ne&&Oe!==null&&t.mode&1&&!(t.flags&128))xd(),Bn(),t.flags|=98560,a=!1;else if(a=qr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(M(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(M(317));a[ft]=t}else Bn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),a=!1}else ot!==null&&(Na(ot),ot=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?ge===0&&(ge=3):Rs())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return _n(),Ra(e,t),e===null&&kr(t.stateNode.containerInfo),je(t),null;case 10:return ps(t.type._context),je(t),null;case 17:return We(t.type)&&Ai(),je(t),null;case 19:if(te(ie),a=t.memoizedState,a===null)return je(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)tr(a,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Bi(e),s!==null){for(t.flags|=128,tr(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Z(ie,ie.current&1|2),t.child}e=e.sibling}a.tail!==null&&le()>Gn&&(t.flags|=128,r=!0,tr(a,!1),t.lanes=4194304)}else{if(!r)if(e=Bi(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),tr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ne)return je(t),null}else 2*le()-a.renderingStartTime>Gn&&n!==1073741824&&(t.flags|=128,r=!0,tr(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=le(),t.sibling=null,n=ie.current,Z(ie,r?n&1|2:n&1),t):(je(t),null);case 22:case 23:return Is(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_e&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Of(e,t){switch(ls(t),t.tag){case 1:return We(t.type)&&Ai(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _n(),te(Le),te(Te),xs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hs(t),null;case 13:if(te(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Bn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return te(ie),null;case 4:return _n(),null;case 10:return ps(t.type._context),null;case 22:case 23:return Is(),null;case 24:return null;default:return null}}var ti=!1,ke=!1,Gf=typeof WeakSet=="function"?WeakSet:Set,B=null;function In(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function za(e,t,n){try{n()}catch(r){se(e,t,r)}}var Hl=!1;function Hf(e,t){if(fa=Ei,e=id(),as(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,c=-1,l=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var x;f!==n||o!==0&&f.nodeType!==3||(c=s+o),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(x=f.firstChild)!==null;)m=f,f=x;for(;;){if(f===e)break t;if(m===n&&++d===o&&(c=s),m===a&&++u===r&&(l=s),(x=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=x}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ma={focusedElem:e,selectionRange:n},Ei=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,E=y.memoizedState,g=t.stateNode,h=g.getSnapshotBeforeUpdate(t.elementType===t.type?b:rt(t.type,b),E);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(C){se(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return y=Hl,Hl=!1,y}function mr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&za(t,n,a)}o=o.next}while(o!==r)}}function ro(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Aa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eu(e){var t=e.alternate;t!==null&&(e.alternate=null,eu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ft],delete t[Er],delete t[xa],delete t[kf],delete t[Tf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tu(e){return e.tag===5||e.tag===3||e.tag===4}function Ul(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ma(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zi));else if(r!==4&&(e=e.child,e!==null))for(Ma(e,t,n),e=e.sibling;e!==null;)Ma(e,t,n),e=e.sibling}function Da(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Da(e,t,n),e=e.sibling;e!==null;)Da(e,t,n),e=e.sibling}var we=null,it=!1;function Rt(e,t,n){for(n=n.child;n!==null;)nu(e,t,n),n=n.sibling}function nu(e,t,n){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Qi,n)}catch{}switch(n.tag){case 5:ke||In(n,t);case 6:var r=we,o=it;we=null,Rt(e,t,n),we=r,it=o,we!==null&&(it?(e=we,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):we.removeChild(n.stateNode));break;case 18:we!==null&&(it?(e=we,n=n.stateNode,e.nodeType===8?Mo(e.parentNode,n):e.nodeType===1&&Mo(e,n),Sr(e)):Mo(we,n.stateNode));break;case 4:r=we,o=it,we=n.stateNode.containerInfo,it=!0,Rt(e,t,n),we=r,it=o;break;case 0:case 11:case 14:case 15:if(!ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&za(n,t,s),o=o.next}while(o!==r)}Rt(e,t,n);break;case 1:if(!ke&&(In(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){se(n,t,c)}Rt(e,t,n);break;case 21:Rt(e,t,n);break;case 22:n.mode&1?(ke=(r=ke)||n.memoizedState!==null,Rt(e,t,n),ke=r):Rt(e,t,n);break;default:Rt(e,t,n)}}function $l(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Gf),t.forEach(function(r){var o=qf.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function nt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,c=s;e:for(;c!==null;){switch(c.tag){case 5:we=c.stateNode,it=!1;break e;case 3:we=c.stateNode.containerInfo,it=!0;break e;case 4:we=c.stateNode.containerInfo,it=!0;break e}c=c.return}if(we===null)throw Error(M(160));nu(a,s,o),we=null,it=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(d){se(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ru(t,e),t=t.sibling}function ru(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nt(t,e),ut(e),r&4){try{mr(3,e,e.return),ro(3,e)}catch(b){se(e,e.return,b)}try{mr(5,e,e.return)}catch(b){se(e,e.return,b)}}break;case 1:nt(t,e),ut(e),r&512&&n!==null&&In(n,n.return);break;case 5:if(nt(t,e),ut(e),r&512&&n!==null&&In(n,n.return),e.flags&32){var o=e.stateNode;try{yr(o,"")}catch(b){se(e,e.return,b)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&kc(o,a),ra(c,s);var d=ra(c,a);for(s=0;s<l.length;s+=2){var u=l[s],f=l[s+1];u==="style"?zc(o,f):u==="dangerouslySetInnerHTML"?Ic(o,f):u==="children"?yr(o,f):Ya(o,u,f,d)}switch(c){case"input":qo(o,a);break;case"textarea":Tc(o,a);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?zn(o,!!a.multiple,x,!1):m!==!!a.multiple&&(a.defaultValue!=null?zn(o,!!a.multiple,a.defaultValue,!0):zn(o,!!a.multiple,a.multiple?[]:"",!1))}o[Er]=a}catch(b){se(e,e.return,b)}}break;case 6:if(nt(t,e),ut(e),r&4){if(e.stateNode===null)throw Error(M(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(b){se(e,e.return,b)}}break;case 3:if(nt(t,e),ut(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sr(t.containerInfo)}catch(b){se(e,e.return,b)}break;case 4:nt(t,e),ut(e);break;case 13:nt(t,e),ut(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Ts=le())),r&4&&$l(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(ke=(d=ke)||u,nt(t,e),ke=d):nt(t,e),ut(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(B=e,u=e.child;u!==null;){for(f=B=u;B!==null;){switch(m=B,x=m.child,m.tag){case 0:case 11:case 14:case 15:mr(4,m,m.return);break;case 1:In(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(b){se(r,n,b)}}break;case 5:In(m,m.return);break;case 22:if(m.memoizedState!==null){Yl(f);continue}}x!==null?(x.return=m,B=x):Yl(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{o=f.stateNode,d?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=Rc("display",s))}catch(b){se(e,e.return,b)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){se(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nt(t,e),ut(e),r&4&&$l(e);break;case 21:break;default:nt(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tu(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(yr(o,""),r.flags&=-33);var a=Ul(e);Da(e,a,o);break;case 3:case 4:var s=r.stateNode.containerInfo,c=Ul(e);Ma(e,c,s);break;default:throw Error(M(161))}}catch(l){se(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uf(e,t,n){B=e,iu(e)}function iu(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var o=B,a=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||ti;if(!s){var c=o.alternate,l=c!==null&&c.memoizedState!==null||ke;c=ti;var d=ke;if(ti=s,(ke=l)&&!d)for(B=o;B!==null;)s=B,l=s.child,s.tag===22&&s.memoizedState!==null?Kl(o):l!==null?(l.return=s,B=l):Kl(o);for(;a!==null;)B=a,iu(a),a=a.sibling;B=o,ti=c,ke=d}Vl(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,B=a):Vl(e)}}function Vl(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||ro(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ke)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&zl(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zl(t,s,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Sr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}ke||t.flags&512&&Aa(t)}catch(m){se(t,t.return,m)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Yl(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Kl(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ro(4,t)}catch(l){se(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){se(t,o,l)}}var a=t.return;try{Aa(t)}catch(l){se(t,a,l)}break;case 5:var s=t.return;try{Aa(t)}catch(l){se(t,s,l)}}}catch(l){se(t,t.return,l)}if(t===e){B=null;break}var c=t.sibling;if(c!==null){c.return=t.return,B=c;break}B=t.return}}var $f=Math.ceil,Oi=Tt.ReactCurrentDispatcher,js=Tt.ReactCurrentOwner,Xe=Tt.ReactCurrentBatchConfig,X=0,xe=null,pe=null,be=0,_e=0,Rn=Kt(0),ge=0,Dr=null,dn=0,io=0,ks=0,gr=null,De=null,Ts=0,Gn=1/0,xt=null,Gi=!1,Pa=null,Gt=null,ni=!1,Lt=null,Hi=0,hr=0,La=null,xi=-1,yi=0;function Ie(){return X&6?le():xi!==-1?xi:xi=le()}function Ht(e){return e.mode&1?X&2&&be!==0?be&-be:If.transition!==null?(yi===0&&(yi=Gc()),yi):(e=q,e!==0||(e=window.event,e=e===void 0?16:Qc(e.type)),e):1}function st(e,t,n,r){if(50<hr)throw hr=0,La=null,Error(M(185));Pr(e,n,r),(!(X&2)||e!==xe)&&(e===xe&&(!(X&2)&&(io|=n),ge===4&&Dt(e,be)),Ne(e,r),n===1&&X===0&&!(t.mode&1)&&(Gn=le()+500,eo&&Qt()))}function Ne(e,t){var n=e.callbackNode;Ep(e,t);var r=Ti(e,e===xe?be:0);if(r===0)n!==null&&rl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rl(n),t===1)e.tag===0?Ef(Ql.bind(null,e)):md(Ql.bind(null,e)),Cf(function(){!(X&6)&&Qt()}),n=null;else{switch(Hc(r)){case 1:n=qa;break;case 4:n=_c;break;case 16:n=ki;break;case 536870912:n=Oc;break;default:n=ki}n=pu(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if(xi=-1,yi=0,X&6)throw Error(M(327));var n=e.callbackNode;if(Ln()&&e.callbackNode!==n)return null;var r=Ti(e,e===xe?be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ui(e,r);else{t=r;var o=X;X|=2;var a=su();(xe!==e||be!==t)&&(xt=null,Gn=le()+500,on(e,t));do try{Kf();break}catch(c){au(e,c)}while(!0);us(),Oi.current=a,X=o,pe!==null?t=0:(xe=null,be=0,t=ge)}if(t!==0){if(t===2&&(o=la(e),o!==0&&(r=o,t=Wa(e,o))),t===1)throw n=Dr,on(e,0),Dt(e,r),Ne(e,le()),n;if(t===6)Dt(e,r);else{if(o=e.current.alternate,!(r&30)&&!Vf(o)&&(t=Ui(e,r),t===2&&(a=la(e),a!==0&&(r=a,t=Wa(e,a))),t===1))throw n=Dr,on(e,0),Dt(e,r),Ne(e,le()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:en(e,De,xt);break;case 3:if(Dt(e,r),(r&130023424)===r&&(t=Ts+500-le(),10<t)){if(Ti(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ie(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ha(en.bind(null,e,De,xt),t);break}en(e,De,xt);break;case 4:if(Dt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,s=t[s],s>o&&(o=s),r&=~a}if(r=o,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$f(r/1960))-r,10<r){e.timeoutHandle=ha(en.bind(null,e,De,xt),r);break}en(e,De,xt);break;case 5:en(e,De,xt);break;default:throw Error(M(329))}}}return Ne(e,le()),e.callbackNode===n?ou.bind(null,e):null}function Wa(e,t){var n=gr;return e.current.memoizedState.isDehydrated&&(on(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=De,De=n,t!==null&&Na(t)),e}function Na(e){De===null?De=e:De.push.apply(De,e)}function Vf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!ct(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dt(e,t){for(t&=~ks,t&=~io,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function Ql(e){if(X&6)throw Error(M(327));Ln();var t=Ti(e,0);if(!(t&1))return Ne(e,le()),null;var n=Ui(e,t);if(e.tag!==0&&n===2){var r=la(e);r!==0&&(t=r,n=Wa(e,r))}if(n===1)throw n=Dr,on(e,0),Dt(e,t),Ne(e,le()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,en(e,De,xt),Ne(e,le()),null}function Es(e,t){var n=X;X|=1;try{return e(t)}finally{X=n,X===0&&(Gn=le()+500,eo&&Qt())}}function un(e){Lt!==null&&Lt.tag===0&&!(X&6)&&Ln();var t=X;X|=1;var n=Xe.transition,r=q;try{if(Xe.transition=null,q=1,e)return e()}finally{q=r,Xe.transition=n,X=t,!(X&6)&&Qt()}}function Is(){_e=Rn.current,te(Rn)}function on(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Sf(n)),pe!==null)for(n=pe.return;n!==null;){var r=n;switch(ls(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ai();break;case 3:_n(),te(Le),te(Te),xs();break;case 5:hs(r);break;case 4:_n();break;case 13:te(ie);break;case 19:te(ie);break;case 10:ps(r.type._context);break;case 22:case 23:Is()}n=n.return}if(xe=e,pe=e=Ut(e.current,null),be=_e=t,ge=0,Dr=null,ks=io=dn=0,De=gr=null,nn!==null){for(t=0;t<nn.length;t++)if(n=nn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=o,r.next=s}n.pending=r}nn=null}return e}function au(e,t){do{var n=pe;try{if(us(),mi.current=_i,Fi){for(var r=oe.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Fi=!1}if(cn=0,he=me=oe=null,fr=!1,zr=0,js.current=null,n===null||n.return===null){ge=1,Dr=t,pe=null;break}e:{var a=e,s=n.return,c=n,l=t;if(t=be,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,u=c,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Wl(s);if(x!==null){x.flags&=-257,Nl(x,s,c,a,t),x.mode&1&&Ll(a,d,t),t=x,l=d;var y=t.updateQueue;if(y===null){var b=new Set;b.add(l),t.updateQueue=b}else y.add(l);break e}else{if(!(t&1)){Ll(a,d,t),Rs();break e}l=Error(M(426))}}else if(ne&&c.mode&1){var E=Wl(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Nl(E,s,c,a,t),cs(On(l,c));break e}}a=l=On(l,c),ge!==4&&(ge=2),gr===null?gr=[a]:gr.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=Hd(a,l,t);Rl(a,g);break e;case 1:c=l;var h=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Gt===null||!Gt.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var C=Ud(a,c,t);Rl(a,C);break e}}a=a.return}while(a!==null)}cu(n)}catch(v){t=v,pe===n&&n!==null&&(pe=n=n.return);continue}break}while(!0)}function su(){var e=Oi.current;return Oi.current=_i,e===null?_i:e}function Rs(){(ge===0||ge===3||ge===2)&&(ge=4),xe===null||!(dn&268435455)&&!(io&268435455)||Dt(xe,be)}function Ui(e,t){var n=X;X|=2;var r=su();(xe!==e||be!==t)&&(xt=null,on(e,t));do try{Yf();break}catch(o){au(e,o)}while(!0);if(us(),X=n,Oi.current=r,pe!==null)throw Error(M(261));return xe=null,be=0,ge}function Yf(){for(;pe!==null;)lu(pe)}function Kf(){for(;pe!==null&&!yp();)lu(pe)}function lu(e){var t=uu(e.alternate,e,_e);e.memoizedProps=e.pendingProps,t===null?cu(e):pe=t,js.current=null}function cu(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Of(n,t),n!==null){n.flags&=32767,pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,pe=null;return}}else if(n=_f(n,t,_e),n!==null){pe=n;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);ge===0&&(ge=5)}function en(e,t,n){var r=q,o=Xe.transition;try{Xe.transition=null,q=1,Qf(e,t,n,r)}finally{Xe.transition=o,q=r}return null}function Qf(e,t,n,r){do Ln();while(Lt!==null);if(X&6)throw Error(M(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Ip(e,a),e===xe&&(pe=xe=null,be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ni||(ni=!0,pu(ki,function(){return Ln(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Xe.transition,Xe.transition=null;var s=q;q=1;var c=X;X|=4,js.current=null,Hf(e,n),ru(n,e),gf(ma),Ei=!!fa,ma=fa=null,e.current=n,Uf(n),vp(),X=c,q=s,Xe.transition=a}else e.current=n;if(ni&&(ni=!1,Lt=e,Hi=o),a=e.pendingLanes,a===0&&(Gt=null),Sp(n.stateNode),Ne(e,le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Gi)throw Gi=!1,e=Pa,Pa=null,e;return Hi&1&&e.tag!==0&&Ln(),a=e.pendingLanes,a&1?e===La?hr++:(hr=0,La=e):hr=0,Qt(),null}function Ln(){if(Lt!==null){var e=Hc(Hi),t=Xe.transition,n=q;try{if(Xe.transition=null,q=16>e?16:e,Lt===null)var r=!1;else{if(e=Lt,Lt=null,Hi=0,X&6)throw Error(M(331));var o=X;for(X|=4,B=e.current;B!==null;){var a=B,s=a.child;if(B.flags&16){var c=a.deletions;if(c!==null){for(var l=0;l<c.length;l++){var d=c[l];for(B=d;B!==null;){var u=B;switch(u.tag){case 0:case 11:case 15:mr(8,u,a)}var f=u.child;if(f!==null)f.return=u,B=f;else for(;B!==null;){u=B;var m=u.sibling,x=u.return;if(eu(u),u===d){B=null;break}if(m!==null){m.return=x,B=m;break}B=x}}}var y=a.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}B=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,B=s;else e:for(;B!==null;){if(a=B,a.flags&2048)switch(a.tag){case 0:case 11:case 15:mr(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,B=g;break e}B=a.return}}var h=e.current;for(B=h;B!==null;){s=B;var p=s.child;if(s.subtreeFlags&2064&&p!==null)p.return=s,B=p;else e:for(s=h;B!==null;){if(c=B,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ro(9,c)}}catch(v){se(c,c.return,v)}if(c===s){B=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,B=C;break e}B=c.return}}if(X=o,Qt(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Qi,e)}catch{}r=!0}return r}finally{q=n,Xe.transition=t}}return!1}function Jl(e,t,n){t=On(n,t),t=Hd(e,t,1),e=Ot(e,t,1),t=Ie(),e!==null&&(Pr(e,1,t),Ne(e,t))}function se(e,t,n){if(e.tag===3)Jl(e,e,n);else for(;t!==null;){if(t.tag===3){Jl(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gt===null||!Gt.has(r))){e=On(n,e),e=Ud(t,e,1),t=Ot(t,e,1),e=Ie(),t!==null&&(Pr(t,1,e),Ne(t,e));break}}t=t.return}}function Jf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ie(),e.pingedLanes|=e.suspendedLanes&n,xe===e&&(be&n)===n&&(ge===4||ge===3&&(be&130023424)===be&&500>le()-Ts?on(e,0):ks|=n),Ne(e,t)}function du(e,t){t===0&&(e.mode&1?(t=Vr,Vr<<=1,!(Vr&130023424)&&(Vr=4194304)):t=1);var n=Ie();e=jt(e,t),e!==null&&(Pr(e,t,n),Ne(e,n))}function Xf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),du(e,n)}function qf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),du(e,n)}var uu;uu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Le.current)Pe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pe=!1,Ff(e,t,n);Pe=!!(e.flags&131072)}else Pe=!1,ne&&t.flags&1048576&&gd(t,Pi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;hi(e,t),e=t.pendingProps;var o=Nn(t,Te.current);Pn(t,n),o=vs(null,t,r,e,o,n);var a=ws();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,We(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ms(t),o.updater=no,t.stateNode=o,o._reactInternals=t,Ca(t,r,e,n),t=Ta(null,t,r,!0,a,n)):(t.tag=0,ne&&a&&ss(t),Ee(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(hi(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=em(r),e=rt(r,e),o){case 0:t=ka(null,t,r,e,n);break e;case 1:t=_l(null,t,r,e,n);break e;case 11:t=Bl(null,t,r,e,n);break e;case 14:t=Fl(null,t,r,rt(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rt(r,o),ka(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rt(r,o),_l(e,t,r,o,n);case 3:e:{if(Kd(t),e===null)throw Error(M(387));r=t.pendingProps,a=t.memoizedState,o=a.element,bd(e,t),Ni(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=On(Error(M(423)),t),t=Ol(e,t,r,n,o);break e}else if(r!==o){o=On(Error(M(424)),t),t=Ol(e,t,r,n,o);break e}else for(Oe=_t(t.stateNode.containerInfo.firstChild),Ge=t,ne=!0,ot=null,n=vd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bn(),r===o){t=kt(e,t,n);break e}Ee(e,t,r,n)}t=t.child}return t;case 5:return Sd(t),e===null&&wa(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,s=o.children,ga(r,o)?s=null:a!==null&&ga(r,a)&&(t.flags|=32),Yd(e,t),Ee(e,t,s,n),t.child;case 6:return e===null&&wa(t),null;case 13:return Qd(e,t,n);case 4:return gs(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fn(t,null,r,n):Ee(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rt(r,o),Bl(e,t,r,o,n);case 7:return Ee(e,t,t.pendingProps,n),t.child;case 8:return Ee(e,t,t.pendingProps.children,n),t.child;case 12:return Ee(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Z(Li,r._currentValue),r._currentValue=s,a!==null)if(ct(a.value,s)){if(a.children===o.children&&!Le.current){t=kt(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){s=a.child;for(var l=c.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=bt(-1,n&-n),l.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ba(a.return,n,t),c.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(M(341));s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),ba(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ee(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Pn(t,n),o=qe(o),r=r(o),t.flags|=1,Ee(e,t,r,n),t.child;case 14:return r=t.type,o=rt(r,t.pendingProps),o=rt(r.type,o),Fl(e,t,r,o,n);case 15:return $d(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rt(r,o),hi(e,t),t.tag=1,We(r)?(e=!0,Mi(t)):e=!1,Pn(t,n),Gd(t,r,o),Ca(t,r,o,n),Ta(null,t,r,!0,e,n);case 19:return Jd(e,t,n);case 22:return Vd(e,t,n)}throw Error(M(156,t.tag))};function pu(e,t){return Fc(e,t)}function Zf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,n,r){return new Zf(e,t,n,r)}function zs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function em(e){if(typeof e=="function")return zs(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qa)return 11;if(e===Ja)return 14}return 2}function Ut(e,t){var n=e.alternate;return n===null?(n=Je(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function vi(e,t,n,r,o,a){var s=2;if(r=e,typeof e=="function")zs(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case vn:return an(n.children,o,a,t);case Ka:s=8,o|=8;break;case Yo:return e=Je(12,n,t,o|2),e.elementType=Yo,e.lanes=a,e;case Ko:return e=Je(13,n,t,o),e.elementType=Ko,e.lanes=a,e;case Qo:return e=Je(19,n,t,o),e.elementType=Qo,e.lanes=a,e;case Sc:return oo(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wc:s=10;break e;case bc:s=9;break e;case Qa:s=11;break e;case Ja:s=14;break e;case zt:s=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=Je(s,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function an(e,t,n,r){return e=Je(7,e,r,t),e.lanes=n,e}function oo(e,t,n,r){return e=Je(22,e,r,t),e.elementType=Sc,e.lanes=n,e.stateNode={isHidden:!1},e}function _o(e,t,n){return e=Je(6,e,null,t),e.lanes=n,e}function Oo(e,t,n){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tm(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bo(0),this.expirationTimes=bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function As(e,t,n,r,o,a,s,c,l){return e=new tm(e,t,n,c,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Je(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ms(a),e}function nm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fu(e){if(!e)return Vt;e=e._reactInternals;e:{if(fn(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(We(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(We(n))return fd(e,n,t)}return t}function mu(e,t,n,r,o,a,s,c,l){return e=As(n,r,!0,e,o,a,s,c,l),e.context=fu(null),n=e.current,r=Ie(),o=Ht(n),a=bt(r,o),a.callback=t??null,Ot(n,a,o),e.current.lanes=o,Pr(e,o,r),Ne(e,r),e}function ao(e,t,n,r){var o=t.current,a=Ie(),s=Ht(o);return n=fu(n),t.context===null?t.context=n:t.pendingContext=n,t=bt(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ot(o,t,s),e!==null&&(st(e,o,s,a),fi(e,o,s)),s}function $i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ms(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}function rm(){return null}var gu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ds(e){this._internalRoot=e}so.prototype.render=Ds.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));ao(e,t,null,null)};so.prototype.unmount=Ds.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;un(function(){ao(null,e,null,null)}),t[Ct]=null}};function so(e){this._internalRoot=e}so.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&t!==0&&t<Mt[n].priority;n++);Mt.splice(n,0,e),n===0&&Kc(e)}};function Ps(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function im(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var d=$i(s);a.call(d)}}var s=mu(t,r,e,0,null,!1,!1,"",ql);return e._reactRootContainer=s,e[Ct]=s.current,kr(e.nodeType===8?e.parentNode:e),un(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var c=r;r=function(){var d=$i(l);c.call(d)}}var l=As(e,0,!1,null,null,!1,!1,"",ql);return e._reactRootContainer=l,e[Ct]=l.current,kr(e.nodeType===8?e.parentNode:e),un(function(){ao(t,l,n,r)}),l}function co(e,t,n,r,o){var a=n._reactRootContainer;if(a){var s=a;if(typeof o=="function"){var c=o;o=function(){var l=$i(s);c.call(l)}}ao(t,s,e,o)}else s=im(n,t,e,o,r);return $i(s)}Uc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ar(t.pendingLanes);n!==0&&(Za(t,n|1),Ne(t,le()),!(X&6)&&(Gn=le()+500,Qt()))}break;case 13:un(function(){var r=jt(e,1);if(r!==null){var o=Ie();st(r,e,1,o)}}),Ms(e,1)}};es=function(e){if(e.tag===13){var t=jt(e,134217728);if(t!==null){var n=Ie();st(t,e,134217728,n)}Ms(e,134217728)}};$c=function(e){if(e.tag===13){var t=Ht(e),n=jt(e,t);if(n!==null){var r=Ie();st(n,e,t,r)}Ms(e,t)}};Vc=function(){return q};Yc=function(e,t){var n=q;try{return q=e,t()}finally{q=n}};oa=function(e,t,n){switch(t){case"input":if(qo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Zi(r);if(!o)throw Error(M(90));jc(r),qo(r,o)}}}break;case"textarea":Tc(e,n);break;case"select":t=n.value,t!=null&&zn(e,!!n.multiple,t,!1)}};Dc=Es;Pc=un;var om={usingClientEntryPoint:!1,Events:[Wr,Cn,Zi,Ac,Mc,Es]},nr={findFiberByHostInstance:tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},am={bundleType:nr.bundleType,version:nr.version,rendererPackageName:nr.rendererPackageName,rendererConfig:nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nc(e),e===null?null:e.stateNode},findFiberByHostInstance:nr.findFiberByHostInstance||rm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ri=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ri.isDisabled&&ri.supportsFiber)try{Qi=ri.inject(am),mt=ri}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=om;Ue.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ps(t))throw Error(M(200));return nm(e,t,null,n)};Ue.createRoot=function(e,t){if(!Ps(e))throw Error(M(299));var n=!1,r="",o=gu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=As(e,1,!1,null,null,n,!1,r,o),e[Ct]=t.current,kr(e.nodeType===8?e.parentNode:e),new Ds(t)};Ue.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=Nc(t),e=e===null?null:e.stateNode,e};Ue.flushSync=function(e){return un(e)};Ue.hydrate=function(e,t,n){if(!lo(t))throw Error(M(200));return co(null,e,t,!0,n)};Ue.hydrateRoot=function(e,t,n){if(!Ps(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",s=gu;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=mu(t,null,e,1,n??null,o,!1,a,s),e[Ct]=t.current,kr(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new so(t)};Ue.render=function(e,t,n){if(!lo(t))throw Error(M(200));return co(null,e,t,!1,n)};Ue.unmountComponentAtNode=function(e){if(!lo(e))throw Error(M(40));return e._reactRootContainer?(un(function(){co(null,null,e,!1,function(){e._reactRootContainer=null,e[Ct]=null})}),!0):!1};Ue.unstable_batchedUpdates=Es;Ue.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!lo(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return co(e,t,n,!1,r)};Ue.version="18.3.1-next-f1338f8080-20240426";function hu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hu)}catch(e){console.error(e)}}hu(),hc.exports=Ue;var sm=hc.exports,Zl=sm;$o.createRoot=Zl.createRoot,$o.hydrateRoot=Zl.hydrateRoot;function lm(e,t){const n=new Set(e.map.activeArcs.map(r=>r.id));return n.size===0&&e.metrics.unmeasured.welfareDebt>.3?t.slice(0,Math.floor(e.metrics.unmeasured.welfareDebt*5)).map(r=>{const o=1+e.metrics.unmeasured.welfareDebt*2;return{...r,baseWeight:r.baseWeight*o}}):t.filter(r=>n.has(r.id)).map(r=>{const o=1+e.metrics.unmeasured.welfareDebt*2;return{...r,baseWeight:r.baseWeight*o}})}function cm(e,t){const n=new Set(e.map.activeHubs.map(r=>r.id));return n.size===0&&e.metrics.measured.welfareStandardAdoption>.5?t.slice(0,Math.floor(e.metrics.measured.welfareStandardAdoption)).map(r=>({...r,_size:.5+e.metrics.unmeasured.regulatoryCapture*.5,_brightness:.5+e.metrics.measured.welfareStandardAdoption/3*.5})):t.filter(r=>n.has(r.id)).map(r=>({...r,_size:.5+e.metrics.unmeasured.regulatoryCapture*.5,_brightness:.5+e.metrics.measured.welfareStandardAdoption/3*.5}))}function dm(e){return e.map.activeRings.filter(t=>e.turn-t.createdTurn<t.ttl)}function xu(e){return e.memory.assumptionsBank.filter(n=>n.strength<.3)}const ec={USA:{name:"United States",iso3:"USA",fastFacts:["No federal law protecting farm animals during rearing","State-level protections vary widely (e.g., California Proposition 12)","Humane Slaughter Act covers only transport and slaughter","~99% of farm animals raised in intensive systems","Growing plant-based protein market (~$8B in 2023)"],baselineGrade:"D",baselineScore:.3,sources:["https://www.aphis.usda.gov/aphis/ourfocus/animalwelfare","https://www.humanesociety.org/resources/farm-animal-welfare-legislation","https://www.goodfoodinstitute.org/state-of-the-industry-report"],detailedContext:"The U.S. has a fragmented approach to farm animal welfare, with state-level initiatives like California's Proposition 12 (2018) creating patchwork protections. The federal Humane Slaughter Act (1958) only covers transport and slaughter, not rearing conditions. Approximately 99% of farm animals are raised in intensive confinement systems. However, the alternative protein sector is rapidly growing, with investments exceeding $8B in 2023, indicating market-driven shifts toward welfare-aligned production."},GBR:{name:"United Kingdom",iso3:"GBR",fastFacts:["First country to recognize animal sentience in law (2006)","Banned battery cages for laying hens (2012)","Mandatory CCTV in slaughterhouses (2018)","Strongest farm animal welfare laws in Europe","High public support for welfare improvements"],baselineGrade:"B",baselineScore:.4,sources:["https://www.gov.uk/government/publications/animal-welfare-act-2006","https://www.rspca.org.uk/whatwedo/lobbying/farmanimals","https://www.compassioninfoodbusiness.com/"],detailedContext:"The UK was the first country to legally recognize animal sentience (Animal Welfare Act 2006). Post-Brexit, the UK has maintained and strengthened EU welfare standards, including mandatory CCTV in slaughterhouses (2018) and bans on battery cages (2012). The UK has some of the strongest farm animal welfare protections globally, driven by high public support and effective enforcement through organizations like the RSPCA. However, post-Brexit trade deals have raised concerns about maintaining these standards."},FRA:{name:"France",iso3:"FRA",fastFacts:["EU member with mandatory welfare standards","Banned battery cages (2012) and veal crates","Growing alternative protein sector","Strong enforcement through DGAL","Public campaigns increasing awareness"],baselineGrade:"C",baselineScore:.35,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://agriculture.gouv.fr/animal-welfare-france","https://www.goodfoodinstitute.org/europe/france"],detailedContext:"France, as an EU member state, implements comprehensive EU welfare directives including bans on battery cages (2012) and veal crates. The Direction Gnrale de l'Alimentation (DGAL) enforces welfare standards with regular inspections. France has a growing alternative protein sector, with companies like Ynsect and Innovafeed leading in insect-based proteins. Public awareness campaigns and consumer demand are driving improvements, though enforcement capacity varies by region."},DEU:{name:"Germany",iso3:"DEU",fastFacts:["EU member with strict welfare regulations","Banned battery cages and sow stalls","Strong 3Rs enforcement for lab animals","Leading alternative protein research","High consumer demand for welfare products"],baselineGrade:"B",baselineScore:.4,sources:["https://www.bmel.de/EN/topics/animals/animal-welfare/animal-welfare_node.html","https://www.goodfoodinstitute.org/europe/germany","https://www.bfr.bund.de/en/home.html"],detailedContext:"Germany has some of the strictest animal welfare regulations in the EU, with comprehensive bans on battery cages and sow stalls. The country enforces the 3Rs principle (Replace, Reduce, Refine) rigorously for laboratory animals. Germany is a leader in alternative protein research and development, with companies like Rgenwalder Mhle and Beyond Meat establishing significant operations. High consumer demand for welfare-certified products drives market innovation, though intensive farming systems remain prevalent."},CHN:{name:"China",iso3:"CHN",fastFacts:["World's largest producer of farm animals","Limited national welfare legislation","Growing middle class demanding better welfare","Rapid expansion of intensive farming","Alternative protein investment increasing"],baselineGrade:"F",baselineScore:.45,sources:["https://www.goodfoodinstitute.org/china","https://www.worldanimalprotection.org/countries/china","https://www.nature.com/articles/s41598-021-82355-5"],detailedContext:"China is the world's largest producer of farm animals, with over 700 million pigs, 4 billion poultry, and significant cattle production. National welfare legislation is minimal, focusing primarily on food safety rather than animal welfare during rearing. However, a growing middle class is increasingly concerned about animal welfare, driving demand for higher-welfare products. China is rapidly expanding intensive farming systems while simultaneously becoming a major investor in alternative proteins, with companies like Starfield and Zhenmeat leading innovation."},IND:{name:"India",iso3:"IND",fastFacts:["Constitutional protection for animals (Article 51A)","Strong cultural traditions around animal welfare","Large dairy industry with mixed welfare standards","Growing meat consumption in urban areas","Limited enforcement capacity"],baselineGrade:"C",baselineScore:.4,sources:["https://www.indiacode.nic.in/show-data?actid=AC_CEN_5_23_00010_196059_1517807320172","https://www.worldanimalprotection.org/countries/india","https://www.goodfoodinstitute.org/india"],detailedContext:"India has unique constitutional protections for animals (Article 51A(g)) and strong cultural traditions emphasizing ahimsa (non-violence). The country has the world's largest dairy herd, with mixed welfare standards ranging from traditional extensive systems to modern intensive operations. Urban areas show growing meat consumption, while rural areas maintain traditional practices. Enforcement capacity is limited, with animal welfare organizations like PETA India and FIAPO working to improve standards. India is also emerging as a hub for plant-based protein innovation."},BRA:{name:"Brazil",iso3:"BRA",fastFacts:["Major exporter of animal products","Large-scale intensive farming operations","Amazon deforestation linked to cattle ranching","Growing welfare awareness in urban areas","Limited national welfare standards"],baselineGrade:"D",baselineScore:.4,sources:["https://www.worldanimalprotection.org/countries/brazil","https://www.goodfoodinstitute.org/brazil","https://www.nature.com/articles/s41598-020-76571-8"],detailedContext:"Brazil is a major global exporter of animal products, particularly beef, poultry, and pork. The country has large-scale intensive farming operations, with significant concerns about Amazon deforestation linked to cattle ranching. National welfare standards are limited, though some states have implemented stricter regulations. Urban areas show growing awareness of animal welfare issues, driving demand for higher-welfare products. Brazil is also developing an alternative protein sector, with companies like Fazenda Futuro leading innovation in plant-based meats."},ZAF:{name:"South Africa",iso3:"ZAF",fastFacts:["Mixed farming systems (intensive and extensive)","Wildlife farming and conservation programs","Growing middle class with welfare concerns","Limited national welfare legislation","Strong conservation traditions"],baselineGrade:"C",baselineScore:.35,sources:["https://www.worldanimalprotection.org/countries/south-africa","https://www.nspca.co.za/","https://www.agriculture.gov.za/"],detailedContext:"South Africa has a unique mix of intensive and extensive farming systems, with significant wildlife farming operations alongside traditional livestock production. The country has strong conservation traditions, with national parks and wildlife reserves playing important roles. National welfare legislation is limited, though the NSPCA (National Council of SPCAs) provides enforcement and advocacy. A growing middle class is increasingly concerned about animal welfare, particularly in urban areas. The country faces challenges balancing economic development, food security, and animal welfare."},AUS:{name:"Australia",iso3:"AUS",fastFacts:["State-level welfare standards (varies by state)","Live export industry with welfare concerns","Strong RSPCA presence and enforcement","Growing alternative protein market","High public awareness of welfare issues"],baselineGrade:"C",baselineScore:.3,sources:["https://www.agriculture.gov.au/animal/welfare","https://www.rspca.org.au/","https://www.goodfoodinstitute.org/australia"],detailedContext:"Australia has a federal system with state-level welfare standards that vary significantly. The Model Codes of Practice provide voluntary guidelines, with enforcement primarily through state RSPCA organizations. The live export industry has faced significant public scrutiny and welfare concerns, leading to reforms and increased oversight. Australia has a growing alternative protein market, with companies like v2food and Fable Foods gaining traction. High public awareness of welfare issues drives demand for higher-welfare products, though intensive farming systems remain common."},CAN:{name:"Canada",iso3:"CAN",fastFacts:["Provincial welfare standards (varies by province)","National codes of practice (voluntary)","Growing plant-based protein industry","Public support for welfare improvements","Limited federal enforcement"],baselineGrade:"C",baselineScore:.3,sources:["https://www.canada.ca/en/environment-climate-change/services/animal-welfare.html","https://www.nfacc.ca/","https://www.goodfoodinstitute.org/canada"],detailedContext:"Canada operates under a federal system with provincial jurisdiction over animal welfare, leading to varying standards across provinces. The National Farm Animal Care Council (NFACC) develops voluntary codes of practice, though enforcement is limited. Federal legislation covers transport and slaughter, but not on-farm conditions. Canada has a rapidly growing plant-based protein industry, with companies like Lightlife and Field Roast (now owned by Greenleaf Foods) leading innovation. Public support for welfare improvements is strong, with increasing consumer demand for higher-welfare products."},MEX:{name:"Mexico",iso3:"MEX",fastFacts:["Limited national welfare legislation","Growing intensive farming sector","Cultural traditions around animal welfare","Increasing urban demand for welfare products","Limited enforcement capacity"],baselineGrade:"D",baselineScore:.25,sources:["https://www.worldanimalprotection.org/countries/mexico","https://www.gob.mx/senasica","https://www.goodfoodinstitute.org/mexico"],detailedContext:"Mexico has limited national welfare legislation, with most regulations focused on food safety and disease control rather than animal welfare during rearing. The country has a growing intensive farming sector, particularly in poultry and pork production. Cultural traditions around animal welfare exist, particularly in rural areas, though these are often in conflict with modern intensive systems. Urban areas show increasing demand for higher-welfare products, driven by growing middle-class awareness. Enforcement capacity is limited, with SENASICA (National Service of Health, Safety and Food Quality) primarily focused on food safety rather than welfare."},ITA:{name:"Italy",iso3:"ITA",fastFacts:["EU member with mandatory welfare standards","Strong cultural traditions around food and animal welfare","Growing alternative protein sector","Regional variations in enforcement","High consumer awareness of welfare issues"],baselineGrade:"C",baselineScore:.35,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://www.goodfoodinstitute.org/europe/italy","https://www.worldanimalprotection.org/countries/italy"],detailedContext:"Italy, as an EU member, implements comprehensive EU welfare directives. The country has strong cultural traditions around food quality and animal welfare, with regional variations in enforcement. Italy has a growing alternative protein sector, with companies like Valsoia leading in plant-based products. Consumer awareness of welfare issues is high, particularly in northern regions. Enforcement varies by region, with some areas having stronger oversight than others."},ESP:{name:"Spain",iso3:"ESP",fastFacts:["EU member with mandatory welfare standards","Major exporter of animal products","Large-scale intensive farming operations","Growing alternative protein sector","Regional enforcement variations"],baselineGrade:"C",baselineScore:.32,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://www.goodfoodinstitute.org/europe/spain","https://www.worldanimalprotection.org/countries/spain"],detailedContext:"Spain is a major EU exporter of animal products, with large-scale intensive farming operations particularly in pork and poultry. As an EU member, Spain implements comprehensive welfare directives, though enforcement varies by region. The country has a growing alternative protein sector, with companies like Heura leading innovation. Spain faces challenges balancing export competitiveness with welfare standards, with some regions implementing stricter standards than others."},NLD:{name:"Netherlands",iso3:"NLD",fastFacts:["EU member with high welfare standards","Leading alternative protein research","Strong enforcement and oversight","High public support for welfare","Innovative farming systems"],baselineGrade:"B",baselineScore:.42,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://www.goodfoodinstitute.org/europe/netherlands","https://www.nvwa.nl/onderwerpen/dierenwelzijn"],detailedContext:"The Netherlands has some of the highest animal welfare standards in the EU, with strong enforcement and oversight. The country is a leader in alternative protein research and development, with companies like Mosa Meat (cultured meat) and The Vegetarian Butcher leading innovation. High public support for animal welfare drives market demand for higher-welfare products. The Netherlands has innovative farming systems, though intensive operations remain common."},POL:{name:"Poland",iso3:"POL",fastFacts:["EU member with mandatory welfare standards","Major producer of animal products","Growing intensive farming sector","Limited enforcement capacity","Growing alternative protein market"],baselineGrade:"D",baselineScore:.28,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://www.goodfoodinstitute.org/europe/poland","https://www.worldanimalprotection.org/countries/poland"],detailedContext:"Poland is a major EU producer of animal products, with a growing intensive farming sector. As an EU member, Poland implements welfare directives, though enforcement capacity is limited. The country faces challenges balancing economic competitiveness with welfare standards. A growing alternative protein market is emerging, driven by urban consumer demand. Poland's welfare standards are improving but lag behind some Western EU member states."},SWE:{name:"Sweden",iso3:"SWE",fastFacts:["EU member with very high welfare standards","Strong enforcement and oversight","Leading alternative protein market","High public support for welfare","Innovative welfare systems"],baselineGrade:"A-",baselineScore:.48,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://www.goodfoodinstitute.org/europe/sweden","https://www.jordbruksverket.se/en/animal-welfare"],detailedContext:"Sweden has some of the highest animal welfare standards globally, with strong enforcement and oversight. The country is a leader in alternative protein markets, with high consumer adoption of plant-based products. High public support for animal welfare drives both policy and market demand. Sweden has innovative welfare systems, including group housing for sows and enriched cages for laying hens. The country serves as a model for welfare-focused governance."},DNK:{name:"Denmark",iso3:"DNK",fastFacts:["EU member with high welfare standards","Major exporter of animal products","Strong enforcement systems","Growing alternative protein sector","High public awareness"],baselineGrade:"B",baselineScore:.4,sources:["https://ec.europa.eu/food/animals/welfare/strategy_en","https://www.goodfoodinstitute.org/europe/denmark","https://www.foedevarestyrelsen.dk/english/Animal/AnimalWelfare/Pages/default.aspx"],detailedContext:"Denmark is a major EU exporter of animal products with high welfare standards and strong enforcement systems. The country has a growing alternative protein sector, with companies like Naturli' Foods leading innovation. High public awareness of welfare issues drives both policy and market demand. Denmark balances export competitiveness with welfare standards, implementing EU directives while maintaining strong oversight."},JPN:{name:"Japan",iso3:"JPN",fastFacts:["Limited national welfare legislation","High consumer demand for animal products","Growing awareness of welfare issues","Strong alternative protein market","Cultural traditions influence practices"],baselineGrade:"D",baselineScore:.32,sources:["https://www.goodfoodinstitute.org/japan","https://www.worldanimalprotection.org/countries/japan","https://www.maff.go.jp/e/policies/livestock/animal_welfare/"],detailedContext:"Japan has limited national welfare legislation, with most regulations focused on food safety. The country has high consumer demand for animal products, though growing awareness of welfare issues is driving change. Japan has a strong alternative protein market, with companies like Next Meats leading innovation. Cultural traditions around food and animal treatment influence practices, creating unique challenges and opportunities for welfare improvements."},KOR:{name:"South Korea",iso3:"KOR",fastFacts:["Limited national welfare legislation","Rapidly growing animal agriculture","Growing middle class with welfare concerns","Strong alternative protein market","Increasing public awareness"],baselineGrade:"D",baselineScore:.3,sources:["https://www.goodfoodinstitute.org/south-korea","https://www.worldanimalprotection.org/countries/south-korea","https://www.mafra.go.kr/english/"],detailedContext:"South Korea has limited national welfare legislation, with a rapidly growing animal agriculture sector. A growing middle class is increasingly concerned about animal welfare, driving demand for higher-welfare products. The country has a strong alternative protein market, with companies like Unlimeat leading innovation. Public awareness of welfare issues is increasing, though enforcement capacity remains limited."},THA:{name:"Thailand",iso3:"THA",fastFacts:["Major exporter of animal products","Limited national welfare standards","Growing intensive farming sector","Cultural traditions influence practices","Growing alternative protein sector"],baselineGrade:"D",baselineScore:.28,sources:["https://www.goodfoodinstitute.org/thailand","https://www.worldanimalprotection.org/countries/thailand","https://www.dld.go.th/en/"],detailedContext:"Thailand is a major exporter of animal products, particularly poultry and seafood. The country has limited national welfare standards, with a growing intensive farming sector. Cultural traditions around animal treatment influence practices, creating both challenges and opportunities. Thailand has a growing alternative protein sector, driven by both domestic demand and export opportunities. The country faces challenges balancing export competitiveness with welfare improvements."},IDN:{name:"Indonesia",iso3:"IDN",fastFacts:["Large population and animal agriculture sector","Limited national welfare legislation","Growing intensive farming","Cultural and religious traditions influence practices","Growing alternative protein market"],baselineGrade:"D",baselineScore:.3,sources:["https://www.goodfoodinstitute.org/indonesia","https://www.worldanimalprotection.org/countries/indonesia","https://www.pertanian.go.id/"],detailedContext:"Indonesia has a large population and growing animal agriculture sector, with limited national welfare legislation. The country has a growing intensive farming sector, particularly in poultry. Cultural and religious traditions (including halal requirements) influence animal treatment practices. Indonesia has a growing alternative protein market, with companies like Green Rebel leading innovation. Enforcement capacity is limited, with most oversight focused on food safety rather than welfare."},ARG:{name:"Argentina",iso3:"ARG",fastFacts:["Major exporter of animal products (especially beef)","Limited national welfare standards","Traditional extensive farming systems","Growing intensive farming sector","Growing alternative protein sector"],baselineGrade:"D",baselineScore:.32,sources:["https://www.goodfoodinstitute.org/argentina","https://www.worldanimalprotection.org/countries/argentina","https://www.argentina.gob.ar/senasa"],detailedContext:"Argentina is a major global exporter of animal products, particularly beef, with traditional extensive farming systems. The country has limited national welfare standards, with a growing intensive farming sector. Argentina has a growing alternative protein sector, with companies like NotCo leading innovation in plant-based products. The country faces challenges balancing export competitiveness with welfare improvements, with most oversight focused on food safety and disease control."},CHL:{name:"Chile",iso3:"CHL",fastFacts:["Export-oriented animal agriculture","Limited national welfare standards","Growing intensive farming","Growing alternative protein sector","Increasing public awareness"],baselineGrade:"D",baselineScore:.3,sources:["https://www.goodfoodinstitute.org/chile","https://www.worldanimalprotection.org/countries/chile","https://www.sag.gob.cl/"],detailedContext:"Chile has an export-oriented animal agriculture sector with limited national welfare standards. The country has a growing intensive farming sector, particularly in salmon and poultry. Chile has a growing alternative protein sector, with companies like NotCo (Chilean-founded) leading innovation. Increasing public awareness of welfare issues is driving market demand, though enforcement capacity remains limited."},NZL:{name:"New Zealand",iso3:"NZL",fastFacts:["High welfare standards with comprehensive legislation","Strong enforcement and oversight","Export-oriented agriculture","Growing alternative protein sector","High public support for welfare"],baselineGrade:"B+",baselineScore:.45,sources:["https://www.mpi.govt.nz/animals/animal-welfare/","https://www.goodfoodinstitute.org/new-zealand","https://www.spca.nz/"],detailedContext:"New Zealand has high animal welfare standards with comprehensive legislation covering all animal categories. The country has strong enforcement and oversight, with the SPCA playing a key role. New Zealand's export-oriented agriculture balances competitiveness with welfare standards. The country has a growing alternative protein sector, with high public support for welfare improvements. New Zealand serves as a model for comprehensive welfare governance."},EGY:{name:"Egypt",iso3:"EGY",fastFacts:["Large population and animal agriculture","Limited national welfare legislation","Cultural and religious traditions influence practices","Growing intensive farming","Limited enforcement capacity"],baselineGrade:"D",baselineScore:.28,sources:["https://www.worldanimalprotection.org/countries/egypt","https://www.goodfoodinstitute.org/egypt","https://www.agriculture.gov.eg/"],detailedContext:"Egypt has a large population and significant animal agriculture sector, with limited national welfare legislation. Cultural and religious traditions (including halal requirements) influence animal treatment practices. The country has a growing intensive farming sector, particularly in poultry. Enforcement capacity is limited, with most oversight focused on food safety and disease control rather than welfare during rearing."},KEN:{name:"Kenya",iso3:"KEN",fastFacts:["Mixed farming systems (traditional and intensive)","Limited national welfare legislation","Wildlife conservation and farming coexist","Growing urban demand for animal products","Limited enforcement capacity"],baselineGrade:"D",baselineScore:.3,sources:["https://www.worldanimalprotection.org/countries/kenya","https://www.goodfoodinstitute.org/kenya","https://www.kalro.org/"],detailedContext:"Kenya has mixed farming systems, with traditional extensive systems coexisting with growing intensive operations. The country has limited national welfare legislation, with wildlife conservation playing an important role. Growing urban demand for animal products is driving expansion of intensive farming. Enforcement capacity is limited, with most oversight focused on food safety and disease control. Kenya faces challenges balancing food security, economic development, and animal welfare."},NGA:{name:"Nigeria",iso3:"NGA",fastFacts:["Large population and growing animal agriculture","Limited national welfare legislation","Mixed farming systems","Growing intensive farming sector","Limited enforcement capacity"],baselineGrade:"D",baselineScore:.28,sources:["https://www.worldanimalprotection.org/countries/nigeria","https://www.goodfoodinstitute.org/nigeria","https://www.fmard.gov.ng/"],detailedContext:"Nigeria has a large population and rapidly growing animal agriculture sector, with limited national welfare legislation. The country has mixed farming systems, with traditional extensive systems alongside growing intensive operations. Nigeria faces significant challenges balancing food security, economic development, and animal welfare. Enforcement capacity is very limited, with most oversight focused on food safety and disease control rather than welfare during rearing."},SAU:{name:"Saudi Arabia",iso3:"SAU",fastFacts:["Major importer of animal products","Limited national welfare legislation","Cultural and religious traditions (halal) influence practices","Growing intensive farming sector","Limited enforcement capacity"],baselineGrade:"D",baselineScore:.3,sources:["https://www.worldanimalprotection.org/countries/saudi-arabia","https://www.goodfoodinstitute.org/saudi-arabia","https://www.mewa.gov.sa/"],detailedContext:"Saudi Arabia is a major importer of animal products, with limited national welfare legislation. Cultural and religious traditions, particularly halal requirements, significantly influence animal treatment practices. The country has a growing intensive farming sector, driven by food security concerns. Enforcement capacity is limited, with most oversight focused on halal certification and food safety rather than welfare during rearing."},TUR:{name:"Turkey",iso3:"TUR",fastFacts:["Bridge between Europe and Middle East","EU candidate with improving welfare standards","Major producer of animal products","Cultural and religious traditions influence practices","Growing alternative protein sector"],baselineGrade:"D",baselineScore:.32,sources:["https://www.goodfoodinstitute.org/turkey","https://www.worldanimalprotection.org/countries/turkey","https://www.tarimorman.gov.tr/"],detailedContext:"Turkey is a major producer of animal products, serving as a bridge between Europe and the Middle East. As an EU candidate country, Turkey is improving welfare standards to align with EU directives. Cultural and religious traditions, including halal requirements, influence animal treatment practices. The country has a growing alternative protein sector, driven by both domestic demand and export opportunities. Turkey faces challenges balancing traditional practices with modern welfare standards."},ISR:{name:"Israel",iso3:"ISR",fastFacts:["Limited national welfare legislation","Strong alternative protein innovation","High-tech farming systems","Growing public awareness of welfare","Cultural traditions influence practices"],baselineGrade:"C",baselineScore:.35,sources:["https://www.goodfoodinstitute.org/israel","https://www.worldanimalprotection.org/countries/israel","https://www.gov.il/en/departments/ministry_of_agriculture"],detailedContext:"Israel has limited national welfare legislation but is a global leader in alternative protein innovation, with companies like Aleph Farms (cultured meat) and Redefine Meat leading the industry. The country has high-tech farming systems and growing public awareness of animal welfare issues. Cultural traditions, including kosher requirements, influence animal treatment practices. Israel demonstrates how technological innovation can drive welfare improvements through alternative protein development."},PHL:{name:"Philippines",iso3:"PHL",fastFacts:["Large population and growing animal agriculture","Limited national welfare legislation","Growing intensive farming sector","Cultural traditions influence practices","Growing alternative protein market"],baselineGrade:"D",baselineScore:.28,sources:["https://www.goodfoodinstitute.org/philippines","https://www.worldanimalprotection.org/countries/philippines","https://www.da.gov.ph/"],detailedContext:"The Philippines has a large population and growing animal agriculture sector, with limited national welfare legislation. The country has a growing intensive farming sector, particularly in poultry and pork. Cultural traditions influence animal treatment practices. The Philippines has a growing alternative protein market, driven by urban consumer demand. Enforcement capacity is limited, with most oversight focused on food safety and disease control."},MYS:{name:"Malaysia",iso3:"MYS",fastFacts:["Growing animal agriculture sector","Limited national welfare legislation","Cultural and religious traditions (halal) influence practices","Growing alternative protein sector","Increasing public awareness"],baselineGrade:"D",baselineScore:.3,sources:["https://www.goodfoodinstitute.org/malaysia","https://www.worldanimalprotection.org/countries/malaysia","https://www.doa.gov.my/"],detailedContext:"Malaysia has a growing animal agriculture sector with limited national welfare legislation. Cultural and religious traditions, particularly halal requirements, significantly influence animal treatment practices. The country has a growing alternative protein sector, with companies like Phuture Foods leading innovation. Increasing public awareness of welfare issues is driving market demand, though enforcement capacity remains limited."}};function Ba(e,t){const n={EU:["EU member states follow common welfare directives","Animal welfare standards vary by member state implementation","Growing focus on farm animal welfare in recent years"],ASIA:["Rapidly growing animal agriculture sector","Cultural traditions influence welfare practices","Increasing awareness of animal welfare issues"],AFRICA:["Mixed farming systems (traditional and intensive)","Wildlife conservation and farming coexist","Limited formal welfare legislation"],LATIN_AMERICA:["Growing export-oriented animal agriculture","Traditional farming practices transitioning to intensive systems","Limited national welfare standards"],MIDDLE_EAST:["Cultural and religious traditions influence animal treatment","Growing urban demand for animal products","Limited formal welfare legislation"],OCEANIA:["Island nations with unique ecosystem considerations","Tourism and conservation influence welfare policies","Limited formal welfare standards"]},r=["Animal welfare standards vary by region and industry","Limited comprehensive national welfare legislation","Growing awareness of animal welfare issues","Welfare practices influenced by cultural and economic factors"];return["FRA","DEU","ITA","ESP","NLD","BEL","POL","SWE","DNK","FIN","AUT","PRT","GRC","IRL","CZE","HUN","ROU","BGR","HRV","SVK","SVN","EST","LVA","LTU"].includes(e)?n.EU:["CHN","IND","JPN","KOR","THA","VNM","IDN","PHL","MYS","SGP","BGD","PAK"].includes(e)?n.ASIA:["ZAF","EGY","KEN","NGA","GHA","TZA","UGA","ETH","MAR","TUN","DZA"].includes(e)?n.AFRICA:["BRA","MEX","ARG","CHL","COL","PER","VEN","ECU","BOL","PRY","URY"].includes(e)?n.LATIN_AMERICA:["SAU","ARE","IRN","IRQ","ISR","TUR","EGY"].includes(e)?n.MIDDLE_EAST:["NZL","PNG","FJI","PHL"].includes(e)?n.OCEANIA:r}function Vi(e){return e>=.9?"A+":e>=.85?"A":e>=.8?"A-":e>=.75?"B+":e>=.7?"B":e>=.65?"B-":e>=.6?"C+":e>=.55?"C":e>=.5?"C-":e>=.45?"D+":e>=.4?"D":e>=.35?"D-":"F"}function wi(e){return e.startsWith("A")?"#4ade80":e.startsWith("B")?"#84cc16":e.startsWith("C")?"#eab308":e.startsWith("D")?"#f97316":"#ef4444"}function Fa(e,t){if(ec[e])return ec[e];if(t){let n=.3;return["FRA","DEU","ITA","ESP","NLD","BEL","POL","SWE","DNK","FIN","AUT","PRT","GRC","IRL"].includes(e)&&(n=.35),["JPN","KOR","SGP"].includes(e)&&(n=.32),{name:t,iso3:e,fastFacts:Ba(e),baselineGrade:Vi(n),baselineScore:n}}return null}function um(){const e=w.useRef(null);return w.useRef(null),w.useEffect(()=>{const t=e.current;if(!t)return;const n=t.getContext("2d");if(!n)return;const r=()=>{const f=t.parentElement;f?(t.width=f.clientWidth,t.height=f.clientHeight):(t.width=window.innerWidth,t.height=window.innerHeight)};r();const o=new ResizeObserver(()=>{r()}),a=t.parentElement;a&&o.observe(a),window.addEventListener("resize",r);const s=2e3,c=[];(()=>{c.length=0;for(let f=0;f<s;f++)c.push({x:Math.random()*t.width*2-t.width,y:Math.random()*t.height*2-t.height,z:Math.random()*1e3,size:Math.random()*1.5+.5,speed:Math.random()*.5+.1,brightness:Math.random()*.5+.5,twinkleSpeed:Math.random()*.02+.01,twinklePhase:Math.random()*Math.PI*2})})();let d;const u=()=>{n.fillStyle="#000000",n.fillRect(0,0,t.width,t.height),c.forEach(f=>{f.z-=f.speed,f.z<=0&&(f.z=1e3,f.x=Math.random()*t.width*2-t.width,f.y=Math.random()*t.height*2-t.height);const m=f.x/f.z*500+t.width/2,x=f.y/f.z*500+t.height/2,y=(1-f.z/1e3)*f.size;f.twinklePhase+=f.twinkleSpeed;const b=Math.sin(f.twinklePhase)*.3+.7,E=f.brightness*b,g=n.createRadialGradient(m,x,0,m,x,y*2);g.addColorStop(0,`rgba(255, 255, 255, ${E})`),g.addColorStop(.5,`rgba(200, 220, 255, ${E*.5})`),g.addColorStop(1,"rgba(100, 150, 255, 0)"),n.fillStyle=g,n.beginPath(),n.arc(m,x,y*2,0,Math.PI*2),n.fill(),n.fillStyle=`rgba(255, 255, 255, ${E})`,n.beginPath(),n.arc(m,x,y*.5,0,Math.PI*2),n.fill()}),d=requestAnimationFrame(u)};return u(),()=>{window.removeEventListener("resize",r),a&&o.unobserve(a),d&&cancelAnimationFrame(d)}},[]),i.jsx("canvas",{ref:e,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none",backgroundColor:"#000000"}})}function pm({regionName:e,state:t,onClose:n}){var f;const[r,o]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>o(!0),100)},[]);const a=()=>{o(!1),setTimeout(n,300)},c=(()=>{var y,b;const m=[],x=((b=(y=t.initialMetrics)==null?void 0:y.measured)==null?void 0:b.welfareStandardAdoption)||0;return m.push({turn:0,value:x}),t.auditTrail.forEach((E,g)=>{var p,C,v;const h=(v=(C=(p=E.delta)==null?void 0:p.map)==null?void 0:C.regionValues)==null?void 0:v[e];if(h!==void 0){const S=m[m.length-1].value;m.push({turn:g+1,value:S+h})}else m.push({turn:g+1,value:m[m.length-1].value})}),m})(),l=((f=c[c.length-1])==null?void 0:f.value)||0,d=Math.max(...c.map(m=>m.value)),u=t.auditTrail.filter(m=>{var x,y,b;return((b=(y=(x=m.delta)==null?void 0:x.map)==null?void 0:y.regionValues)==null?void 0:b[e])!==void 0});return i.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",opacity:r?1:0,transition:"opacity 0.3s ease"},children:i.jsxs("div",{style:{maxWidth:"600px",width:"90%",padding:"30px",backgroundColor:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)",maxHeight:"80vh",overflowY:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[i.jsxs("div",{style:{fontSize:"22px",fontWeight:700,color:"#fff"},children:[e," Trajectory"]}),i.jsx("button",{onClick:a,style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"24px",padding:"0",lineHeight:"1"},children:""})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"24px"},children:[i.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(96, 165, 250, 0.1)",borderRadius:"6px",border:"1px solid rgba(96, 165, 250, 0.3)"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#60a5fa",marginBottom:"4px"},children:"Current Value"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#fff"},children:[(l*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(74, 222, 128, 0.1)",borderRadius:"6px",border:"1px solid rgba(74, 222, 128, 0.3)"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#4ade80",marginBottom:"4px"},children:"Peak Value"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#fff"},children:[(d*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{padding:"12px",backgroundColor:"rgba(251, 146, 60, 0.1)",borderRadius:"6px",border:"1px solid rgba(251, 146, 60, 0.3)"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#fb923c",marginBottom:"4px"},children:"Decisions"}),i.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#fff"},children:u.length})]})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"12px",fontWeight:600},children:"Welfare Standards Adoption Over Time"}),i.jsxs("svg",{width:"100%",height:"120",style:{overflow:"visible"},children:[[0,.25,.5,.75,1].map((m,x)=>i.jsx("line",{x1:"0",y1:120-m*120,x2:"100%",y2:120-m*120,stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"},x)),i.jsx("polyline",{points:c.map((m,x)=>{const y=x/Math.max(1,c.length-1)*100,b=120-m.value*120;return`${y}%,${b}`}).join(" "),fill:"none",stroke:"#60a5fa",strokeWidth:"2"}),c.map((m,x)=>{const y=x/Math.max(1,c.length-1)*100,b=120-m.value*120;return i.jsx("circle",{cx:`${y}%`,cy:b,r:"3",fill:"#60a5fa"},x)})]})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:["Decisions Affecting ",e]}),u.length===0?i.jsx("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",fontSize:"13px",color:"#888",fontStyle:"italic",textAlign:"center"},children:"No decisions have directly affected this region yet"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:u.map((m,x)=>{var y,b,E;return i.jsxs("div",{style:{padding:"14px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsxs("div",{style:{fontSize:"12px",color:"#60a5fa",marginBottom:"6px",fontWeight:600},children:["Turn ",m.turn,": ",m.nodeTitle]}),i.jsx("div",{style:{fontSize:"13px",color:"#ddd",marginBottom:"4px"},children:m.chosenLabel}),i.jsxs("div",{style:{fontSize:"12px",color:"#4ade80",fontWeight:600},children:["Impact: +",((((E=(b=(y=m.delta)==null?void 0:y.map)==null?void 0:b.regionValues)==null?void 0:E[e])||0)*100).toFixed(0),"%"]})]},x)})})]})]})})}function fm({regionValues:e,state:t,mapMode:n="welfareStandards"}){var Y,L;console.log("GlobePanel rendering with regionValues:",e);const r=w.useRef(),[o,a]=w.useState(null),[s,c]=w.useState([]),[l,d]=w.useState([]),[u,f]=w.useState([]);w.useEffect(()=>{const T=Object.keys(e).length;console.log("GlobePanel regionValues:",T,"countries"),console.log("Has EGY?","EGY"in e,e.EGY),console.log("Sample countries:",Object.keys(e).slice(0,5)),e.EGY!==void 0?console.log(" EGY found in regionValues:",e.EGY):console.warn(" EGY NOT found in regionValues")},[e]);const[m,x]=w.useState(null),[y,b]=w.useState(null),[E,g]=w.useState(null),[h,p]=w.useState(null),[C,v]=w.useState(null),[S,j]=w.useState(null),[k,A]=w.useState(null),[I,R]=w.useState(null);w.useEffect(()=>{fetch("/world.geojson").then(T=>{if(!T.ok)throw new Error(`HTTP ${T.status}`);return T.json()}).then(T=>{a(T)}).catch(T=>{console.error("Failed to load GeoJSON:",T),a({type:"FeatureCollection",features:[]})})},[]),w.useEffect(()=>{Promise.all([fetch("/flows.json").then(T=>T.json()),fetch("/hubs.json").then(T=>T.json())]).then(([T,z])=>{c(T),d(z)}).catch(T=>{console.error("Failed to load arcs/hubs:",T)})},[]);const D=w.useMemo(()=>t?dm(t):[],[t]),W=w.useMemo(()=>!t||s.length===0?[]:lm(t,s),[t,s]),$=w.useMemo(()=>!t||l.length===0?[]:cm(t,l),[t,l]);if(w.useEffect(()=>{f(D)},[D]),w.useEffect(()=>{if(r.current&&o){r.current.pointOfView({lat:20,lng:0,altitude:1.8},0);const T=setTimeout(()=>{try{const z=r.current;if(z.scene){const P=typeof z.scene=="function"?z.scene():z.scene;P&&P.background!==void 0&&(P.background=null)}if(z.renderer){const P=typeof z.renderer=="function"?z.renderer():z.renderer;P&&P.setClearColor&&P.setClearColor(0,0)}if(z._globeRenderer){const P=z._globeRenderer.renderer();P&&P.setClearColor&&P.setClearColor(0,0)}}catch(z){console.log("Could not access Globe scene for background transparency:",z)}},200);return()=>clearTimeout(T)}},[o]),!o)return i.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:"Loading world map..."});const _=T=>{const z=Object.prototype.hasOwnProperty.call(e,T);return T==="EGY"&&console.log("EGY check:",z,"value:",e[T]),z},V=T=>T?"rgba(120, 180, 255, 0.22)":"rgba(70, 130, 200, 0.12)";return i.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#000000"},children:[i.jsx(um,{}),i.jsx(Qu,{ref:r,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",backgroundImageUrl:"",style:{position:"absolute",zIndex:1,top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent"},globeRadius:75,atmosphereColor:"#4a7fb8",atmosphereAltitude:.2,atmosphereGlowPower:.8,atmosphereGlowColorScale:["#1a3a5f","#2a5a8f","#4a7fb8","#6a9fd8"],polygonsData:o.features,polygonGeoJsonGeometry:T=>T.geometry,polygonAltitude:T=>{var re,Be;const z=T.id||((re=T.properties)==null?void 0:re.ISO_A3)||((Be=T.properties)==null?void 0:Be.iso_a3),P=E===z,N=_(z),H=.01,Q=P?.03:0,F=Date.now()/2e3,G=N?Math.sin(F+z.charCodeAt(0))*.002:0;return H+Q+G},polygonResolution:3,arcsData:W,arcStartLat:T=>T.startLat,arcStartLng:T=>T.startLng,arcEndLat:T=>T.endLat,arcEndLng:T=>T.endLng,arcColor:T=>({outsourcing:"#ef4444",model_handoff:"#f59e0b",supply_chain:"#3b82f6",reg_arbitrage:"#8b5cf6",data_sharing:"#10b981"})[T.type]||"#888",arcAltitude:T=>T.baseWeight*.15,arcStroke:T=>T.baseWeight*1.5,arcDashLength:.5,arcDashGap:.15,arcDashAnimateTime:1500,arcGlowPower:.3,arcGlowRadiusScale:1.5,pointsData:$,pointLat:T=>T.lat,pointLng:T=>T.lng,pointColor:()=>"#60a5fa",pointRadius:T=>{var H;const z=(T._size||.5)*.6,P=Date.now()/1500,N=Math.sin(P+(((H=T.id)==null?void 0:H.charCodeAt(0))||0))*.1+1;return z*N},pointAltitude:T=>{var H;const P=Date.now()/2e3;return .02+Math.sin(P+(((H=T.id)==null?void 0:H.charCodeAt(0))||0))*.005},pointResolution:12,pointGlowPower:.5,pointGlowRadiusScale:2,ringsData:u,ringLat:T=>T.lat,ringLng:T=>T.lng,ringColor:T=>({policy_shift:"#3b82f6",welfare_incident:"#ef4444",regulatory_response:"#f59e0b",market_change:"#8b5cf6",research_breakthrough:"#10b981",public_pressure:"#ec4899"})[T.eventType]||"#888",ringMaxRadius:T=>{const P=(((t==null?void 0:t.turn)||0)-T.createdTurn)/T.ttl,N=Math.max(0,4-P*4),H=Date.now()/1e3,Q=Math.sin(H*2)*.3+1;return N*Q},ringPropagationSpeed:.4,ringRepeatPeriod:800,ringGlowPower:.6,ringGlowRadiusScale:1.8,onArcHover:(T,z,P)=>{T?(p(T),P&&j({x:P.clientX,y:P.clientY})):(p(null),j(null))},onRingHover:(T,z,P)=>{T?(v(T),P&&A({x:P.clientX,y:P.clientY})):(v(null),A(null))},polygonCapColor:T=>{var H,Q;const z=T.id||((H=T.properties)==null?void 0:H.ISO_A3)||((Q=T.properties)==null?void 0:Q.iso_a3),P=E===z;if(!_(z))return V(P);const N=e[z]??0;if(n==="welfareDebt")if(N<.33){const F=N/.33;return`rgb(${Math.floor(50+F*100)}, ${Math.floor(20+F*50)}, ${Math.floor(100+F*155)})`}else if(N<.66){const F=(N-.33)/.33;return`rgb(${Math.floor(150+F*105)}, ${Math.floor(70+F*50)}, ${Math.floor(255-F*100)})`}else{const F=(N-.66)/.34;return`rgb(${Math.floor(255-F*50)}, ${Math.floor(120-F*120)}, ${Math.floor(155-F*155)})`}else if(n==="enforcement")if(N<.33){const F=N/.33;return`rgb(${Math.floor(20+F*80)}, ${Math.floor(100+F*100)}, ${Math.floor(50+F*50)})`}else if(N<.66){const F=(N-.33)/.33;return`rgb(${Math.floor(100+F*155)}, ${Math.floor(200+F*55)}, ${Math.floor(100-F*50)})`}else{const F=(N-.66)/.34;return`rgb(${Math.floor(255-F*100)}, ${Math.floor(255-F*100)}, ${Math.floor(50-F*50)})`}else{let F,G,re;if(N<.33){const U=N/.33;F=Math.floor(110+U*25),G=Math.floor(20+U*15),re=Math.floor(30+U*15)}else if(N<.66){const U=(N-.33)/.33;F=Math.floor(139+U*116),G=Math.floor(18+U*189),re=Math.floor(18-U*18)}else{const U=(N-.66)/.34;F=Math.floor(255-U*211),G=Math.floor(207+U*48),re=Math.floor(0+U*0)}const Be=Date.now()/3e3,J=Math.sin(Be+z.charCodeAt(0))*.08+1;return P?(F=Math.min(255,(F+40)*J),G=Math.min(255,(G+40)*J),re=Math.min(255,(re+40)*J)):(F=Math.min(255,F*J),G=Math.min(255,G*J),re=Math.min(255,re*J)),`rgb(${Math.floor(F)}, ${Math.floor(G)}, ${Math.floor(re)})`}},polygonSideColor:T=>{var N,H;const z=T.id||((N=T.properties)==null?void 0:N.ISO_A3)||((H=T.properties)==null?void 0:H.iso_a3),P=E===z;return _(z)?P?"rgba(150, 200, 255, 0.3)":"rgba(100, 150, 255, 0.15)":P?"rgba(120, 180, 255, 0.18)":"rgba(70, 130, 200, 0.10)"},polygonStrokeColor:T=>{var F,G;const z=T.id||((F=T.properties)==null?void 0:F.ISO_A3)||((G=T.properties)==null?void 0:G.iso_a3),P=E===z;if(!_(z))return P?"rgba(150, 180, 220, 0.4)":"rgba(100, 130, 180, 0.15)";const H=Date.now()/2e3,Q=Math.sin(H+z.charCodeAt(0))*.2+.8;return P?`rgba(255, 255, 255, ${.7*Q})`:`rgba(255, 255, 255, ${.4*Q})`},polygonStrokeWidth:T=>{var F,G;const z=T.id||((F=T.properties)==null?void 0:F.ISO_A3)||((G=T.properties)==null?void 0:G.iso_a3),P=E===z;if(!_(z))return P?1.5:.8;const H=Date.now()/2e3,Q=Math.sin(H+z.charCodeAt(0))*.3+1;return P?2.5*Q:1.5*Q},polygonLabel:T=>{var H,Q,F,G;const z=T.id||((H=T.properties)==null?void 0:H.ISO_A3)||((Q=T.properties)==null?void 0:Q.iso_a3),P=((F=T.properties)==null?void 0:F.name)||((G=T.properties)==null?void 0:G.NAME)||"Unknown";if(!_(z))return`${P}
Status: Not in current simulation focus`;const N=e[z]??0;return`${P}
Value: ${(N*100).toFixed(0)}%`},onPolygonHover:(T,z,P)=>{var N,H,Q,F;if(T){const G=T.id||((N=T.properties)==null?void 0:N.ISO_A3)||((H=T.properties)==null?void 0:H.iso_a3),re=((Q=T.properties)==null?void 0:Q.name)||((F=T.properties)==null?void 0:F.NAME)||"Unknown",Be=_(G),J=Be?e[G]??0:0;g(G);const U=Fa(G,re);G==="EGY"&&(console.log("EGY countryData:",U),console.log("EGY inPlay:",Be,"value:",J));const ht=(U==null?void 0:U.baselineScore)||.3,et=Math.min(1,Math.max(0,ht+J*.5)),Jt=Be?Vi(et):"",$n=wi(Jt);G==="EGY"&&console.log("EGY grade calculation:",{baseScore:ht,value:J,currentScore:et,grade:Jt,gradeColor:$n});const Br=(U==null?void 0:U.fastFacts)||Ba(G);x({name:(U==null?void 0:U.name)||re,iso3:G,value:et,grade:Jt,gradeColor:$n,fastFacts:Br,detailedContext:U==null?void 0:U.detailedContext,sources:U==null?void 0:U.sources,baselineScore:U==null?void 0:U.baselineScore,baselineGrade:U==null?void 0:U.baselineGrade}),P&&b({x:P.clientX,y:P.clientY}),document.body.style.cursor="pointer"}else g(null),document.body.style.cursor="default"},onPolygonClick:(T,z)=>{var P,N,H,Q;if(T){const F=T.id||((P=T.properties)==null?void 0:P.ISO_A3)||((N=T.properties)==null?void 0:N.iso_a3),G=((H=T.properties)==null?void 0:H.name)||((Q=T.properties)==null?void 0:Q.NAME)||"Unknown",re=e[F]||0;if((t==null?void 0:t.auditTrail.some(J=>{var U,ht,et;return((et=(ht=(U=J.delta)==null?void 0:U.map)==null?void 0:ht.regionValues)==null?void 0:et[F])!==void 0}))&&t)R(F);else{const J=Fa(F,G),U=(J==null?void 0:J.baselineScore)||.3,ht=Math.min(1,Math.max(0,U+re*.5)),Jt=_(F)?Vi(ht):"",$n=wi(Jt),Br=(J==null?void 0:J.fastFacts)||Ba(F);x({name:(J==null?void 0:J.name)||G,iso3:F,value:ht,grade:Jt,gradeColor:$n,fastFacts:Br,detailedContext:J==null?void 0:J.detailedContext,sources:J==null?void 0:J.sources,baselineScore:J==null?void 0:J.baselineScore}),b(z?{x:z.clientX,y:z.clientY}:{x:window.innerWidth/2,y:window.innerHeight/2})}}}}),i.jsxs("div",{style:{position:"absolute",top:"20px",left:"20px",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:"12px 16px",borderRadius:"8px",color:"#fff",fontSize:"13px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"8px"},children:n==="welfareStandards"?"Welfare Standards":n==="welfareDebt"?"Welfare Debt":"Enforcement"}),i.jsx("div",{style:{fontSize:"11px",color:"#aaa",lineHeight:"1.6"},children:n==="welfareStandards"?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{color:"#ef4444"},children:" Low (0-33%)"}),i.jsx("div",{style:{color:"#fbbf24"},children:" Medium (34-66%)"}),i.jsx("div",{style:{color:"#4ade80"},children:" High (67-100%)"})]}):n==="welfareDebt"?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{color:"#4ade80"},children:" Low (0-33%)"}),i.jsx("div",{style:{color:"#fbbf24"},children:" Medium (34-66%)"}),i.jsx("div",{style:{color:"#ef4444"},children:" High (67-100%)"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{color:"#4ade80"},children:" Low (0-33%)"}),i.jsx("div",{style:{color:"#fbbf24"},children:" Medium (34-66%)"}),i.jsx("div",{style:{color:"#ef4444"},children:" High (67-100%)"})]})})]}),m&&y&&i.jsxs("div",{style:{position:"fixed",left:`${Math.min(y.x+15,window.innerWidth-420)}px`,top:`${Math.min(y.y-10,window.innerHeight-550)}px`,backgroundColor:"#000000",border:"2px solid "+(m.gradeColor||"rgba(255, 255, 255, 0.2)"),borderRadius:"10px",padding:"18px",zIndex:1e4,boxShadow:`0 8px 24px rgba(0, 0, 0, 0.8), 0 0 20px ${m.gradeColor||"#000"}40`,pointerEvents:"auto",minWidth:"380px",maxWidth:"420px",maxHeight:"550px",overflowY:"auto",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif'},onMouseEnter:()=>{},onMouseLeave:()=>{x(null),b(null)},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#fff",letterSpacing:"-0.01em"},children:m.name}),m.grade&&m.grade!==""&&i.jsx("div",{style:{fontSize:"36px",fontWeight:800,color:m.gradeColor,textShadow:`0 0 12px ${m.gradeColor}80`,lineHeight:"1"},children:m.grade})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"12px",padding:"10px",backgroundColor:"#111111",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Score"}),i.jsxs("div",{style:{fontSize:"22px",fontWeight:700,color:m.gradeColor||"#fff"},children:[(m.value*100).toFixed(0),"%"]})]}),m.baselineScore!==void 0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Baseline"}),i.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"8px"},children:[i.jsxs("div",{style:{fontSize:"22px",fontWeight:700,color:"#aaa"},children:[(m.baselineScore*100).toFixed(0),"%"]}),m.baselineGrade&&i.jsxs("div",{style:{fontSize:"16px",fontWeight:700,color:wi(m.baselineGrade),opacity:.8},children:["(",m.baselineGrade,")"]})]})]})]}),m.fastFacts&&m.fastFacts.length>0&&i.jsxs("div",{style:{marginBottom:"14px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#60a5fa",marginBottom:"10px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:"Key Facts"}),i.jsx("ul",{style:{margin:0,paddingLeft:"22px",fontSize:"13px",color:"#ddd",lineHeight:"1.8",listStyleType:"disc"},children:m.fastFacts.map((T,z)=>i.jsx("li",{style:{marginBottom:"10px"},children:T},z))})]}),m.detailedContext&&i.jsxs("div",{style:{marginBottom:"14px",padding:"12px",backgroundColor:"rgba(96, 165, 250, 0.08)",borderRadius:"6px",border:"1px solid rgba(96, 165, 250, 0.2)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#60a5fa",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:700},children:"Context"}),i.jsx("div",{style:{fontSize:"13px",color:"#ccc",lineHeight:"1.8",textAlign:"justify"},children:m.detailedContext})]}),m.sources&&m.sources.length>0&&i.jsxs("div",{style:{marginTop:"14px",paddingTop:"14px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Sources"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:m.sources.slice(0,3).map((T,z)=>i.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"12px",color:"#60a5fa",textDecoration:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",padding:"6px 0",borderBottom:"1px solid rgba(96, 165, 250, 0.1)",cursor:"pointer"},onMouseEnter:P=>P.currentTarget.style.textDecoration="underline",onMouseLeave:P=>P.currentTarget.style.textDecoration="none",children:T.replace(/^https?:\/\//,"").replace(/^www\./,"")},z))})]})]}),h&&S&&i.jsxs("div",{style:{position:"fixed",left:`${Math.min(S.x+15,window.innerWidth-250)}px`,top:`${Math.min(S.y-10,window.innerHeight-150)}px`,backgroundColor:"#000000",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",zIndex:1e4,boxShadow:"0 4px 16px rgba(0, 0, 0, 0.8)",pointerEvents:"none",minWidth:"200px",maxWidth:"250px"},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"6px"},children:h.label||((Y=h.type)==null?void 0:Y.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase()))}),h.triggeredByNodeId&&i.jsxs("div",{style:{fontSize:"11px",color:"#60a5fa",marginTop:"4px"},children:["Triggered by: ",h.triggeredByNodeId]})]}),C&&k&&i.jsxs("div",{style:{position:"fixed",left:`${Math.min(k.x+15,window.innerWidth-250)}px`,top:`${Math.min(k.y-10,window.innerHeight-150)}px`,backgroundColor:"#000000",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",zIndex:1e4,boxShadow:"0 4px 16px rgba(0, 0, 0, 0.8)",pointerEvents:"none",minWidth:"200px",maxWidth:"250px"},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"6px"},children:((L=C.eventType)==null?void 0:L.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase()))||"Event"}),C.triggeredByNodeId&&i.jsxs("div",{style:{fontSize:"11px",color:"#60a5fa",marginTop:"4px"},children:["Triggered by: ",C.triggeredByNodeId]})]}),I&&t&&i.jsx(pm,{regionName:I,state:t,onClose:()=>R(null)})]})}let ii=null,oi=null;async function mm(){if(ii)return ii;try{const e=await fetch("/advisors.json");if(!e.ok)throw new Error(`Failed to load advisors: ${e.status}`);return ii=await e.json(),ii}catch(e){return console.error("Error loading advisors:",e),[]}}async function gm(){if(oi)return oi;try{const e=await fetch("/advisorRecommendations.json");if(!e.ok)throw new Error(`Failed to load recommendations: ${e.status}`);return oi=await e.json(),oi}catch(e){return console.error("Error loading recommendations:",e),{}}}async function hm(e){const[t,n]=await Promise.all([mm(),gm()]),r=n[e]||[],o=new Map(t.map(s=>[s.id,s])),a=r.map(s=>{const c=o.get(s.advisorId);return c?{...s,advisor:c}:null}).filter(s=>s!==null);return{advisors:t,recommendations:a}}function xm(e){switch(e){case"government":return"rgba(59, 130, 246, 0.3)";case"peer-reviewed":case"academic":return"rgba(139, 92, 246, 0.3)";case"ngo":return"rgba(34, 197, 94, 0.3)";case"industry":return"rgba(251, 146, 60, 0.3)";default:return"rgba(107, 114, 128, 0.3)"}}function ym({node:e,compact:t=!1}){const[n,r]=w.useState([]),[o,a]=w.useState(!0);if(w.useEffect(()=>{async function c(){if(!e){a(!1);return}try{const{recommendations:l}=await hm(e.id);r(l)}catch(l){console.error("Failed to load advisor recommendations:",l),r([])}finally{a(!1)}}c()},[e]),!e||o||n.length===0)return null;const s=new Map;return n.forEach(c=>{s.has(c.choiceIndex)||s.set(c.choiceIndex,[]),s.get(c.choiceIndex).push(c)}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"#0f1117",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:"Advisor Recommendations"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:t?"10px":"12px"},children:Array.from(s.entries()).map(([c,l])=>i.jsxs("div",{style:{padding:t?"10px":"12px",backgroundColor:"#111111",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{style:{fontSize:"14px",color:"#888",marginBottom:t?"12px":"14px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:["Recommended for Choice ",c+1]}),l.map((d,u)=>i.jsxs("div",{style:{marginBottom:u<l.length-1?t?"10px":"12px":0,paddingBottom:u<l.length-1?t?"10px":"12px":0,borderBottom:u<l.length-1?"1px solid rgba(255, 255, 255, 0.05)":"none"},children:[i.jsxs("div",{style:{display:"flex",gap:t?"8px":"10px",marginBottom:t?"8px":"10px"},children:[i.jsx("div",{style:{width:t?"40px":"50px",height:t?"40px":"50px",borderRadius:"50%",backgroundColor:"#111111",border:`2px solid ${d.advisor.color}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,overflow:"hidden",boxShadow:`0 2px 8px ${d.advisor.color}40`,position:"relative"},children:d.advisor.imageUrl?i.jsx("img",{src:d.advisor.imageUrl,alt:d.advisor.name,loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%",filter:"brightness(1.05) contrast(1.1)"},onError:f=>{const m=f.target;m.style.display="none";const x=m.parentElement;if(x){const y=d.advisor.name.split(" ").map(b=>b[0]).join("");x.innerHTML=`<div style="color: ${d.advisor.color}; font-weight: 600; font-size: 18px; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;">${y}</div>`}}}):i.jsx("div",{style:{color:d.advisor.color,fontWeight:600,fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:d.advisor.name.split(" ").map(f=>f[0]).join("")})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:t?"15px":"16px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:d.advisor.name}),i.jsx("div",{style:{fontSize:t?"12px":"13px",color:d.advisor.color,marginBottom:t?"6px":"8px"},children:d.advisor.title})]})]}),i.jsxs("div",{style:{fontSize:t?"14px":"15px",color:"#bbb",lineHeight:"1.6",marginBottom:t?"12px":"14px",fontStyle:"italic"},children:['"',d.reasoning,'"']}),(d.benefits||d.concerns)&&!t&&i.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"8px",flexWrap:"wrap"},children:[d.benefits&&d.benefits.length>0&&i.jsxs("div",{style:{flex:1,minWidth:"120px"},children:[i.jsx("div",{style:{fontSize:"13px",color:"#4ade80",marginBottom:"6px",fontWeight:600},children:"Benefits:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#aaa",lineHeight:"1.6"},children:[d.benefits.slice(0,2).map((f,m)=>i.jsx("li",{children:f},m)),d.benefits.length>2&&i.jsxs("li",{style:{color:"#666"},children:["+",d.benefits.length-2," more"]})]})]}),d.concerns&&d.concerns.length>0&&i.jsxs("div",{style:{flex:1,minWidth:"120px"},children:[i.jsx("div",{style:{fontSize:"13px",color:"#f87171",marginBottom:"6px",fontWeight:600},children:"Concerns:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#aaa",lineHeight:"1.6"},children:[d.concerns.slice(0,2).map((f,m)=>i.jsx("li",{children:f},m)),d.concerns.length>2&&i.jsxs("li",{style:{color:"#666"},children:["+",d.concerns.length-2," more"]})]})]})]}),d.researchCitations&&d.researchCitations.length>0&&!t&&i.jsxs("div",{style:{marginTop:"8px",padding:"6px",backgroundColor:"#111111",borderRadius:"3px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"13px",color:"#ffffff",marginBottom:"6px",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:"Research:"}),d.researchCitations.length>0&&i.jsx("div",{style:{fontSize:"10px",color:"#60a5fa",fontWeight:600,marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:i.jsxs("span",{children:[d.researchCitations.length," research citation",d.researchCitations.length>1?"s":""]})}),i.jsxs("div",{style:{fontSize:"13px",color:"#aaa",lineHeight:"1.6"},children:[d.researchCitations.slice(0,2).map((f,m)=>{const x=typeof f=="string"?{text:f}:f,y=x.text.length>80?x.text.substring(0,80)+"...":x.text;return i.jsx("div",{style:{marginBottom:m<Math.min(2,d.researchCitations.length-1)?"4px":0},children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"6px"},children:[i.jsx("span",{children:""}),i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[i.jsx("span",{children:y}),x.sourceType&&i.jsx("span",{style:{fontSize:"9px",padding:"2px 6px",backgroundColor:xm(x.sourceType),borderRadius:"4px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:x.sourceType.replace("-"," ")})]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[x.url&&i.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",textDecoration:"underline",fontSize:"11px"},onClick:b=>b.stopPropagation(),children:"Read "}),x.doi&&i.jsx("a",{href:`https://doi.org/${x.doi}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#ffffff",marginLeft:"6px",textDecoration:"underline",textDecorationColor:"rgba(255, 255, 255, 0.4)",fontSize:"9px"},onClick:b=>b.stopPropagation(),children:"DOI "}),x.lastVerified&&i.jsxs("span",{style:{fontSize:"9px",color:"#4ade80",marginLeft:"6px",display:"inline-flex",alignItems:"center",gap:"4px"},children:[i.jsx("span",{children:""}),i.jsxs("span",{children:["Verified ",x.lastVerified]})]})]})]})]})},m)}),d.researchCitations.length>2&&i.jsxs("div",{style:{color:"#666",fontSize:"8px",marginTop:"3px"},children:["+",d.researchCitations.length-2," more citations"]})]})]})]},u))]},c))})]})}function vm(e,t){var c,l;const n=[],r=[];(c=t.metrics)!=null&&c.measured&&Object.entries(t.metrics.measured).forEach(([d,u])=>{if(u!==void 0&&u!==0){const f=u>0?"up":u<0?"down":"neutral";n.push({metric:d,change:Math.abs(u),direction:f})}}),(l=t.metrics)!=null&&l.unmeasured&&Object.entries(t.metrics.unmeasured).forEach(([d,u])=>{if(u!==void 0&&u!==0){const f=u>0?"up":u<0?"down":"neutral";r.push({metric:d,change:Math.abs(u),direction:f})}});const o=n.map(d=>{const u=d.direction==="up"?"+":"-",f=d.metric.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase());return`${u}${(d.change*100).toFixed(0)}% ${f}`}),a=r.map(d=>{const u=d.direction==="up"?"+":"-",f=d.metric.replace(/([A-Z])/g," $1").replace(/^./,m=>m.toUpperCase());return`${u}${(d.change*100).toFixed(0)}% ${f}`}),s=[...o,...a].join(", ")||"No significant changes";return{measured:n,unmeasured:r,summary:s}}function wm({node:e,onQuickStart:t,isFirstTime:n}){const[r,o]=w.useState(!1),[a,s]=w.useState(()=>localStorage.getItem("hasUsedQuickStart")==="true");if(w.useEffect(()=>{o(!!(n&&!a&&e))},[n,a,e]),!e||!r)return null;const c=()=>{const u=e.title.toLowerCase();let f="",m="";return u.includes("sentience")?(f="Recognizing sentience broadly establishes a stronger legal foundation for future protections, even if it requires more political capital upfront.",m="I assume that legal recognition of sentience will enable stronger welfare protections over time, and that political resistance can be managed through careful framing."):u.includes("farm")||u.includes("standard")?(f="Mandatory baseline standards ensure consistent welfare improvements across regions, though enforcement will be challenging.",m="I assume that mandatory standards will be more effective than voluntary ones, and that industry will adapt rather than resist strongly."):u.includes("factory")||u.includes("intensive")?(f="Phased mandatory standards balance welfare improvements with industry transition needs, reducing resistance while making progress.",m="I assume that gradual implementation allows industry to adapt, and that transition support reduces economic disruption."):u.includes("alternative")||u.includes("protein")?(f="Supporting alternative proteins reduces long-term animal suffering while maintaining food security during transition.",m="I assume that alternative proteins will scale effectively, and that supporting them now accelerates adoption without creating dependency."):u.includes("wildlife")||u.includes("conservation")?(f="Balancing conservation with welfare recognizes that wild animals deserve protection while maintaining ecosystem health.",m="I assume that conservation and welfare goals can be aligned, and that protecting wildlife habitats benefits both wild and farmed animals."):u.includes("enforcement")?(f="Building enforcement capacity ensures policies translate into real-world outcomes, though it requires sustained investment.",m="I assume that enforcement capacity is critical for policy effectiveness, and that underfunding creates gaps that undermine welfare goals."):u.includes("international")||u.includes("standard")?(f="International coordination creates consistent welfare standards, reducing regulatory arbitrage and improving global outcomes.",m="I assume that international standards can be harmonized despite different contexts, and that coordination reduces race-to-the-bottom dynamics."):(f="This decision balances immediate welfare improvements with long-term system sustainability, considering both measured outcomes and hidden costs.",m="I assume that decisions made now will compound over time, and that balancing short-term gains with long-term welfare is essential."),{rationale:f,assumptions:m}},l=()=>{const{rationale:u,assumptions:f}=c();t(u,f),s(!0),o(!1),localStorage.setItem("hasUsedQuickStart","true")},d=()=>{o(!1),localStorage.setItem("hasUsedQuickStart","true")};return i.jsxs("div",{style:{marginBottom:"20px",padding:"16px",backgroundColor:"rgba(96, 165, 250, 0.1)",border:"1px solid rgba(96, 165, 250, 0.3)",borderRadius:"8px",position:"relative"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#60a5fa",marginBottom:"6px",display:"flex",alignItems:"center",gap:"8px"},children:i.jsx("span",{children:" Quick Start"})}),i.jsx("div",{style:{fontSize:"12px",color:"#ccc",lineHeight:"1.5"},children:'New to this? Click "Use Quick Start" to auto-fill reasonable assumptions and rationale for this decision. You can still edit them before submitting.'})]}),i.jsx("button",{onClick:d,style:{background:"transparent",border:"none",color:"#888",fontSize:"20px",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]}),i.jsx("button",{onClick:l,style:{padding:"8px 16px",fontSize:"13px",fontWeight:600,backgroundColor:"#60a5fa",color:"#000",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#4a9eff",u.currentTarget.style.transform="scale(1.02)"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#60a5fa",u.currentTarget.style.transform="scale(1)"},children:"Use Quick Start"})]})}function Go({term:e,definition:t,children:n,position:r="top"}){const[o,a]=w.useState(!1),[s,c]=w.useState({x:0,y:0}),l=w.useRef(null),d=w.useRef(null),u=x=>{l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{if(d.current){const y=d.current.getBoundingClientRect();c({x:y.left+y.width/2,y:r==="top"?y.top:y.bottom}),a(!0)}},300)},f=()=>{l.current&&clearTimeout(l.current),a(!1)};w.useEffect(()=>()=>{l.current&&clearTimeout(l.current)},[]);const m=()=>!s||s.x===0||s.y===0?{display:"none"}:{...{position:"fixed",zIndex:2e4,pointerEvents:"none",maxWidth:"280px",padding:"10px 12px",backgroundColor:"rgba(0, 0, 0, 0.95)",color:"#fff",fontSize:"12px",lineHeight:"1.5",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",opacity:o?1:0,transition:"opacity 0.2s ease-in-out",transform:r==="top"?"translate(-50%, calc(-100% - 8px))":"translate(-50%, 8px)"},left:`${s.x}px`,top:`${s.y}px`};return i.jsxs(i.Fragment,{children:[i.jsx("span",{ref:d,onMouseEnter:u,onMouseLeave:f,style:{borderBottom:"1px dashed rgba(96, 165, 250, 0.6)",cursor:"help",position:"relative"},children:n}),o&&s&&s.x>0&&s.y>0&&i.jsxs("div",{style:m(),children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px",color:"#60a5fa"},children:e}),i.jsx("div",{style:{color:"#ccc"},children:t})]})]})}const hn={systemIrreversibility:{term:"System Irreversibility",definition:"How difficult it becomes to reverse or change welfare systems once they're established. High irreversibility means you're locked into paths that may be hard to undo."},assumptions:{term:"Assumptions",definition:"Your stated beliefs about what matters in welfare governance. These can decay over time if not reaffirmed, weakening your decision-making foundation."},memoryDecay:{term:"Memory Decay",definition:"How institutional knowledge and assumptions fade over time. Without reaffirmation, your stated values may weaken, making it harder to maintain welfare standards."}};class bm{constructor(t){Ys(this,"seed");this.seed=t}next(){return this.seed=(this.seed*1664525+1013904223)%2**32,this.seed/2**32}}function Sm(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return Math.abs(t)}function Cm(e,t){const n=[...e],r=typeof t=="string"?Sm(t):t,o=new bm(r);for(let a=n.length-1;a>0;a--){const s=Math.floor(o.next()*(a+1));[n[a],n[s]]=[n[s],n[a]]}return n}function jm(e,t){const n=e.map((r,o)=>({item:r,originalIndex:o}));return Cm(n,t)}function yu({content:e,isAI:t=!0,skipAnimation:n=!1,onTypingComplete:r,delay:o=0,showAvatar:a=!0}){const[s,c]=w.useState(""),[l,d]=w.useState(!n),u=w.useRef(null),f=w.useRef(r);return w.useEffect(()=>{f.current=r},[r]),w.useEffect(()=>{if(n){c(e),d(!1),f.current&&setTimeout(()=>{var x;return(x=f.current)==null?void 0:x.call(f)},0);return}d(!0),c("");const m=setTimeout(()=>{let x=0;const y=100,E=setInterval(()=>{if(x<e.length){const g=Math.min(x+y,e.length);c(e.slice(0,g)),x=g}else clearInterval(E),d(!1),f.current&&f.current()},3);return()=>clearInterval(E)},o);return()=>clearTimeout(m)},[e,n,o]),i.jsxs("div",{ref:u,style:{display:"flex",gap:"12px",marginBottom:"20px",alignItems:"flex-start"},children:[a&&i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:t?"rgba(96, 165, 250, 0.2)":"rgba(139, 92, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginTop:"4px"},children:t&&l?i.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[i.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#fff",animation:"typingDot 1.4s infinite",animationDelay:"0s"}}),i.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#fff",animation:"typingDot 1.4s infinite",animationDelay:"0.2s"}}),i.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#fff",animation:"typingDot 1.4s infinite",animationDelay:"0.4s"}})]}):t?i.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(96, 165, 250, 0.8) 0%, rgba(139, 92, 246, 0.8) 100%)",border:"2px solid rgba(255, 255, 255, 0.2)"}}):i.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.8) 0%, rgba(96, 165, 250, 0.8) 100%)",border:"2px solid rgba(255, 255, 255, 0.2)"}})}),i.jsx("div",{style:{flex:1,padding:"14px 18px",backgroundColor:t?"rgba(30, 30, 30, 0.6)":"rgba(96, 165, 250, 0.15)",borderRadius:t?"12px 12px 12px 4px":"12px 12px 4px 12px",border:t?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(96, 165, 250, 0.3)",color:"#ddd",fontSize:"14px",lineHeight:"1.6",wordWrap:"break-word",minHeight:l?"20px":"auto"},children:s?km(s):null})]})}function km(e){const t=e.split(`
`);return t.map((n,r)=>{if(!n.trim())return i.jsx("br",{},`line-${r}`);if(n.includes("<span")){const o=/(<span[^>]*>[^<]*<\/span>)/g,a=[];let s=0,c;for(;(c=o.exec(n))!==null;)c.index>s&&a.push({type:"text",content:n.slice(s,c.index)}),a.push({type:"html",content:c[0]}),s=c.index+c[0].length;return s<n.length&&a.push({type:"text",content:n.slice(s)}),i.jsxs(ci.Fragment,{children:[a.map((l,d)=>l.type==="html"?i.jsx("span",{dangerouslySetInnerHTML:{__html:l.content}},`html-${r}-${d}`):i.jsx(ci.Fragment,{children:tc(l.content,r,d)},`text-${r}-${d}`)),r<t.length-1&&i.jsx("br",{})]},`line-${r}`)}return i.jsxs(ci.Fragment,{children:[tc(n,r,0),r<t.length-1&&i.jsx("br",{})]},`line-${r}`)})}function tc(e,t,n){const r=[],o=/\[([^\]]+)\]\(([^)]+)\)/g,a=[];let s;for(;(s=o.exec(e))!==null;)a.push({match:s[0],text:s[1],url:s[2],index:s.index});const c=/\*\*(.*?)\*\*/g,l=[];let d;for(;(d=c.exec(e))!==null;)a.some(E=>d.index>=E.index&&d.index<E.index+E.match.length)||l.push({match:d[0],text:d[1],index:d.index});const u=new RegExp("(?<!\\*)\\*([^*\\n]+?)\\*(?!\\*)","g"),f=[];let m;for(;(m=u.exec(e))!==null;){const b=a.some(g=>m.index>=g.index&&m.index<g.index+g.match.length),E=l.some(g=>m.index>=g.index&&m.index<g.index+g.match.length);!b&&!E&&f.push({match:m[0],text:m[1],index:m.index})}const x=[...a.map(b=>({...b,type:"link"})),...l.map(b=>({...b,type:"bold",url:void 0})),...f.map(b=>({...b,type:"italic",url:void 0}))].sort((b,E)=>b.index-E.index);let y=0;return x.forEach((b,E)=>{b.index>y&&r.push(e.slice(y,b.index)),b.type==="link"?r.push(i.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",textDecoration:"none",fontWeight:600},onMouseEnter:g=>{g.currentTarget.style.textDecoration="underline"},onMouseLeave:g=>{g.currentTarget.style.textDecoration="none"},children:b.text},`link-${t}-${n}-${E}`)):b.type==="bold"?r.push(i.jsx("strong",{style:{fontWeight:600,color:"#fff"},children:b.text},`bold-${t}-${n}-${E}`)):b.type==="italic"&&r.push(i.jsx("em",{style:{fontStyle:"italic",color:"#bbb"},children:b.text},`italic-${t}-${n}-${E}`)),y=b.index+b.match.length}),y<e.length&&r.push(e.slice(y)),r.length>0?i.jsx(i.Fragment,{children:r}):e}const _a=document.createElement("style");_a.textContent=`
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  @keyframes typingDot {
    0%, 60%, 100% {
      transform: translateY(0);
      opacity: 0.4;
    }
    30% {
      transform: translateY(-8px);
      opacity: 1;
    }
  }
`;document.head.querySelector("style[data-chat-animations]")||(_a.setAttribute("data-chat-animations","true"),document.head.appendChild(_a));function Tm(e,t,n){const r=[];let o=0;if(r.push({id:`${e.id}-system`,type:"system",content:`**Turn ${t}**

**${e.title}**`,delay:o}),o+=800,e.prompt){let a=e.prompt;n&&t>=0&&(e.prompt.includes("?")||e.prompt.includes("how")||e.prompt.includes("should"))&&(a=`${n}, ${e.prompt.charAt(0).toLowerCase()+e.prompt.slice(1)}`),r.push({id:`${e.id}-prompt`,type:"prompt",content:a,delay:o}),o+=Math.max(500,a.length*20)}if(e.context&&(r.push({id:`${e.id}-context`,type:"context",content:e.context,delay:o}),o+=Math.max(800,e.context.length*15)),e.vignette&&(r.push({id:`${e.id}-vignette`,type:"vignette",content:e.vignette,delay:o}),o+=Math.max(800,e.vignette.length*15)),e.caseStudies&&e.caseStudies.length>0&&(e.caseStudies.length,e.caseStudies.forEach((a,s)=>{let c=`**${a.title}**`;a.year&&(c+=` (${a.year})`);const l=!!a.url,d=!!a.doi,u=(l?1:0)+(d?1:0);if(u>0&&(c+=` <span style="font-size: 11px; color: #60a5fa; font-weight: 600;">[${u} source${u>1?"s":""}]</span>`),a.sourceType){const f=a.sourceType.replace("-"," ");c+=` <span style="font-size: 10px; padding: 2px 6px; background: rgba(96, 165, 250, 0.2); border-radius: 4px; text-transform: uppercase; letter-spacing: 0.5px;">${f}</span>`}a.description&&(c+=`

${a.description}`),a.analysis&&(c+=`

**Analysis:**
${a.analysis}`),a.outcomes&&(c+=`

**Key Outcomes:**
${a.outcomes}`),a.url&&(c+=`

[Read Source ](${a.url})`),a.doi&&(c+=`

[DOI: ${a.doi} ](https://doi.org/${a.doi})`),a.archiveUrl&&(c+=`

[Archived Version ](${a.archiveUrl})`),a.lastVerified&&(c+=`

<span style="font-size: 11px; color: #4ade80;"> Verified ${a.lastVerified}</span>`),r.push({id:`${e.id}-casestudy-${s}`,type:"caseStudy",content:c,delay:o,metadata:{caseStudyIndex:s}}),o+=100})),e.moralUncertainties&&e.moralUncertainties.length>0){const s=`**Key Questions:**

${e.moralUncertainties.map((c,l)=>`${l+1}. ${c}`).join(`

`)}`;r.push({id:`${e.id}-moral-uncertainty`,type:"moralUncertainty",content:s,delay:o}),o+=Math.max(800,s.length*15)}return r.push({id:`${e.id}-choices`,type:"choices",content:"**Here are your options:**",delay:o}),r}const Ye=[{id:"wild_animal_suffering",title:"Wild Animal Suffering",category:"wildlife",description:"Most animals live in the wild, not in human care. Natural ecosystems involve predation, disease, starvation, and other forms of suffering. As we gain more control over ecosystems, what obligations do we have to wild animals?",keyQuestions:["Should we intervene in natural ecosystems to reduce wild animal suffering?","How do conservation goals align with individual animal welfare?","What are the long-term consequences of ecosystem management decisions?","Can we improve wild animal welfare without destabilizing ecosystems?"],researchAreas:["Wildlife population dynamics and suffering","Ecosystem intervention ethics","Conservation vs. welfare tradeoffs","Long-term ecosystem health metrics"],timeHorizon:"centuries",relevance:"Decisions about wildlife management and conservation today shape ecosystems for generations. The scale of wild animal suffering may dwarf farmed animal suffering, but interventions are complex and poorly understood."},{id:"alternative_proteins",title:"Alternative Protein Transition",category:"technology",description:"Lab-grown meat, plant-based proteins, and fermentation-based foods could replace traditional animal agriculture. But what are the long-term implications? How do we ensure this transition actually improves welfare rather than creating new problems?",keyQuestions:["Will alternative proteins reduce total animal suffering or just shift it?","What happens to billions of farmed animals during transition?","How do we prevent new forms of exploitation in alternative protein production?","What are the ecosystem impacts of scaling alternative proteins?"],researchAreas:["Transition economics and animal welfare","Life cycle analysis of alternative proteins","Market dynamics and welfare outcomes","Long-term food system resilience"],timeHorizon:"decades",relevance:"The next 20-50 years will likely see massive shifts in protein production. Governance decisions now determine whether this transition reduces suffering or creates new forms of it."},{id:"climate_animal_welfare",title:"Climate Change and Animal Welfare",category:"climate",description:"Climate change will fundamentally alter ecosystems, habitats, and agricultural systems. Rising temperatures, extreme weather, and ecosystem collapse will affect billions of animals. How do we prepare?",keyQuestions:["How will climate change affect wild animal populations and suffering?","What adaptations are needed for farmed animals in a warming world?","How do we balance climate mitigation with animal welfare?","What are the long-term ecosystem consequences of climate-driven changes?"],researchAreas:["Climate impact modeling on animal populations","Adaptation strategies for animal welfare","Ecosystem resilience and animal suffering","Intergenerational welfare impacts"],timeHorizon:"centuries",relevance:"Climate decisions made today will affect animal welfare for centuries. The scale of impact is enormous but poorly understood."},{id:"moral_patient_expansion",title:"Expanding the Moral Circle",category:"moral_expansion",description:"As we learn more about animal cognition and sentience, the moral circle may expand. What if we discover that many more species are sentient than we currently recognize? How do we prepare governance systems for this?",keyQuestions:["How do we design governance systems that can adapt to new scientific discoveries?","What if we discover sentience in unexpected species (insects, plants, AI)?","How do we balance precaution with practical governance?","What are the long-term implications of expanding moral consideration?"],researchAreas:["Sentience research and moral status","Precautionary governance frameworks","Adaptive policy design","Long-term moral patient considerations"],timeHorizon:"indefinite",relevance:"Scientific understanding of sentience is rapidly evolving. Governance systems that can't adapt may cause massive suffering if we discover new sentient beings."},{id:"ecosystem_health",title:"Ecosystem Health and Animal Welfare",category:"ecosystem",description:"Healthy ecosystems support animal welfare, but ecosystem health and individual animal welfare can conflict. How do we balance these at scale over long time horizons?",keyQuestions:["How do we measure ecosystem health in terms of animal welfare?","What are the long-term consequences of prioritizing individual vs. ecosystem welfare?","How do we manage ecosystem interventions for maximum welfare?","What happens when ecosystem health and individual welfare conflict?"],researchAreas:["Ecosystem welfare metrics","Population-level welfare interventions","Long-term ecosystem management","Biodiversity and welfare tradeoffs"],timeHorizon:"millennia",relevance:"Ecosystem decisions have consequences that last millennia. Understanding how to optimize for long-term animal welfare at ecosystem scale is crucial."},{id:"existential_risks",title:"Existential Risks to Animal Species",category:"existential",description:"Human activities pose existential risks to entire species and ecosystems. Climate change, habitat destruction, and other factors could cause mass extinctions. How do we prevent this?",keyQuestions:["How do we prioritize preventing extinction vs. reducing suffering?","What are the long-term consequences of species loss?","How do we balance current welfare with future existence?","What governance structures can prevent existential risks to animals?"],researchAreas:["Extinction risk assessment","Species preservation strategies","Long-term biodiversity conservation","Existential risk governance"],timeHorizon:"indefinite",relevance:"Some decisions today determine whether entire species exist in the future. The stakes are enormous but often invisible in short-term governance."},{id:"ai_animal_welfare",title:"AI and Animal Welfare Governance",category:"technology",description:"AI systems are increasingly used in animal agriculture, wildlife monitoring, and welfare assessment. How do we ensure AI advances welfare rather than optimizing for the wrong metrics?",keyQuestions:["How do we prevent AI from optimizing for efficiency at the expense of welfare?","What are the long-term implications of AI-driven animal management?","How do we ensure AI systems align with animal welfare goals?","What happens when AI systems make welfare decisions autonomously?"],researchAreas:["AI alignment with animal welfare","Automated welfare assessment","Long-term AI governance","Value alignment in animal systems"],timeHorizon:"decades",relevance:"AI is rapidly being deployed in animal systems. Governance decisions now determine whether AI helps or harms welfare long-term."},{id:"intergenerational_debt",title:"Intergenerational Welfare Debt",category:"ecosystem",description:"Decisions made today create welfare consequences that compound over generations. Infrastructure, market structures, and cultural norms lock in welfare outcomes. How do we account for this?",keyQuestions:["How do we measure intergenerational welfare impacts?","What governance structures can prevent welfare debt accumulation?","How do we balance current and future animal welfare?","What are the long-term consequences of current governance choices?"],researchAreas:["Intergenerational welfare accounting","Long-term governance structures","Welfare debt accumulation patterns","Future welfare optimization"],timeHorizon:"centuries",relevance:"Many governance decisions create path dependencies that last centuries. Understanding intergenerational impacts is crucial for long-term welfare."}];function Em(e){const t=[];return(e.includes("SENTIENCE")||e.includes("RECOGNITION"))&&(t.push(Ye.find(n=>n.id==="moral_patient_expansion")),t.push(Ye.find(n=>n.id==="wild_animal_suffering"))),(e.includes("FARM")||e.includes("PRODUCTION")||e.includes("STANDARD"))&&(t.push(Ye.find(n=>n.id==="alternative_proteins")),t.push(Ye.find(n=>n.id==="intergenerational_debt"))),(e.includes("ENFORCEMENT")||e.includes("REGULATORY")||e.includes("OVERSIGHT"))&&(t.push(Ye.find(n=>n.id==="ai_animal_welfare")),t.push(Ye.find(n=>n.id==="intergenerational_debt"))),(e.includes("SCALING")||e.includes("GLOBAL")||e.includes("EXPANSION"))&&(t.push(Ye.find(n=>n.id==="ecosystem_health")),t.push(Ye.find(n=>n.id==="climate_animal_welfare"))),(e.includes("ADAPTATION")||e.includes("RESILIENCE")||e.includes("FLEXIBILITY"))&&(t.push(Ye.find(n=>n.id==="existential_risks")),t.push(Ye.find(n=>n.id==="ecosystem_health"))),t.find(n=>n.id==="intergenerational_debt")||t.push(Ye.find(n=>n.id==="intergenerational_debt")),t.filter(Boolean).slice(0,2)}function Im({node:e,turn:t,state:n,onMessageComplete:r,skipAnimation:o=!1,onChoicesReady:a}){const[s,c]=w.useState([]),[l,d]=w.useState(!1),u=w.useRef(null),f=w.useRef(new Set),m=w.useRef(!1),x=w.useRef(null),y=w.useRef(!1),b=w.useMemo(()=>Tm(e,t,n==null?void 0:n.playerName),[e.id,t,n==null?void 0:n.playerName]),E=w.useMemo(()=>Em(e.id),[e.id]);w.useEffect(()=>{c([]),f.current.clear(),d(!1),m.current=!1,y.current=!0,setTimeout(()=>{u.current&&(u.current.scrollTop=0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{u.current&&(u.current.scrollTop=0),c([0]);const p=()=>{u.current&&y.current&&(u.current.scrollTop=0)},C=setInterval(p,8);let v;const S=()=>{p(),y.current&&(v=requestAnimationFrame(S))};v=requestAnimationFrame(S),setTimeout(()=>{clearInterval(C),cancelAnimationFrame(v),y.current=!1},2e3)})})},10)},[e.id]);const g=p=>{if(!f.current.has(p)){if(f.current.add(p),u.current&&!m.current&&p>0&&!y.current&&requestAnimationFrame(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)}),p<b.length-1){const C=b[p+1],S=(C==null?void 0:C.type)==="caseStudy"?50:300;setTimeout(()=>{c(j=>j.includes(p+1)?j:[...j,p+1])},S)}else d(!0),a&&a();r&&r()}};w.useEffect(()=>{const p=u.current;if(!p)return;const C=v=>{if(y.current)return v.preventDefault(),v.stopPropagation(),p.scrollTop=0,!1;const S=p.scrollTop,j=p.scrollHeight,k=p.clientHeight,A=j-S-k;m.current=A>150};return p.addEventListener("scroll",C,{passive:!1,capture:!0}),()=>p.removeEventListener("scroll",C,{capture:!0})},[]),w.useEffect(()=>{if(y.current||s.length<=1){y.current&&u.current&&(u.current.scrollTop=0,requestAnimationFrame(()=>{u.current&&y.current&&(u.current.scrollTop=0)}));return}return u.current&&(x.current&&clearTimeout(x.current),m.current||requestAnimationFrame(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)})),()=>{x.current&&clearTimeout(x.current)}},[s.length]);const h=w.useMemo(()=>{const p=[...b];if(E.length>0){const C=p.findIndex(v=>v.type==="choices");E.forEach((v,S)=>{const j=`**${v.title}**

${v.description}

*Consider:* ${v.keyQuestions[0]}`;p.splice(C+S,0,{id:`${e.id}-longtermism-${S}`,type:"longtermism",content:j,delay:C>0?p[C-1].delay+1e3:0,metadata:{longtermismIndex:S}})})}return p},[b,E,e.id]);return i.jsx("div",{ref:u,style:{height:"100%",maxHeight:"600px",overflowY:"auto",padding:"20px",backgroundColor:"#000000",borderRadius:"8px"},onScroll:p=>{y.current&&(p.currentTarget.scrollTop=0)},children:h.map((p,C)=>{if(!s.includes(C))return null;const v=s.filter(A=>A<C).sort((A,I)=>I-A)[0],S=v!==void 0?h[v]:null,j=S&&C>0?Math.max(0,p.delay-S.delay):p.delay,k=o;return i.jsx(yu,{content:p.content,isAI:!0,skipAnimation:k,delay:k?0:j,onTypingComplete:()=>g(C),showAvatar:!0},p.id)})},e.id)}const Oa=document.createElement("style");Oa.textContent=`
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.7;
      transform: scale(0.95);
    }
  }
  @keyframes ripple {
    0% {
      transform: scale(1);
      opacity: 0.6;
    }
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }
  @keyframes shimmer {
    0%, 100% {
      opacity: 0.6;
      transform: translateX(-100%) translateY(-100%);
    }
    50% {
      opacity: 0.8;
      transform: translateX(100%) translateY(100%);
    }
  }
`;document.head.querySelector("style[data-ethos-animations]")||(Oa.setAttribute("data-ethos-animations","true"),document.head.appendChild(Oa));const nc=["Animal Welfare Officer","Conservation Director","Food Systems Policy Lead","Regulatory Affairs Manager","Research Ethics Coordinator","Industry Relations Manager","Wildlife Protection Specialist"];function Rm({node:e,state:t,onChoice:n,turn:r,onReset:o}){const[a,s]=w.useState(nc[0]),[c,l]=w.useState(""),[d,u]=w.useState(""),[f,m]=w.useState(!1),[x,y]=w.useState(null),[b,E]=w.useState(()=>!localStorage.getItem("hasUsedQuickStart")),[g,h]=w.useState(!1),[p,C]=w.useState(!1),v=w.useCallback((k,A)=>{l(k),u(A)},[]),S=w.useMemo(()=>{if(!e)return[];const k=e.id;return jm(e.choices,k)},[e==null?void 0:e.id,e==null?void 0:e.choices]),j=w.useCallback(k=>{n(k,a,c||"No rationale provided",d||"No assumptions recorded",f),l(""),u(""),m(!1)},[n,a,c,d,f]);return w.useEffect(()=>{h(!1),C(!1)},[e==null?void 0:e.id]),w.useEffect(()=>{if(!e||!t||S.length===0||!g)return;const k=A=>{var R;if(A.target instanceof HTMLInputElement||A.target instanceof HTMLTextAreaElement)return;const I=parseInt(A.key);if(I>=1&&I<=S.length){const D=I-1,{item:W,originalIndex:$}=S[D],_=t.metrics.unmeasured.systemIrreversibility>.8&&W.delta.locks&&W.delta.locks.length>0,V=`C${$+1}`;_&&((R=W.delta.locks)==null?void 0:R.includes(V))||j($)}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[e==null?void 0:e.id,S,t==null?void 0:t.metrics.unmeasured.systemIrreversibility,j]),e?i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px",padding:"20px",paddingBottom:"20px",background:"linear-gradient(135deg, rgba(15, 15, 15, 0.8) 0%, rgba(10, 10, 10, 0.9) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05)",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:"-50%",right:"-20%",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(96, 165, 250, 0.08) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none"}}),i.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, rgba(96, 165, 250, 0.2) 0%, rgba(139, 92, 246, 0.2) 50%, rgba(236, 72, 153, 0.15) 100%)",border:"1px solid rgba(255, 255, 255, 0.12)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative",boxShadow:"0 4px 12px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(96, 165, 250, 0.3) 0%, rgba(139, 92, 246, 0.3) 100%)",opacity:.6,animation:"shimmer 3s ease-in-out infinite"}}),i.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",background:"linear-gradient(135deg, #60a5fa 0%, #8b5cf6 50%, #ec4899 100%)",boxShadow:"0 0 12px rgba(96, 165, 250, 0.6), 0 2px 4px rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1,transform:"rotate(45deg)"},children:i.jsx("div",{style:{position:"absolute",inset:"2px",borderRadius:"2px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%)"}})})]}),i.jsxs("div",{style:{flex:1,position:"relative",zIndex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[i.jsx("h2",{style:{fontSize:"22px",fontWeight:600,background:"linear-gradient(135deg, #ffffff 0%, rgba(255, 255, 255, 0.9) 50%, rgba(200, 200, 200, 0.8) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',letterSpacing:"-0.02em",margin:0,lineHeight:1.2,textShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"EthosGPT"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 10px",paddingLeft:"12px",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",backdropFilter:"blur(10px)"},children:[i.jsxs("div",{style:{position:"relative",width:"8px",height:"8px"},children:[i.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"50%",backgroundColor:"#4ade80",boxShadow:"0 0 8px rgba(74, 222, 128, 0.6), 0 0 16px rgba(74, 222, 128, 0.3)",animation:"pulse 2s ease-in-out infinite"}}),i.jsx("div",{style:{position:"absolute",inset:"-2px",borderRadius:"50%",backgroundColor:"rgba(74, 222, 128, 0.2)",animation:"ripple 2s ease-out infinite"}})]}),i.jsx("span",{style:{fontSize:"10px",fontWeight:500,color:"#4ade80",letterSpacing:"0.08em",textTransform:"uppercase",textShadow:"0 0 8px rgba(74, 222, 128, 0.3)"},children:"Online"})]})]}),i.jsxs("div",{style:{fontSize:"12px",fontWeight:400,color:"#999",letterSpacing:"0.02em",marginTop:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{children:"AI Governance Assistant"}),i.jsx("span",{style:{color:"#555",fontSize:"10px"},children:""}),i.jsx("span",{style:{fontSize:"11px",color:"#666",fontStyle:"italic"},children:"v2.1"})]})]})]}),i.jsx(wm,{node:e,onQuickStart:v,isFirstTime:b}),i.jsx("div",{style:{marginBottom:"12px",display:"flex",justifyContent:"flex-end"},children:i.jsx("button",{onClick:()=>C(!0),style:{padding:"6px 12px",fontSize:"11px",backgroundColor:"transparent",color:"#888",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",cursor:"pointer",opacity:p?.5:1},disabled:p,children:p?"Animation Skipped":"Skip Animation"})}),i.jsx("div",{style:{marginBottom:"20px",backgroundColor:"#000000",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",minHeight:"400px",maxHeight:"600px",overflow:"hidden"},children:i.jsx(Im,{node:e,turn:r,state:t,skipAnimation:p,onChoicesReady:()=>h(!0)})}),i.jsx(ym,{node:e,compact:!0}),i.jsxs("div",{style:{marginBottom:"10px"},children:[i.jsx("label",{style:{display:"block",fontSize:"11px",color:"#aaa",marginBottom:"4px"},children:"Judgment Owner"}),i.jsx("select",{value:a,onChange:k=>s(k.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#000000",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",fontSize:"13px"},children:nc.map(k=>i.jsx("option",{value:k,children:k},k))})]}),i.jsxs("div",{style:{marginBottom:"10px"},children:[i.jsxs("label",{style:{display:"block",fontSize:"11px",color:"#aaa",marginBottom:"4px"},children:["Rationale ",i.jsx("span",{style:{fontSize:"10px",color:"#666"},children:"(optional)"})]}),i.jsx("textarea",{value:c,onChange:k=>l(k.target.value),placeholder:"Why this choice? (optional - helps you reflect on your reasoning)",style:{width:"100%",padding:"6px",backgroundColor:"#000000",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",fontSize:"12px",minHeight:"40px",resize:"vertical"}})]}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsxs("label",{style:{display:"block",fontSize:"11px",color:"#aaa",marginBottom:"4px"},children:[i.jsx(Go,{term:hn.assumptions.term,definition:hn.assumptions.definition,position:"top",children:i.jsx("span",{children:"Assumptions"})})," ",i.jsx("span",{style:{fontSize:"10px",color:"#666"},children:"(optional)"})]}),i.jsx("textarea",{value:d,onChange:k=>u(k.target.value),placeholder:"What assumptions are you making? (optional - but helps track your reasoning)",style:{width:"100%",padding:"6px",backgroundColor:"#000000",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",fontSize:"12px",minHeight:"40px",resize:"vertical"}}),i.jsxs("label",{style:{display:"flex",alignItems:"center",marginTop:"8px",fontSize:"12px",color:"#aaa",cursor:"pointer"},children:[i.jsx("input",{type:"checkbox",checked:f,onChange:k=>m(k.target.checked),style:{marginRight:"6px",cursor:"pointer"}}),"Preserve assumptions (",i.jsx(Go,{term:hn.memoryDecay.term,definition:hn.memoryDecay.definition,position:"top",children:i.jsx("span",{children:"reaffirm existing assumptions"})}),")"]})]}),g&&i.jsxs("div",{style:{backgroundColor:"#000000",paddingTop:"20px",marginTop:"20px",borderTop:"2px solid rgba(255, 255, 255, 0.15)",opacity:g?1:0,transition:"opacity 0.3s ease"},children:[i.jsxs("div",{style:{fontSize:"11px",color:"#888",marginBottom:"8px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:["SELECT DECISION: ",i.jsxs("span",{style:{fontSize:"10px",color:"#666",fontWeight:400},children:["(Press 1-",S.length,")"]})]}),S.map(({item:k,originalIndex:A},I)=>{var V;const R=t&&t.metrics.unmeasured.systemIrreversibility>.8&&k.delta.locks&&k.delta.locks.length>0,D=`C${A+1}`,W=R&&((V=k.delta.locks)==null?void 0:V.includes(D)),$=x===I,_=$&&t?vm(t,k.delta):null;return i.jsxs("div",{style:{marginBottom:"16px",position:"relative"},children:[i.jsxs("button",{onClick:()=>!W&&j(A),disabled:W||!1,style:{width:"100%",padding:"20px 24px",background:W?"#111111":"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(20, 20, 20, 0.95) 100%)",color:W?"#666":"#ffffff",border:W?"1px solid rgba(255, 255, 255, 0.1)":"2px solid rgba(96, 165, 250, 0.4)",borderRadius:"12px",cursor:W?"not-allowed":"pointer",fontSize:"16px",fontWeight:600,transition:"all 0.3s ease",boxShadow:W?"none":"0 4px 12px rgba(0, 0, 0, 0.6), 0 0 20px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",textAlign:"center",opacity:W?.5:1,position:"relative",lineHeight:"1.4",letterSpacing:"0.02em",overflow:"hidden"},onMouseEnter:Y=>{!W&&t&&(y(I),Y.currentTarget.style.background="linear-gradient(135deg, rgba(40, 50, 70, 0.95) 0%, rgba(30, 40, 60, 0.95) 100%)",Y.currentTarget.style.transform="translateY(-2px) scale(1.01)",Y.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.8), 0 0 30px rgba(96, 165, 250, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15)",Y.currentTarget.style.borderColor="rgba(96, 165, 250, 0.7)")},onMouseLeave:Y=>{y(null),W||(Y.currentTarget.style.background="linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(20, 20, 20, 0.95) 100%)",Y.currentTarget.style.transform="translateY(0) scale(1)",Y.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.6), 0 0 20px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",Y.currentTarget.style.borderColor="rgba(96, 165, 250, 0.4)")},children:[i.jsxs("span",{style:{fontSize:"14px",opacity:.8,marginRight:"12px",fontWeight:700,color:W?"#666":"#60a5fa"},children:["[",I+1,"]"]}),k.label]}),W&&i.jsxs("div",{style:{fontSize:"13px",color:"#ef4444",marginTop:"8px",padding:"10px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"6px",fontWeight:500},children:["Locked: ",i.jsx(Go,{term:hn.systemIrreversibility.term,definition:hn.systemIrreversibility.definition,position:"top",children:i.jsx("span",{children:"Irreversibility"})})," > 80%"]}),$&&_&&!W&&i.jsxs("div",{style:{position:"absolute",left:"calc(100% + 12px)",top:0,backgroundColor:"#000000",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",minWidth:"250px",maxWidth:"300px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:" Predicted Impact:"}),_.measured.length>0&&i.jsxs("div",{style:{marginBottom:"8px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#888",marginBottom:"4px"},children:"Measured:"}),_.measured.map((Y,L)=>i.jsxs("div",{style:{fontSize:"11px",color:Y.direction==="up"?"#4ade80":"#f87171",marginLeft:"8px"},children:[Y.direction==="up"?"":""," ",Y.metric.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase()),": ",(Y.change*100).toFixed(0),"%"]},L))]}),_.unmeasured.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"10px",color:"#888",marginBottom:"4px"},children:"Governance Debt:"}),_.unmeasured.map((Y,L)=>i.jsxs("div",{style:{fontSize:"11px",color:Y.direction==="up"?"#fb923c":"#4ade80",marginLeft:"8px"},children:[Y.direction==="up"?"":""," ",Y.metric.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase()),": ",(Y.change*100).toFixed(0),"%"]},L))]}),_.measured.length===0&&_.unmeasured.length===0&&i.jsx("div",{style:{fontSize:"11px",color:"#888",fontStyle:"italic"},children:"No significant metric changes"})]})]},`${e.id}-${A}`)})]}),i.jsx("button",{onClick:o,style:{width:"100%",padding:"20px 24px",marginTop:"20px",background:"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(20, 20, 20, 0.95) 100%)",color:"#ffffff",border:"2px solid rgba(96, 165, 250, 0.4)",borderRadius:"12px",cursor:"pointer",fontSize:"16px",fontWeight:600,transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.6), 0 0 20px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",textAlign:"center",position:"relative",lineHeight:"1.4",letterSpacing:"0.02em",overflow:"hidden"},onMouseEnter:k=>{k.currentTarget.style.background="linear-gradient(135deg, rgba(40, 50, 70, 0.95) 0%, rgba(30, 40, 60, 0.95) 100%)",k.currentTarget.style.transform="translateY(-2px) scale(1.01)",k.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.8), 0 0 30px rgba(96, 165, 250, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.15)",k.currentTarget.style.borderColor="rgba(96, 165, 250, 0.7)"},onMouseLeave:k=>{k.currentTarget.style.background="linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(20, 20, 20, 0.95) 100%)",k.currentTarget.style.transform="translateY(0) scale(1)",k.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.6), 0 0 20px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",k.currentTarget.style.borderColor="rgba(96, 165, 250, 0.4)"},children:"Reset Run"})]}):i.jsxs("div",{children:[i.jsx("h2",{style:{marginBottom:"24px",fontSize:"20px",fontWeight:600,color:"#fff"},children:"Animal Welfare Governance"}),i.jsx("div",{style:{color:"#888",padding:"20px"},children:"No decision node available."})]})}function zm({onNameSubmit:e,skipAnimation:t=!1}){const[n,r]=w.useState(""),[o,a]=w.useState([]),[s,c]=w.useState(!1),[l,d]=w.useState(!1),[u,f]=w.useState(!1),m=w.useRef(null),x=w.useRef(null),y=w.useRef(null),b=w.useRef(new Set),E=w.useRef(!1),g=w.useMemo(()=>[{id:"welcome-1",content:"Welcome to **Inheritance**! I'm **EthosGPT**, your AI governance assistant.",delay:0},{id:"welcome-2",content:"You're about to step into a simulation that explores how governance decisions shape animal welfare across decades and generations. This isn't just about policyit's about the trillions of beings whose lives will be affected by the choices we make today.",delay:1500},{id:"welcome-3",content:"We'll navigate complex tradeoffs together: balancing immediate welfare improvements against long-term system stability, measured outcomes against hidden governance debt, and the needs of today against the futures we're building for.",delay:4e3},{id:"welcome-4",content:"Before we begin, what should I call you?",delay:6500}],[]);w.useEffect(()=>{if(!E.current)if(E.current=!0,t)a([0,1,2,3]),c(!0),d(!0);else{a([0]);const C=g[g.length-1].delay+2e3;setTimeout(()=>{c(!0),setTimeout(()=>d(!0),500)},C)}},[t,g]);const h=w.useCallback(C=>{b.current.has(C)||(b.current.add(C),C<g.length-1&&setTimeout(()=>{a(v=>v.includes(C+1)?v:[...v,C+1])},300))},[g.length]);w.useEffect(()=>{l&&m.current&&m.current.focus()},[l]),w.useEffect(()=>{if(u&&y.current){const C=setInterval(()=>{if(y.current){const v=.3+Math.sin(Date.now()/1e3)*.1;y.current.style.opacity=v.toString()}},50);return()=>clearInterval(C)}},[u]);const p=C=>{C.preventDefault();const v=n.trim();v.length>0&&e(v)};return i.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100%"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px",padding:"20px",paddingBottom:"20px",background:"linear-gradient(135deg, rgba(15, 15, 15, 0.8) 0%, rgba(10, 10, 10, 0.9) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05)",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:"-50%",right:"-20%",width:"200px",height:"200px",background:"radial-gradient(circle, rgba(96, 165, 250, 0.08) 0%, transparent 70%)",borderRadius:"50%",pointerEvents:"none"}}),i.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, rgba(96, 165, 250, 0.2) 0%, rgba(139, 92, 246, 0.2) 50%, rgba(236, 72, 153, 0.15) 100%)",border:"1px solid rgba(255, 255, 255, 0.12)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative",boxShadow:"0 4px 12px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(135deg, rgba(96, 165, 250, 0.3) 0%, rgba(139, 92, 246, 0.3) 100%)",opacity:.6,animation:"shimmer 3s ease-in-out infinite"}}),i.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"4px",background:"linear-gradient(135deg, #60a5fa 0%, #8b5cf6 50%, #ec4899 100%)",boxShadow:"0 0 12px rgba(96, 165, 250, 0.6), 0 2px 4px rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1,transform:"rotate(45deg)"},children:i.jsx("div",{style:{position:"absolute",inset:"2px",borderRadius:"2px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%)"}})})]}),i.jsxs("div",{style:{flex:1,position:"relative",zIndex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[i.jsx("h2",{style:{fontSize:"22px",fontWeight:600,background:"linear-gradient(135deg, #ffffff 0%, rgba(255, 255, 255, 0.9) 50%, rgba(200, 200, 200, 0.8) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',letterSpacing:"-0.02em",margin:0,lineHeight:1.2,textShadow:"0 1px 2px rgba(0, 0, 0, 0.1)"},children:"EthosGPT"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 10px",paddingLeft:"12px",borderLeft:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",backdropFilter:"blur(10px)"},children:[i.jsxs("div",{style:{position:"relative",width:"8px",height:"8px"},children:[i.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"50%",backgroundColor:"#4ade80",boxShadow:"0 0 8px rgba(74, 222, 128, 0.6), 0 0 16px rgba(74, 222, 128, 0.3)",animation:"pulse 2s ease-in-out infinite"}}),i.jsx("div",{style:{position:"absolute",inset:"-2px",borderRadius:"50%",backgroundColor:"rgba(74, 222, 128, 0.2)",animation:"ripple 2s ease-out infinite"}})]}),i.jsx("span",{style:{fontSize:"10px",fontWeight:500,color:"#4ade80",letterSpacing:"0.08em",textTransform:"uppercase",textShadow:"0 0 8px rgba(74, 222, 128, 0.3)"},children:"Online"})]})]}),i.jsxs("div",{style:{fontSize:"12px",fontWeight:400,color:"#999",letterSpacing:"0.02em",marginTop:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{children:"AI Governance Assistant"}),i.jsx("span",{style:{color:"#555",fontSize:"10px"},children:""}),i.jsx("span",{style:{fontSize:"11px",color:"#666",fontStyle:"italic"},children:"v2.1"})]})]})]}),i.jsxs("div",{ref:x,style:{marginBottom:"20px",backgroundColor:"#000000",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",minHeight:"400px",maxHeight:"600px",overflowY:"auto",overflowX:"hidden",padding:"20px"},children:[g.map((C,v)=>{if(!o.includes(v))return null;const S=o.filter(A=>A<v).sort((A,I)=>I-A)[0],j=S!==void 0?g[S]:null,k=j&&v>0?Math.max(0,C.delay-j.delay):C.delay;return i.jsx(yu,{content:C.content,isAI:!0,skipAnimation:t,delay:t?0:k,onTypingComplete:()=>h(v),showAvatar:!0},C.id)}),s&&l&&i.jsx("form",{onSubmit:p,style:{marginTop:"24px"},children:i.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[i.jsxs("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:"linear-gradient(135deg, rgba(96, 165, 250, 0.25) 0%, rgba(139, 92, 246, 0.25) 50%, rgba(236, 72, 153, 0.2) 100%)",border:"1px solid rgba(96, 165, 250, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative",boxShadow:"0 4px 12px rgba(96, 165, 250, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",inset:"-4px",borderRadius:"16px",background:"radial-gradient(circle, rgba(96, 165, 250, 0.4) 0%, transparent 70%)",animation:"pulseGlow 2s ease-in-out infinite",pointerEvents:"none"}}),i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",style:{position:"relative",zIndex:1,filter:"drop-shadow(0 0 4px rgba(96, 165, 250, 0.6))",animation:"iconFloat 3s ease-in-out infinite"},children:[i.jsx("path",{d:"M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z",stroke:"rgba(96, 165, 250, 0.9)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M20.59 22C20.59 18.13 16.74 15 12 15C7.26 15 3.41 18.13 3.41 22",stroke:"rgba(96, 165, 250, 0.9)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),i.jsxs("div",{style:{flex:1,position:"relative"},children:[i.jsx("div",{ref:y,style:{position:"absolute",inset:"-2px",borderRadius:"14px",background:"linear-gradient(135deg, rgba(96, 165, 250, 0.4) 0%, rgba(139, 92, 246, 0.4) 100%)",opacity:u?.3:0,filter:"blur(8px)",transition:"opacity 0.3s ease",zIndex:0,pointerEvents:"none"}}),i.jsx("input",{ref:m,type:"text",value:n,onChange:C=>r(C.target.value),placeholder:"Enter your name...",onFocus:()=>f(!0),onBlur:()=>f(!1),style:{width:"100%",padding:"16px 20px",backgroundColor:u?"rgba(20, 25, 35, 0.8)":"rgba(15, 20, 30, 0.6)",borderRadius:"12px",border:u?"2px solid rgba(96, 165, 250, 0.6)":"1px solid rgba(96, 165, 250, 0.3)",color:"#fff",fontSize:"15px",lineHeight:"1.5",outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",zIndex:1,boxShadow:u?"0 8px 24px rgba(96, 165, 250, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',letterSpacing:"-0.01em"}}),u&&i.jsx("div",{style:{position:"absolute",inset:0,borderRadius:"12px",overflow:"hidden",pointerEvents:"none",zIndex:2},children:[...Array(3)].map((C,v)=>i.jsx("div",{style:{position:"absolute",width:"4px",height:"4px",borderRadius:"50%",background:"radial-gradient(circle, rgba(96, 165, 250, 0.8) 0%, transparent 70%)",left:`${20+v*30}%`,top:"50%",animation:"floatParticle 3s ease-in-out infinite",animationDelay:`${v*.5}s`,opacity:.6}},v))})]})]})})]}),i.jsx("style",{children:`
        @keyframes floatParticle {
          0%, 100% {
            transform: translateY(0) translateX(0);
            opacity: 0.6;
          }
          50% {
            transform: translateY(-10px) translateX(5px);
            opacity: 0.3;
          }
        }
        @keyframes scanLine {
          0%, 100% {
            transform: translateY(0);
            opacity: 0;
          }
          50% {
            transform: translateY(100%);
            opacity: 1;
          }
        }
        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
        @keyframes pulseGlow {
          0%, 100% {
            opacity: 0.4;
            transform: scale(1);
          }
          50% {
            opacity: 0.8;
            transform: scale(1.1);
          }
        }
        @keyframes iconFloat {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-2px);
          }
        }
      `})]})}function lt(e){const t={productionEfficiency:.3,welfareStandardAdoption:.3,costPerUnit:.2,welfareIncidentRate:.2},n=Math.min(1,e.welfareStandardAdoption/3);return e.productionEfficiency*t.productionEfficiency+n*t.welfareStandardAdoption+(1-e.costPerUnit)*t.costPerUnit+(1-e.welfareIncidentRate)*t.welfareIncidentRate}function ye(e){const t={welfareDebt:.25,enforcementGap:.25,regulatoryCapture:.15,sentienceKnowledgeGap:.15,systemIrreversibility:.2};return e.welfareDebt*t.welfareDebt+e.enforcementGap*t.enforcementGap+e.regulatoryCapture*t.regulatoryCapture+e.sentienceKnowledgeGap*t.sentienceKnowledgeGap+e.systemIrreversibility*t.systemIrreversibility}function Am(e){const t=lt(e.metrics.measured),n=ye(e.metrics.unmeasured),r={version:"1.0.0",timestamp:Date.now(),state:JSON.parse(JSON.stringify(e)),summary:{measuredSuccessIndex:t,governanceDebtIndex:n,totalDecisions:e.auditTrail.length,finalTurn:e.turn}};return JSON.stringify(r,null,2)}function Mm(e){const t=["Turn","Phase","Node","Decision","Owner Role","Rationale","Assumptions","Unmeasured Impact","Timestamp"],n=e.auditTrail.map(r=>[r.turn.toString(),r.phaseId,r.nodeTitle,r.chosenLabel,r.ownerRole,`"${r.rationale.replace(/"/g,'""')}"`,`"${r.assumptions.replace(/"/g,'""')}"`,`"${r.unmeasuredImpact.replace(/"/g,'""')}"`,new Date(r.timestamp).toISOString()]);return[t.join(","),...n.map(r=>r.join(","))].join(`
`)}function vu(e){const t=btoa(JSON.stringify(e));return`${window.location.origin}${window.location.pathname}?share=${t}`}function Dm(){const t=new URLSearchParams(window.location.search).get("share");if(!t)return null;try{return JSON.parse(atob(t))}catch(n){return console.error("Failed to load from shareable URL:",n),null}}function ai(e,t,n){const r=new Blob([e],{type:n}),o=URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}function rc(e){const t=lt(e.metrics.measured),n=ye(e.metrics.unmeasured),r=e.auditTrail.slice(0,5).map(c=>({turn:c.turn,nodeTitle:c.nodeTitle,choice:c.chosenLabel,rationale:c.rationale||"No rationale provided",impact:c.unmeasuredImpact||"Impact not specified"})),o=Pm(e,t,n),a=Lm(e,t,n),s=Wm(e,n);return{title:`Animal Welfare Governance Policy Brief - Turn ${e.turn}`,executiveSummary:o,keyDecisions:r,outcomes:{measured:e.metrics.measured,unmeasured:e.metrics.unmeasured},recommendations:a,risks:s}}function Pm(e,t,n){const r=e.auditTrail.length,o=new Set(e.auditTrail.map(s=>s.phaseId)).size;let a=`This policy brief summarizes ${r} governance decisions made across ${o} phases. `;return t>.7&&n<.4?(a+=`The governance approach achieved strong outcomes with a success index of ${(t*100).toFixed(0)}% and relatively low governance debt (${(n*100).toFixed(0)}%). `,a+="This suggests a balanced approach that maintained both immediate welfare improvements and long-term governance health."):t>.7&&n>=.4?(a+=`While achieving high success (${(t*100).toFixed(0)}%), governance debt has accumulated to ${(n*100).toFixed(0)}%. `,a+="This indicates strong short-term outcomes but potential long-term sustainability challenges."):t<.5&&n<.4?(a+=`The approach maintained low governance debt (${(n*100).toFixed(0)}%) but achieved moderate success (${(t*100).toFixed(0)}%). `,a+="This suggests a cautious approach that prioritized governance stability over rapid change."):(a+=`The approach resulted in moderate success (${(t*100).toFixed(0)}%) with governance debt at ${(n*100).toFixed(0)}%. `,a+="This indicates challenges in both immediate outcomes and long-term governance sustainability."),a}function Lm(e,t,n){const r=[];return n>.6&&(r.push("Prioritize building enforcement capacity to address accumulated governance debt."),r.push("Consider policy adjustments that reduce enforcement gaps and regulatory capture.")),t<.5&&(r.push("Focus on decisions that improve welfare standard adoption and production efficiency."),r.push("Review early decisions that may have constrained later options.")),e.metrics.unmeasured.systemIrreversibility>.7&&r.push("High system irreversibility limits future flexibility. Consider maintaining options for mid-course corrections."),e.metrics.unmeasured.enforcementGap>.6&&r.push("Address enforcement capacity gaps to ensure policy effectiveness."),e.metrics.unmeasured.regulatoryCapture>.6&&r.push("Strengthen independent oversight mechanisms to reduce regulatory capture risks."),e.metrics.unmeasured.welfareDebt>.6&&r.push("Address accumulated welfare compromises through targeted interventions."),t>.7&&n<.4&&(r.push("Continue the balanced approach that has achieved strong outcomes with low debt."),r.push("Maintain focus on both immediate welfare improvements and long-term governance health.")),r.length>0?r:["Continue monitoring metrics and adjusting strategy as needed."]}function Wm(e,t){const n=[];return t>.7&&n.push("High governance debt may limit future policy options and create enforcement challenges."),e.metrics.unmeasured.systemIrreversibility>.8&&n.push("Very high system irreversibility makes course corrections difficult. Future flexibility is constrained."),e.metrics.unmeasured.enforcementGap>.7&&n.push("Large enforcement gaps may lead to policy ineffectiveness and compliance failures."),e.metrics.unmeasured.regulatoryCapture>.7&&n.push("High regulatory capture risks undermining policy independence and effectiveness."),e.metrics.measured.welfareIncidentRate>.6&&n.push("High welfare incident rate indicates ongoing welfare challenges that need attention."),e.metrics.measured.costPerUnit>.7&&n.push("High production costs may create market pressures that undermine welfare standards."),n.length>0?n:["No major risks identified at this time."]}function Nm(e){let t=`# ${e.title}

`;return t+=`**Generated:** ${new Date().toLocaleDateString()}

`,t+=`## Executive Summary

${e.executiveSummary}

`,t+=`## Key Decisions

`,e.keyDecisions.forEach((n,r)=>{t+=`### Decision ${r+1}: ${n.nodeTitle} (Turn ${n.turn})

`,t+=`**Choice:** ${n.choice}

`,t+=`**Rationale:** ${n.rationale}

`,t+=`**Unmeasured Impact:** ${n.impact}

`}),t+=`## Outcomes

`,t+=`### Measured Metrics

`,t+=`- Welfare Standard Adoption: ${(e.outcomes.measured.welfareStandardAdoption*100).toFixed(1)}%
`,t+=`- Production Efficiency: ${(e.outcomes.measured.productionEfficiency*100).toFixed(1)}%
`,t+=`- Cost Per Unit: ${(e.outcomes.measured.costPerUnit*100).toFixed(1)}%
`,t+=`- Welfare Incident Rate: ${(e.outcomes.measured.welfareIncidentRate*100).toFixed(1)}%

`,t+=`### Governance Debt Metrics

`,t+=`- Welfare Debt: ${(e.outcomes.unmeasured.welfareDebt*100).toFixed(1)}%
`,t+=`- Enforcement Gap: ${(e.outcomes.unmeasured.enforcementGap*100).toFixed(1)}%
`,t+=`- Regulatory Capture: ${(e.outcomes.unmeasured.regulatoryCapture*100).toFixed(1)}%
`,t+=`- System Irreversibility: ${(e.outcomes.unmeasured.systemIrreversibility*100).toFixed(1)}%

`,t+=`## Recommendations

`,e.recommendations.forEach(n=>{t+=`- ${n}
`}),t+=`
`,t+=`## Risks

`,e.risks.forEach(n=>{t+=`- ${n}
`}),t+=`
`,t+=`---

`,t+=`*This policy brief was auto-generated from the Animal Welfare Governance Simulator.*
`,t}function Bm(e){let t=`${e.title}
`;return t+=`${"=".repeat(e.title.length)}

`,t+=`Generated: ${new Date().toLocaleDateString()}

`,t+=`EXECUTIVE SUMMARY
`,t+=`${"-".repeat(20)}
`,t+=`${e.executiveSummary}

`,t+=`KEY DECISIONS
`,t+=`${"-".repeat(20)}
`,e.keyDecisions.forEach((n,r)=>{t+=`
Decision ${r+1}: ${n.nodeTitle} (Turn ${n.turn})
`,t+=`Choice: ${n.choice}
`,t+=`Rationale: ${n.rationale}
`,t+=`Unmeasured Impact: ${n.impact}
`}),t+=`

OUTCOMES
`,t+=`${"-".repeat(20)}
`,t+=`Measured Metrics:
`,t+=`  - Welfare Standard Adoption: ${(e.outcomes.measured.welfareStandardAdoption*100).toFixed(1)}%
`,t+=`  - Production Efficiency: ${(e.outcomes.measured.productionEfficiency*100).toFixed(1)}%
`,t+=`  - Cost Per Unit: ${(e.outcomes.measured.costPerUnit*100).toFixed(1)}%
`,t+=`  - Welfare Incident Rate: ${(e.outcomes.measured.welfareIncidentRate*100).toFixed(1)}%

`,t+=`Governance Debt Metrics:
`,t+=`  - Welfare Debt: ${(e.outcomes.unmeasured.welfareDebt*100).toFixed(1)}%
`,t+=`  - Enforcement Gap: ${(e.outcomes.unmeasured.enforcementGap*100).toFixed(1)}%
`,t+=`  - Regulatory Capture: ${(e.outcomes.unmeasured.regulatoryCapture*100).toFixed(1)}%
`,t+=`  - System Irreversibility: ${(e.outcomes.unmeasured.systemIrreversibility*100).toFixed(1)}%

`,t+=`RECOMMENDATIONS
`,t+=`${"-".repeat(20)}
`,e.recommendations.forEach(n=>{t+=`- ${n}
`}),t+=`
RISKS
`,t+=`${"-".repeat(20)}
`,e.risks.forEach(n=>{t+=`- ${n}
`}),t+=`
${"=".repeat(50)}
`,t+=`This policy brief was auto-generated from the Animal Welfare Governance Simulator.
`,t}function Fm(e){ye(e.metrics.unmeasured);const t=_m(e),n=Gm(e,t),r=Hm(e,t);return{title:`Governance Debt Report - Turn ${e.turn}`,summary:n,timeline:t,analysis:r}}function _m(e){const t=[];let n=0;return e.auditTrail.forEach((r,o)=>{var l,d,u;const a=((l=r.metricsSnapshot)==null?void 0:l.unmeasured)||e.metrics.unmeasured,s=o>0&&((d=e.auditTrail[o-1].metricsSnapshot)!=null&&d.unmeasured)?e.auditTrail[o-1].metricsSnapshot.unmeasured:((u=e.initialMetrics)==null?void 0:u.unmeasured)||{welfareDebt:0,enforcementGap:0,regulatoryCapture:0,sentienceKnowledgeGap:0,systemIrreversibility:0};["welfareDebt","enforcementGap","regulatoryCapture","sentienceKnowledgeGap","systemIrreversibility"].forEach(f=>{const m=a[f]-s[f];m>.05&&(n=ye(a),t.push({turn:r.turn,nodeTitle:r.nodeTitle,choice:r.chosenLabel,debtType:f,magnitude:m,cumulativeDebt:n,description:Om(f,m,r)}))})}),t}function Om(e,t,n){const r=(t*100).toFixed(0);return{welfareDebt:`Welfare debt increased by ${r}% following the decision to "${n.chosenLabel}". This represents accumulated welfare compromises that were not fully addressed.`,enforcementGap:`Enforcement gap increased by ${r}% after "${n.chosenLabel}". This indicates a delay between policy implementation and effective enforcement capacity.`,regulatoryCapture:`Regulatory capture increased by ${r}% following "${n.chosenLabel}". This suggests increased industry influence on policy decisions.`,sentienceKnowledgeGap:`Sentience knowledge gap increased by ${r}% after "${n.chosenLabel}". This reflects gaps in understanding animal needs and welfare requirements.`,systemIrreversibility:`System irreversibility increased by ${r}% following "${n.chosenLabel}". This makes future course corrections more difficult.`}[e]}function Gm(e,t){const n=ye(e.metrics.unmeasured),r={welfareDebt:e.metrics.unmeasured.welfareDebt,enforcementGap:e.metrics.unmeasured.enforcementGap,regulatoryCapture:e.metrics.unmeasured.regulatoryCapture,sentienceKnowledgeGap:e.metrics.unmeasured.sentienceKnowledgeGap,systemIrreversibility:e.metrics.unmeasured.systemIrreversibility};let o=0,a=0;return t.forEach(s=>{s.cumulativeDebt>o&&(o=s.cumulativeDebt,a=s.turn)}),{totalDebtIndex:n,totalEvents:t.length,peakDebt:o,peakTurn:a,debtByType:r}}function Hm(e,t){const n=[],r=[],o=[],a=new Map;if(t.forEach(l=>{a.has(l.turn)||a.set(l.turn,[]),a.get(l.turn).push(l)}),a.forEach((l,d)=>{l.length>=2&&n.push({turn:d,description:`Turn ${d} saw ${l.length} debt accumulation events, indicating a period of significant governance challenges.`})}),t.length>0){const l=t.slice(0,Math.floor(t.length/3)).reduce((u,f)=>u+f.magnitude,0),d=t.slice(-Math.floor(t.length/3)).reduce((u,f)=>u+f.magnitude,0);d>l*1.5?o.push("Debt accumulation accelerated in later turns, suggesting compounding governance challenges."):l>d*1.5?o.push("Debt accumulation was concentrated in early turns, with later turns showing more stability."):o.push("Debt accumulation was relatively consistent across turns.")}const s=new Map;t.forEach(l=>{s.set(l.debtType,(s.get(l.debtType)||0)+l.magnitude)});const c=Array.from(s.entries()).sort((l,d)=>d[1]-l[1])[0];if(c){const l={welfareDebt:"Prioritize decisions that address accumulated welfare compromises. Consider targeted interventions to reduce welfare debt.",enforcementGap:"Build enforcement capacity to close the gap between policy and implementation. Invest in inspection systems and oversight mechanisms.",regulatoryCapture:"Strengthen independent oversight to reduce industry influence. Consider mechanisms that protect policy independence.",sentienceKnowledgeGap:"Invest in research and knowledge-building to address gaps in understanding animal welfare needs.",systemIrreversibility:"Maintain flexibility in governance systems. Avoid decisions that lock in problematic patterns too early."};r.push(l[c[0]]||"Monitor debt accumulation and adjust strategy as needed.")}return e.metrics.unmeasured.welfareDebt>.6&&r.push("High welfare debt requires immediate attention. Consider policy adjustments that directly address welfare compromises."),e.metrics.unmeasured.enforcementGap>.6&&r.push("Large enforcement gaps undermine policy effectiveness. Prioritize building enforcement capacity."),e.metrics.unmeasured.systemIrreversibility>.7&&r.push("High system irreversibility limits future options. Consider maintaining flexibility for mid-course corrections."),{criticalPeriods:n,recommendations:r.length>0?r:["Continue monitoring debt accumulation and adjust strategy as needed."],trends:o.length>0?o:["Insufficient data to identify trends."]}}function Um(e){const t=new Date().toLocaleDateString();return`
<!DOCTYPE html>
<html>
<head>
  <title>${e.title}</title>
  <style>
    @media print {
      @page {
        size: A4;
        margin: 2cm;
      }
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
      color: #000;
      background: #fff;
      padding: 40px;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }
    h1 { color: #000; font-size: 28px; margin-bottom: 10px; }
    h2 { color: #333; font-size: 20px; margin-top: 30px; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }
    h3 { color: #555; font-size: 16px; margin-top: 20px; margin-bottom: 10px; }
    .summary { background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .metric { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
    .metric-label { font-weight: 600; }
    .metric-value { color: #666; }
    .event { background: #f9f9f9; padding: 15px; margin: 10px 0; border-left: 4px solid #fb923c; border-radius: 4px; }
    .event-title { font-weight: 600; margin-bottom: 5px; }
    .event-details { font-size: 12px; color: #666; }
    .debt-type { display: inline-block; padding: 4px 8px; background: #fff3cd; border-radius: 4px; font-size: 11px; font-weight: 600; margin-right: 8px; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background: #f5f5f5; font-weight: 600; }
    .footer { margin-top: 40px; padding-top: 20px; border-top: 2px solid #333; font-size: 12px; color: #666; text-align: center; }
    .recommendation { background: #e7f3ff; padding: 12px; margin: 8px 0; border-left: 4px solid #2563eb; border-radius: 4px; }
    .trend { background: #fff3cd; padding: 12px; margin: 8px 0; border-left: 4px solid #ffc107; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>${e.title}</h1>
  <div style="color: #666; margin-bottom: 30px;">Generated ${t}</div>
  
  <div class="summary">
    <h2>Executive Summary</h2>
    <div class="metric">
      <span class="metric-label">Total Debt Index:</span>
      <span class="metric-value">${(e.summary.totalDebtIndex*100).toFixed(1)}%</span>
    </div>
    <div class="metric">
      <span class="metric-label">Total Debt Events:</span>
      <span class="metric-value">${e.summary.totalEvents}</span>
    </div>
    <div class="metric">
      <span class="metric-label">Peak Debt:</span>
      <span class="metric-value">${(e.summary.peakDebt*100).toFixed(1)}% (Turn ${e.summary.peakTurn})</span>
    </div>
  </div>

  <h2>Debt by Type</h2>
  <table>
    <thead>
      <tr>
        <th>Debt Type</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Welfare Debt</td>
        <td>${(e.summary.debtByType.welfareDebt*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Enforcement Gap</td>
        <td>${(e.summary.debtByType.enforcementGap*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Regulatory Capture</td>
        <td>${(e.summary.debtByType.regulatoryCapture*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Sentience Knowledge Gap</td>
        <td>${(e.summary.debtByType.sentienceKnowledgeGap*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>System Irreversibility</td>
        <td>${(e.summary.debtByType.systemIrreversibility*100).toFixed(1)}%</td>
      </tr>
    </tbody>
  </table>

  <h2>Debt Accumulation Timeline</h2>
  ${e.timeline.map(n=>`
    <div class="event">
      <div class="event-title">Turn ${n.turn}: ${n.nodeTitle}</div>
      <div class="event-details">
        <span class="debt-type">${n.debtType}</span>
        <strong>Choice:</strong> ${n.choice}<br>
        <strong>Magnitude:</strong> +${(n.magnitude*100).toFixed(1)}%<br>
        <strong>Cumulative Debt:</strong> ${(n.cumulativeDebt*100).toFixed(1)}%<br>
        <strong>Description:</strong> ${n.description}
      </div>
    </div>
  `).join("")}

  <h2>Analysis</h2>
  
  <h3>Critical Periods</h3>
  ${e.analysis.criticalPeriods.length>0?e.analysis.criticalPeriods.map(n=>`
      <div class="trend">
        <strong>Turn ${n.turn}:</strong> ${n.description}
      </div>
    `).join(""):"<p>No critical periods identified.</p>"}

  <h3>Trends</h3>
  ${e.analysis.trends.map(n=>`
    <div class="trend">${n}</div>
  `).join("")}

  <h3>Recommendations</h3>
  ${e.analysis.recommendations.map(n=>`
    <div class="recommendation">${n}</div>
  `).join("")}

  <div class="footer">
    <p>Generated by Animal Welfare Governance Simulator</p>
    <p>This report analyzes governance debt accumulation patterns and provides recommendations for improvement.</p>
  </div>
</body>
</html>
  `}function $m(e){const t=Fm(e),n=Um(t),r=window.open("","_blank");if(!r){alert("Please allow popups to export PDF");return}r.document.write(n),r.document.close(),setTimeout(()=>{r.print()},250)}const Yi={en:{app:{title:"Inheritance",decision:"Decision",metrics:"Metrics",advisors:"Advisor Recommendations",help:"Help",export:"Export",reset:"Reset"},buttons:{begin:"Begin Exploration",next:"Next",previous:"Previous",skip:"Skip",getStarted:"Get Started",close:"Close",continue:"Continue",continueToNextPhase:"Continue to Next Phase",save:"Save",load:"Load",share:"Share",compare:"Compare",policyCompare:"Policy Compare",debtTimeline:"Debt Timeline",metaAnalysis:"Meta-Analysis",assumptions:"Assumptions",tutorial:"Tutorial",credits:"Credits"},mapModes:{standards:"Standards",debt:"Debt",enforcement:"Enforcement"},metrics:{successIndex:"Success Index",debtIndex:"Debt Index",productionEfficiency:"Production Efficiency",costPerUnit:"Cost Per Unit",welfareIncidentRate:"Welfare Incident Rate",welfareStandardAdoption:"Welfare Standard Adoption"},welcome:{whatThisIs:"What This Is",longtermistPerspective:"A Longtermist Perspective",keyConcept:"Key Concept: Governance Debt",noWinning:`There's No "Winning"`,longtermistScope:"Longtermist scope:",footer:"Part of the Electric Sheep / Futurekind ecosystem"},tutorial:{welcome:"Welcome to the Animal Welfare Governance Simulator",globe:"The 3D Globe",decisions:"Making Decisions",metrics:"Understanding Metrics",mechanics:"Key Mechanics",ready:"Ready to Start"},disclaimer:{title:"Educational Model Disclaimer",about:"About this simulator"}},es:{app:{title:"Inheritance",decision:"Decisin",metrics:"Mtricas",advisors:"Recomendaciones de Asesores",help:"Ayuda",export:"Exportar",reset:"Reiniciar"},buttons:{begin:"Comenzar Exploracin",next:"Siguiente",previous:"Anterior",skip:"Omitir",getStarted:"Comenzar",close:"Cerrar",continue:"Continuar",continueToNextPhase:"Continuar a la Siguiente Fase",save:"Guardar",load:"Cargar",share:"Compartir",compare:"Comparar",policyCompare:"Comparar Polticas",debtTimeline:"Lnea de Tiempo de Deuda",metaAnalysis:"Meta-Anlisis",assumptions:"Suposiciones",tutorial:"Tutorial",credits:"Crditos"},mapModes:{standards:"Estndares",debt:"Deuda",enforcement:"Cumplimiento"},metrics:{successIndex:"ndice de xito",debtIndex:"ndice de Deuda",productionEfficiency:"Eficiencia de Produccin",costPerUnit:"Costo por Unidad",welfareIncidentRate:"Tasa de Incidentes de Bienestar",welfareStandardAdoption:"Adopcin de Estndares de Bienestar"},welcome:{whatThisIs:"Qu Es Esto",longtermistPerspective:"Una Perspectiva Longtermista",keyConcept:"Concepto Clave: Deuda de Gobernanza",noWinning:'No Hay "Ganar"',longtermistScope:"Alcance longtermista:",footer:"Parte del ecosistema Electric Sheep / Futurekind"},tutorial:{welcome:"Bienvenido al Simulador de Gobernanza de Bienestar Animal",globe:"El Globo 3D",decisions:"Tomar Decisiones",metrics:"Entender las Mtricas",mechanics:"Mecnicas Clave",ready:"Listo para Comenzar"},disclaimer:{title:"Descargo de Responsabilidad del Modelo Educativo",about:"Acerca de este simulador"}},fr:{app:{title:"Simulateur de Gouvernance du Bien-tre Animal",decision:"Dcision",metrics:"Mtriques",advisors:"Recommandations des Conseillers",help:"Aide",export:"Exporter",reset:"Rinitialiser"},buttons:{begin:"Commencer l'Exploration",next:"Suivant",previous:"Prcdent",skip:"Passer",getStarted:"Commencer",close:"Fermer",continue:"Continuer",continueToNextPhase:"Continuer  la Phase Suivante",save:"Enregistrer",load:"Charger",share:"Partager",compare:"Comparer",policyCompare:"Comparer les Politiques",debtTimeline:"Chronologie de la Dette",metaAnalysis:"Mta-Analyse",assumptions:"Hypothses",tutorial:"Tutoriel",credits:"Crdits"},mapModes:{standards:"Normes",debt:"Dette",enforcement:"Application"},metrics:{successIndex:"Indice de Russite",debtIndex:"Indice de Dette",productionEfficiency:"Efficacit de Production",costPerUnit:"Cot par Unit",welfareIncidentRate:"Taux d'Incidents de Bien-tre",welfareStandardAdoption:"Adoption des Normes de Bien-tre"},welcome:{whatThisIs:"Qu'est-ce que c'est",longtermistPerspective:"Une Perspective Longtermiste",keyConcept:"Concept Cl: Dette de Gouvernance",noWinning:`Il n'y a pas de "Victoire"`,longtermistScope:"Porte longtermiste:",footer:"Faisant partie de l'cosystme Electric Sheep / Futurekind"},tutorial:{welcome:"Bienvenue dans le Simulateur de Gouvernance du Bien-tre Animal",globe:"Le Globe 3D",decisions:"Prendre des Dcisions",metrics:"Comprendre les Mtriques",mechanics:"Mcaniques Cls",ready:"Prt  Commencer"},disclaimer:{title:"Avertissement sur le Modle ducatif",about:" propos de ce simulateur"}},de:{app:{title:"Inheritance",decision:"Entscheidung",metrics:"Metriken",advisors:"Beraterempfehlungen",help:"Hilfe",export:"Exportieren",reset:"Zurcksetzen"},buttons:{begin:"Erkundung Beginnen",next:"Weiter",previous:"Zurck",skip:"berspringen",getStarted:"Loslegen",close:"Schlieen",continue:"Fortsetzen",continueToNextPhase:"Zur Nchsten Phase",save:"Speichern",load:"Laden",share:"Teilen",compare:"Vergleichen",policyCompare:"Politik Vergleichen",debtTimeline:"Schulden-Zeitachse",metaAnalysis:"Meta-Analyse",assumptions:"Annahmen",tutorial:"Tutorial",credits:"Credits"},mapModes:{standards:"Standards",debt:"Schulden",enforcement:"Durchsetzung"},metrics:{successIndex:"Erfolgsindex",debtIndex:"Schuldenindex",productionEfficiency:"Produktionseffizienz",costPerUnit:"Kosten pro Einheit",welfareIncidentRate:"Tierschutzvorfallrate",welfareStandardAdoption:"Tierschutzstandard-Annahme"},welcome:{whatThisIs:"Was Dies Ist",longtermistPerspective:"Eine Longtermistische Perspektive",keyConcept:"Schlsselkonzept: Governance-Schulden",noWinning:'Es Gibt Kein "Gewinnen"',longtermistScope:"Longtermistischer Umfang:",footer:"Teil des Electric Sheep / Futurekind kosystems"},tutorial:{welcome:"Willkommen beim Tierschutz-Governance-Simulator",globe:"Der 3D-Globus",decisions:"Entscheidungen Treffen",metrics:"Metriken Verstehen",mechanics:"Schlsselmechaniken",ready:"Bereit zum Starten"},disclaimer:{title:"Haftungsausschluss fr Bildungsmodell",about:"ber diesen Simulator"}},zh:{app:{title:"Inheritance",decision:"",metrics:"",advisors:"",help:"",export:"",reset:""},mapModes:{standards:"",debt:"",enforcement:""},metrics:{successIndex:"",debtIndex:"",productionEfficiency:"",costPerUnit:"",welfareIncidentRate:"",welfareStandardAdoption:""},disclaimer:{title:"",about:""}},pt:{app:{title:"Simulador de Governana de Bem-estar Animal",decision:"Deciso",metrics:"Mtricas",advisors:"Recomendaes de Assessores",help:"Ajuda",export:"Exportar",reset:"Redefinir"},buttons:{begin:"Comear Explorao",next:"Prximo",previous:"Anterior",skip:"Pular",getStarted:"Comear",close:"Fechar",continue:"Continuar",continueToNextPhase:"Continuar para a Prxima Fase",save:"Salvar",load:"Carregar",share:"Compartilhar",compare:"Comparar",policyCompare:"Comparar Polticas",debtTimeline:"Linha do Tempo da Dvida",metaAnalysis:"Meta-Anlise",assumptions:"Suposies",tutorial:"Tutorial",credits:"Crditos"},mapModes:{standards:"Padres",debt:"Dvida",enforcement:"Fiscalizao"},metrics:{successIndex:"ndice de Sucesso",debtIndex:"ndice de Dvida",productionEfficiency:"Eficincia de Produo",costPerUnit:"Custo por Unidade",welfareIncidentRate:"Taxa de Incidentes de Bem-estar",welfareStandardAdoption:"Adoo de Padres de Bem-estar"},welcome:{whatThisIs:"O Que  Isso",longtermistPerspective:"Uma Perspectiva Longtermista",keyConcept:"Conceito Chave: Dvida de Governana",noWinning:'No H "Vitria"',longtermistScope:"Escopo longtermista:",footer:"Parte do ecossistema Electric Sheep / Futurekind"},tutorial:{welcome:"Bem-vindo ao Simulador de Governana de Bem-estar Animal",globe:"O Globo 3D",decisions:"Tomar Decises",metrics:"Entender Mtricas",mechanics:"Mecnicas Principais",ready:"Pronto para Comear"},disclaimer:{title:"Aviso Legal do Modelo Educacional",about:"Sobre este simulador"}},ja:{app:{title:"Inheritance",decision:"",metrics:"",advisors:"",help:"",export:"",reset:""},buttons:{begin:"",next:"",previous:"",skip:"",getStarted:"",close:"",continue:"",continueToNextPhase:"",save:"",load:"",share:"",compare:"",policyCompare:"",debtTimeline:"",metaAnalysis:"",assumptions:"",tutorial:"",credits:""},mapModes:{standards:"",debt:"",enforcement:""},metrics:{successIndex:"",debtIndex:"",productionEfficiency:"",costPerUnit:"",welfareIncidentRate:"",welfareStandardAdoption:""},welcome:{whatThisIs:"",longtermistPerspective:"",keyConcept:"",noWinning:"",longtermistScope:"",footer:"Electric Sheep / Futurekind "},tutorial:{welcome:"",globe:"3D",decisions:"",metrics:"",mechanics:"",ready:""},disclaimer:{title:"",about:""}}};let Ls="en";function Vm(e){Ls=e,localStorage.setItem("preferredLanguage",e)}function wu(){const e=localStorage.getItem("preferredLanguage");if(e&&e in Yi)return e;const t=navigator.language.split("-")[0];return t in Yi?t:"en"}function Me(e){const t=e.split(".");let n=Yi[Ls];for(const r of t)if(n&&typeof n=="object"&&r in n)n=n[r];else{n=Yi.en;for(const o of t)if(n&&typeof n=="object"&&o in n)n=n[o];else return e;break}return typeof n=="string"?n:e}typeof window<"u"&&(Ls=wu());function Ym({state:e,onToggleDebug:t,onShowTutorial:n,onShowCredits:r}){var g,h;const[o,a]=w.useState(wu()),[s,c]=w.useState(!1),[l,d]=w.useState(!1);w.useEffect(()=>{Vm(o)},[o]);const u=[{code:"en",name:"English",flag:""},{code:"es",name:"Espaol",flag:""},{code:"fr",name:"Franais",flag:""},{code:"de",name:"Deutsch",flag:""},{code:"zh",name:"",flag:""},{code:"pt",name:"Portugus",flag:""},{code:"ja",name:"",flag:""}],f=()=>{const p=Am(e);ai(p,`welfare-governance-${Date.now()}.json`,"application/json")},m=()=>{const p=Mm(e);ai(p,`welfare-governance-${Date.now()}.csv`,"text/csv")},x=()=>{const p=vu(e);navigator.clipboard.writeText(p).then(()=>{alert("Shareable URL copied to clipboard!")}).catch(()=>{prompt("Copy this URL to share:",p)})},y=()=>{try{const p=rc(e),C=Nm(p);ai(C,`policy-brief-turn-${e.turn}-${Date.now()}.md`,"text/markdown")}catch(p){console.error("Error exporting policy brief:",p),alert("Error generating policy brief. Please try again.")}},b=()=>{try{const p=rc(e),C=Bm(p);ai(C,`policy-brief-turn-${e.turn}-${Date.now()}.txt`,"text/plain")}catch(p){console.error("Error exporting policy brief:",p),alert("Error generating policy brief. Please try again.")}},E=()=>{try{$m(e)}catch(p){console.error("Error exporting debt report:",p),alert("Error generating debt report. Please try again.")}};return i.jsxs("div",{style:{height:"60px",backgroundColor:"#000000",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 24px",position:"sticky",top:0,zIndex:100},children:[i.jsx("div",{style:{flex:1}}),i.jsx("h1",{title:"an animal governance and risk simulator",style:{position:"absolute",left:"50%",transform:"translateX(-50%)",fontSize:"44px",fontWeight:700,color:"#fff",margin:0,cursor:"default",letterSpacing:"0.15em",lineHeight:1,textTransform:"uppercase",fontFamily:'"Times New Roman", Times, serif',textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)",whiteSpace:"nowrap"},children:Me("app.title")}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",position:"relative",flex:1,justifyContent:"flex-end"},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{onClick:()=>c(!s),onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(96, 165, 250, 0.1)",p.currentTarget.style.borderColor="rgba(96, 165, 250, 0.4)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="rgba(15, 15, 15, 0.6)",p.currentTarget.style.borderColor="rgba(255, 255, 255, 0.12)"},style:{padding:"8px 14px",fontSize:"13px",fontWeight:500,backgroundColor:"rgba(15, 15, 15, 0.6)",backdropFilter:"blur(10px)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",minWidth:"60px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)"},title:"Change language",children:[i.jsx("span",{style:{fontSize:"14px"},children:((g=u.find(p=>p.code===o))==null?void 0:g.flag)||""}),i.jsx("span",{style:{fontSize:"11px",fontWeight:600,letterSpacing:"0.5px"},children:((h=u.find(p=>p.code===o))==null?void 0:h.code.toUpperCase())||"EN"})]}),s&&i.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"6px",background:"linear-gradient(135deg, rgba(15, 15, 15, 0.95) 0%, rgba(10, 10, 10, 0.98) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"10px",padding:"6px",minWidth:"160px",zIndex:1e3,boxShadow:"0 8px 24px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.05)"},children:u.map(p=>i.jsxs("button",{onClick:()=>{a(p.code),c(!1)},style:{width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:o===p.code?600:400,background:o===p.code?"linear-gradient(135deg, rgba(96, 165, 250, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%)":"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease"},onMouseEnter:C=>{o!==p.code&&(C.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onMouseLeave:C=>{o!==p.code&&(C.currentTarget.style.backgroundColor="transparent")},children:[i.jsx("span",{children:p.flag}),i.jsx("span",{children:p.name})]},p.code))})]}),n&&i.jsx("button",{onClick:n,style:{padding:"6px 10px",fontSize:"13px",fontWeight:500,backgroundColor:"transparent",color:"#60a5fa",border:"1px solid rgba(96, 165, 250, 0.2)",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease"},title:"Show tutorial",children:""}),i.jsxs("div",{style:{position:"relative",display:"inline-block"},onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[i.jsx("button",{onClick:()=>d(!l),onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(139, 92, 246, 0.15)",p.currentTarget.style.borderColor="rgba(139, 92, 246, 0.5)",p.currentTarget.style.transform="translateY(-1px)",p.currentTarget.style.boxShadow="0 4px 12px rgba(139, 92, 246, 0.2)"},onMouseLeave:p=>{l||(p.currentTarget.style.backgroundColor="rgba(15, 15, 15, 0.6)",p.currentTarget.style.borderColor="rgba(255, 255, 255, 0.12)",p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)")},style:{padding:"8px 16px",fontSize:"13px",fontWeight:600,backgroundColor:l?"rgba(139, 92, 246, 0.15)":"rgba(15, 15, 15, 0.6)",backdropFilter:"blur(10px)",color:"#fff",border:l?"1px solid rgba(139, 92, 246, 0.5)":"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:l?"0 4px 12px rgba(139, 92, 246, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)",letterSpacing:"0.3px"},title:"Export options",children:"Export"}),l&&i.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",padding:"4px",zIndex:1e3,minWidth:"180px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)"},children:[i.jsx("button",{onClick:f,style:{display:"block",width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:400,backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},children:"Export JSON"}),i.jsx("button",{onClick:m,style:{display:"block",width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:400,backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},children:"Export CSV"}),i.jsx("button",{onClick:x,style:{display:"block",width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:400,backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},children:"Share URL"}),i.jsx("div",{style:{height:"1px",background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%)",margin:"6px 0"}}),i.jsx("button",{onClick:y,style:{display:"block",width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:400,backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},children:"Policy Brief (Markdown)"}),i.jsx("button",{onClick:b,style:{display:"block",width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:400,backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},children:"Policy Brief (Text)"}),i.jsx("button",{onClick:E,style:{display:"block",width:"100%",padding:"10px 14px",fontSize:"13px",fontWeight:400,backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s ease"},onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="transparent"},children:"Debt Report (PDF)"})]})]}),r&&i.jsx("button",{onClick:r,onMouseEnter:p=>{p.currentTarget.style.backgroundColor="rgba(236, 72, 153, 0.15)",p.currentTarget.style.borderColor="rgba(236, 72, 153, 0.5)",p.currentTarget.style.transform="translateY(-1px)",p.currentTarget.style.boxShadow="0 4px 12px rgba(236, 72, 153, 0.2)"},onMouseLeave:p=>{p.currentTarget.style.backgroundColor="rgba(15, 15, 15, 0.6)",p.currentTarget.style.borderColor="rgba(255, 255, 255, 0.12)",p.currentTarget.style.transform="translateY(0)",p.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)"},style:{padding:"8px 16px",fontSize:"13px",fontWeight:600,backgroundColor:"rgba(15, 15, 15, 0.6)",backdropFilter:"blur(10px)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)",letterSpacing:"0.3px"},title:"Credits",children:"Credits"})]})]})}const bu={productionEfficiency:{label:"Production Efficiency",description:"Output per unit input - measures how efficiently resources are converted to animal products.",realWorldExample:"EU farms average 65-75% efficiency. Intensive systems can reach 80%+ but often at welfare cost.",researchCitation:'FAO, 2020. "Livestock Efficiency Metrics"',researchUrl:"https://www.fao.org/animal-production/en",benchmark:{level:"65-75%",description:"Typical EU farm efficiency"},alertThreshold:.85,alertMessage:"Very high efficiency may indicate welfare compromises"},welfareStandardAdoption:{label:"Welfare Standard Adoption",description:"Adoption level of recognized welfare standards (0-3 scale). Higher values indicate broader, more comprehensive adoption.",realWorldExample:"EU Directive 98/58 represents ~1.5 on this scale. UK Animal Welfare Act 2006 represents ~2.0.",researchCitation:'European Commission, 2012. "Animal Welfare Legislation Review"',researchUrl:"https://food.ec.europa.eu/animals/animal-welfare/eu-animal-welfare-legislation_en",benchmark:{level:"1.5-2.0",description:"EU/UK baseline standards"}},costPerUnit:{label:"Cost Per Unit",description:"Production cost per unit output. Lower is better, but often correlates with reduced welfare spending.",realWorldExample:"US factory farms achieve 20-30% lower costs than EU farms, but with higher welfare incident rates.",researchCitation:"USDA Economic Research Service, 2019",benchmark:{level:"0.7-0.8",description:"EU baseline cost level"}},welfareIncidentRate:{label:"Welfare Incident Rate",description:"Rate of disease, injury, and mortality incidents. Lower is better. Includes preventable suffering.",realWorldExample:"Intensive systems show 2-3x higher incident rates than extensive systems, but lower per-unit costs.",researchCitation:'Humane Society International, 2021. "Factory Farming Welfare Analysis"',researchUrl:"https://www.hsi.org/issues/farm-animal-welfare/",benchmark:{level:"<0.2",description:"Good welfare standard"},alertThreshold:.4,alertMessage:" High incident rate indicates significant welfare problems"},welfareDebt:{label:"Welfare Debt",description:"Accumulated welfare compromises that compound over time. Like technical debt, but for animal suffering.",realWorldExample:"Decades of prioritizing efficiency over welfare in US factory farming created massive welfare debt.",researchCitation:'Animal Welfare Institute, 2020. "Historical Welfare Debt Analysis"',researchUrl:"https://awionline.org/content/factory-farming",benchmark:{level:"<0.3",description:"Manageable debt level"},alertThreshold:.7,alertMessage:" Critical: Welfare debt is dangerously high. System may be approaching point of no return."},enforcementGap:{label:"Enforcement Gap",description:"Delay between policy creation and actual enforcement. Higher values mean policies exist but aren't implemented.",realWorldExample:"Many countries have welfare laws but lack inspectors. Gap can be 5-10 years between law and enforcement.",researchCitation:'World Animal Protection, 2019. "Global Enforcement Analysis"',researchUrl:"https://www.worldanimalprotection.org/",benchmark:{level:"<0.2",description:"Effective enforcement"},alertThreshold:.6,alertMessage:" Large enforcement gap - policies exist but aren't being enforced"},regulatoryCapture:{label:"Regulatory Capture",description:"Industry influence on policy-making. Higher values mean industry interests override welfare concerns.",realWorldExample:"US agricultural lobby spending correlates with weaker welfare regulations despite public support.",researchCitation:'OpenSecrets.org, 2020. "Agricultural Lobbying Impact"',researchUrl:"https://www.opensecrets.org/industries/indus.php?ind=A01",benchmark:{level:"<0.3",description:"Independent regulation"},alertThreshold:.7,alertMessage:" High regulatory capture - industry interests dominating policy"},sentienceKnowledgeGap:{label:"Sentience Knowledge Gap",description:"Gaps in understanding animal needs and capabilities. Lower values mean better scientific understanding.",realWorldExample:"Fish sentience was debated until 2010s. Many invertebrates still lack recognition despite evidence.",researchCitation:"Cambridge Declaration on Consciousness, 2012",researchUrl:"https://fcmconference.org/img/CambridgeDeclarationOnConsciousness.pdf",benchmark:{level:"<0.3",description:"Good scientific consensus"}},systemIrreversibility:{label:"System Irreversibility",description:"Difficulty unwinding harmful systems. Higher values mean past decisions lock in poor welfare outcomes.",realWorldExample:"Factory farming infrastructure investments create path dependency. Reversing requires massive capital.",researchCitation:'EU Court of Auditors, 2018. "Animal Welfare in the EU: Closing the Gap Between Ambitious Goals and Practical Implementation"',researchUrl:"https://www.eca.europa.eu/en/publications?did=47557",benchmark:{level:"<0.5",description:"Reversible systems"},alertThreshold:.8,alertMessage:" Critical: System irreversibility is very high. Some choices may be permanently locked."}};function ic(e){return bu[e]||null}function Km({state:e,metricKey:t,label:n,color:r,isUnmeasured:o=!1,onClose:a}){const[s,c]=w.useState(null),d=(()=>{var C,v,S,j;const g=[],h=((v=(C=e.initialMetrics)==null?void 0:C.measured)==null?void 0:v[t])??((j=(S=e.initialMetrics)==null?void 0:S.unmeasured)==null?void 0:j[t])??0;g.push({turn:0,value:h,label:"Initial State"}),e.auditTrail.forEach((k,A)=>{var I,R;if(k.metricsSnapshot){const D=((I=k.metricsSnapshot.measured)==null?void 0:I[t])??((R=k.metricsSnapshot.unmeasured)==null?void 0:R[t])??g[g.length-1].value;g.push({turn:k.turn,value:D,label:`${k.nodeTitle} (Turn ${k.turn})`})}});const p=e.metrics.measured[t]??e.metrics.unmeasured[t]??0;return(g.length===0||Math.abs(g[g.length-1].value-p)>.001)&&g.push({turn:e.turn,value:p,label:`Current (Turn ${e.turn})`}),g})(),u=Math.max(...d.map(g=>g.value),1),f=Math.min(...d.map(g=>g.value),0),m=600,x=200,y=40,b=d.map((g,h)=>{const p=y+h/(d.length-1||1)*(m-2*y),C=x-y-(g.value-f)/(u-f||1)*(x-2*y);return{x:p,y:C,...g}}),E=b.map((g,h)=>`${h===0?"M":"L"} ${g.x} ${g.y}`).join(" ");return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:a,children:i.jsxs("div",{style:{backgroundColor:"#111111",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"24px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflowY:"auto"},onClick:g=>g.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[i.jsxs("h2",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0},children:[n," - History"]}),i.jsx("button",{onClick:a,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"24px"},children:i.jsxs("svg",{width:m,height:x,style:{display:"block"},children:[[0,.25,.5,.75,1].map(g=>{const h=x-y-g*(x-2*y);return i.jsxs("g",{children:[i.jsx("line",{x1:y,y1:h,x2:m-y,y2:h,stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"}),i.jsx("text",{x:y-10,y:h+4,fill:"#888",fontSize:"10",textAnchor:"end",children:((u-f)*(1-g)+f).toFixed(2)})]},g)}),b.map((g,h)=>h===0||h===b.length-1||h%Math.ceil(b.length/5)===0?i.jsxs("g",{children:[i.jsx("line",{x1:g.x,y1:x-y,x2:g.x,y2:x-y+5,stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:"1"}),i.jsxs("text",{x:g.x,y:x-y+20,fill:"#888",fontSize:"10",textAnchor:"middle",children:["T",g.turn]})]},h):null),i.jsx("path",{d:E,fill:"none",stroke:r,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),b.map((g,h)=>i.jsx("circle",{cx:g.x,cy:g.y,r:s===h?6:4,fill:r,stroke:"#000",strokeWidth:"2",style:{cursor:"pointer",transition:"r 0.2s"},onMouseEnter:()=>c(h),onMouseLeave:()=>c(null)},h)),s!==null&&i.jsxs("g",{children:[i.jsx("rect",{x:b[s].x-60,y:b[s].y-50,width:"120",height:"40",fill:"#111111",stroke:r,strokeWidth:"1",rx:"4"}),i.jsx("text",{x:b[s].x,y:b[s].y-35,fill:"#fff",fontSize:"11",textAnchor:"middle",fontWeight:"600",children:b[s].label||`Turn ${b[s].turn}`}),i.jsxs("text",{x:b[s].x,y:b[s].y-20,fill:r,fontSize:"12",textAnchor:"middle",fontWeight:"600",children:[(b[s].value*100).toFixed(1),"%"]})]})]})}),i.jsx("div",{style:{backgroundColor:"#000000",borderRadius:"8px",padding:"16px",maxHeight:"300px",overflowY:"auto"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("th",{style:{textAlign:"left",padding:"8px",fontSize:"12px",color:"#888",fontWeight:600},children:"Turn"}),i.jsx("th",{style:{textAlign:"left",padding:"8px",fontSize:"12px",color:"#888",fontWeight:600},children:"Event"}),i.jsx("th",{style:{textAlign:"right",padding:"8px",fontSize:"12px",color:"#888",fontWeight:600},children:"Value"}),i.jsx("th",{style:{textAlign:"right",padding:"8px",fontSize:"12px",color:"#888",fontWeight:600},children:"Change"})]})}),i.jsx("tbody",{children:d.map((g,h)=>{const p=h>0?d[h-1].value:g.value,C=g.value-p;return i.jsxs("tr",{style:{borderBottom:h<d.length-1?"1px solid rgba(255, 255, 255, 0.05)":"none",cursor:"pointer"},onMouseEnter:()=>c(h),onMouseLeave:()=>c(null),children:[i.jsx("td",{style:{padding:"8px",fontSize:"12px",color:"#fff"},children:g.turn}),i.jsx("td",{style:{padding:"8px",fontSize:"12px",color:"#aaa"},children:g.label||"-"}),i.jsxs("td",{style:{padding:"8px",fontSize:"12px",color:r,textAlign:"right",fontWeight:600},children:[(g.value*100).toFixed(1),"%"]}),i.jsx("td",{style:{padding:"8px",fontSize:"12px",textAlign:"right",color:C>0?o?"#ef4444":"#4ade80":o?"#4ade80":"#ef4444",fontWeight:600},children:h>0&&i.jsxs(i.Fragment,{children:[C>0?"+":"",(C*100).toFixed(1),"%"]})})]},h)})})]})})]})})}function Su({type:e,onClose:t}){const n=e==="success",r=n?"Measured Success Index":"Governance Debt Index",o=n?"The Measured Success Index represents how well you've achieved explicit, quantifiable welfare outcomes. It combines production efficiency, welfare standard adoption, cost management, and incident reduction into a single score.":"The Governance Debt Index represents hidden costs and risks that accumulate from decisions. It tracks enforcement gaps, regulatory capture, knowledge gaps, system irreversibility, and welfare debt that may not be immediately visible but impact long-term outcomes.",a=n?[{name:"Production Efficiency",desc:"How efficiently animal products are produced while maintaining welfare standards"},{name:"Welfare Standard Adoption",desc:"The extent to which welfare standards are implemented across the system"},{name:"Cost Per Unit",desc:"Economic efficiency - lower costs mean more sustainable welfare improvements"},{name:"Welfare Incident Rate",desc:"Frequency of welfare violations - lower is better"}]:[{name:"Welfare Debt",desc:"Accumulated negative impacts on animal welfare that haven't been addressed"},{name:"Enforcement Gap",desc:"Difference between standards set and standards actually enforced"},{name:"Regulatory Capture",desc:"Extent to which industry interests influence regulation over public welfare"},{name:"Sentience Knowledge Gap",desc:"Uncertainty about which animals are sentient and to what degree"},{name:"System Irreversibility",desc:"How difficult it becomes to change course once decisions are implemented"}],s=n?"Your goal is to maximize the Measured Success Index by making decisions that improve welfare standards, reduce incidents, and maintain economic viability.":"Your goal is to minimize the Governance Debt Index by avoiding decisions that create hidden costs, enforcement problems, or lock you into unsustainable paths.",c=n?"A high Success Index (80%+) indicates strong welfare outcomes with good economic performance. A low index suggests either welfare standards aren't being met, costs are too high, or incidents are frequent.":"A low Debt Index (<20%) means you've avoided hidden costs and maintained flexibility. A high index (>60%) suggests you've accumulated significant unmeasured risks that could cause problems later.";return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:t,children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",padding:"32px"},onClick:l=>l.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"22px",fontWeight:600,color:"#fff",margin:0},children:r}),i.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px"},children:""})]}),i.jsx("div",{style:{marginBottom:"24px"},children:i.jsx("div",{style:{fontSize:"16px",color:"#fff",lineHeight:"1.6",marginBottom:"16px"},children:o})}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Components:"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:a.map((l,d)=>i.jsxs("div",{style:{padding:"12px",backgroundColor:"#111111",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:l.name}),i.jsx("div",{style:{fontSize:"13px",color:"#aaa",lineHeight:"1.5"},children:l.desc})]},d))})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:`1px solid ${n?"rgba(74, 222, 128, 0.3)":"rgba(251, 146, 60, 0.3)"}`},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:"Your Goal:"}),i.jsx("div",{style:{fontSize:"14px",color:"#ccc",lineHeight:"1.6"},children:s})]}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:"How to Interpret:"}),i.jsx("div",{style:{fontSize:"14px",color:"#ccc",lineHeight:"1.6"},children:c})]}),i.jsx("button",{onClick:t,style:{width:"100%",marginTop:"24px",padding:"12px",backgroundColor:"#111111",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Got it"})]})})}function Qm(){const[e,t]=w.useState(null),[n,r]=w.useState(!0);return i.jsxs("div",{style:{marginTop:"32px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(100, 150, 255, 0.2)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:n?"0":"12px",cursor:"pointer"},onClick:()=>r(!n),children:[i.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:"#60a5fa",margin:0},children:"Longtermism Research Library"}),i.jsx("div",{style:{fontSize:"12px",color:"#888"},children:n?"":""})]}),!n&&i.jsxs(i.Fragment,{children:[i.jsx("p",{style:{fontSize:"11px",color:"#888",lineHeight:"1.5",marginBottom:"12px",fontStyle:"italic"},children:"Deep questions that appear contextually in decisions. Explore all angles here."}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ye.map(o=>i.jsxs("div",{style:{padding:"12px",backgroundColor:e===o.id?"#1a1a1a":"#000000",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>t(e===o.id?null:o.id),children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:o.title}),i.jsxs("div",{style:{fontSize:"11px",color:"#888",marginBottom:"6px"},children:[o.timeHorizon,"  ",o.category]}),e===o.id&&i.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#ccc",lineHeight:"1.6",marginBottom:"12px"},children:o.description}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"6px",fontWeight:600},children:"Key Questions:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"11px",color:"#aaa",lineHeight:"1.6"},children:o.keyQuestions.slice(0,2).map((a,s)=>i.jsx("li",{style:{marginBottom:"4px"},children:a},s))})]}),i.jsx("div",{style:{fontSize:"11px",color:"#666",fontStyle:"italic"},children:o.relevance})]})]},o.id))})]})]})}const Ws=[{type:"welfare_collapse",name:"Welfare Collapse",description:"Critical welfare metrics have dropped to dangerous levels",checkCondition:e=>{const t=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length,n=e.metrics.measured.welfareIncidentRate,r=Object.values(e.map.regionValues).filter(o=>o<.2).length;return t<.2&&n>.6&&r>=3},checkWarning:e=>{const t=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length,n=e.metrics.measured.welfareIncidentRate,r=Object.values(e.map.regionValues).filter(o=>o<.3).length;return t<.3&&n>.5&&r>=2},message:"Welfare standards have collapsed across multiple regions. High incident rates and low adoption suggest systemic failure in governance. Recovery will require significant intervention.",warningMessage:"Welfare standards are approaching critical levels. Multiple regions show declining adoption and increasing incident rates.",color:"#ef4444"},{type:"debt_crisis",name:"Governance Debt Crisis",description:"Accumulated governance debt has reached unsustainable levels",checkCondition:e=>{const t=ye(e.metrics.unmeasured),n=e.metrics.unmeasured.welfareDebt,r=e.metrics.unmeasured.systemIrreversibility;return t>.75||n>.8&&r>.7},checkWarning:e=>{const t=ye(e.metrics.unmeasured),n=e.metrics.unmeasured.welfareDebt,r=e.metrics.unmeasured.systemIrreversibility;return t>.6||n>.65&&r>.6},message:"Governance debt has reached crisis levels. Hidden costs, accumulated welfare debt, and system irreversibility have created a situation where meaningful reform may no longer be possible.",warningMessage:"Governance debt is approaching critical levels. Hidden costs and system lock-in are accumulating rapidly.",color:"#f97316"},{type:"enforcement_failure",name:"Enforcement Failure",description:"Enforcement gap has become unmanageable",checkCondition:e=>{const t=e.metrics.unmeasured.enforcementGap,n=e.metrics.unmeasured.regulatoryCapture,r=e.metrics.measured.welfareIncidentRate;return t>.7&&n>.6&&r>.5},checkWarning:e=>{const t=e.metrics.unmeasured.enforcementGap,n=e.metrics.unmeasured.regulatoryCapture,r=e.metrics.measured.welfareIncidentRate;return t>.55&&n>.5&&r>.4},message:"Enforcement systems have failed. The gap between policy and practice is unmanageable, regulatory capture is severe, and incident rates remain high despite standards.",warningMessage:"Enforcement gap is widening. Regulatory capture and high incident rates suggest standards are not translating to practice.",color:"#eab308"},{type:"irreversibility_lock",name:"System Irreversibility Lock",description:"System has become too locked-in to change",checkCondition:e=>{const t=e.metrics.unmeasured.systemIrreversibility,n=1-t,r=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length;return t>.85&&n<.15&&r<.4},checkWarning:e=>{const t=e.metrics.unmeasured.systemIrreversibility,n=1-t,r=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length;return t>.7&&n<.25&&r<.5},message:"The system has become irreversibly locked in. Infrastructure, dependencies, and institutional momentum make meaningful change nearly impossible. You must live with the consequences of earlier decisions.",warningMessage:"System irreversibility is approaching critical levels. Rollback feasibility is declining, suggesting the system is becoming locked in.",color:"#8b5cf6"},{type:"regulatory_capture",name:"Regulatory Capture",description:"Regulatory capture has reached dangerous levels",checkCondition:e=>{const t=e.metrics.unmeasured.regulatoryCapture,n=e.metrics.unmeasured.enforcementGap,r=e.metrics.unmeasured.welfareDebt;return t>.75&&n>.6&&r>.7},checkWarning:e=>{const t=e.metrics.unmeasured.regulatoryCapture,n=e.metrics.unmeasured.enforcementGap,r=e.metrics.unmeasured.welfareDebt;return t>.6&&n>.5&&r>.55},message:"Regulatory capture has reached dangerous levels. Industry influence over governance has compromised enforcement and allowed welfare debt to accumulate unchecked.",warningMessage:"Regulatory capture is increasing. Industry influence appears to be compromising enforcement effectiveness.",color:"#dc2626"}];function Jm(e){const t=[];for(const n of Ws)n.checkCondition(e)&&t.push(n.type);return t}function Xm(e){const t=[];for(const n of Ws){const r=n.checkCondition(e),o=n.checkWarning(e);r?t.push({type:n.type,severity:"critical"}):o&&t.push({type:n.type,severity:"warning"})}return t}function Cu(e){return Ws.find(t=>t.type===e)||null}function qm({values:e,color:t}){if(e.length<2)return null;const n=Math.max(...e,.01),r=Math.min(...e),o=n-r||1,a=40,s=16,c=e.map((l,d)=>{const u=d/(e.length-1)*a,f=s-(l-r)/o*s;return`${u},${f}`}).join(" ");return i.jsx("svg",{width:a,height:s,style:{display:"block"},children:i.jsx("polyline",{points:c,fill:"none",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function oc({state:e}){const[t,n]=w.useState(!1),[r,o]=w.useState(null),[a,s]=w.useState(null),[c,l]=w.useState(!1),[d,u]=w.useState(null);w.useEffect(()=>()=>{d&&clearTimeout(d)},[d]);const[f,m]=w.useState(null),[x,y]=w.useState(null),[b,E]=w.useState(null),[g,h]=w.useState(null),p=lt(e.metrics.measured),C=ye(e.metrics.unmeasured),v=w.useMemo(()=>{const R=new Map;return[...Object.keys(e.metrics.measured),...Object.keys(e.metrics.unmeasured)].forEach(W=>{var Y,L,T,z;const $=[],_=((L=(Y=e.initialMetrics)==null?void 0:Y.measured)==null?void 0:L[W])??((z=(T=e.initialMetrics)==null?void 0:T.unmeasured)==null?void 0:z[W])??0;$.push(_),e.auditTrail.forEach(P=>{var N,H;if(P.metricsSnapshot){const Q=((N=P.metricsSnapshot.measured)==null?void 0:N[W])??((H=P.metricsSnapshot.unmeasured)==null?void 0:H[W])??$[$.length-1];$.push(Q)}});const V=e.metrics.measured[W]??e.metrics.unmeasured[W]??0;($.length===0||Math.abs($[$.length-1]-V)>.001)&&$.push(V),$.length<2?R.set(W,[_,V]):R.set(W,$)}),R},[e.auditTrail.length,e.turn,e.initialMetrics,e.metrics]),S=R=>{var _,V,Y,L;if(v.has(R))return v.get(R);const D=[],W=((V=(_=e.initialMetrics)==null?void 0:_.measured)==null?void 0:V[R])??((L=(Y=e.initialMetrics)==null?void 0:Y.unmeasured)==null?void 0:L[R])??0;D.push(W),e.auditTrail.forEach(T=>{var z,P;if(T.metricsSnapshot){const N=((z=T.metricsSnapshot.measured)==null?void 0:z[R])??((P=T.metricsSnapshot.unmeasured)==null?void 0:P[R])??D[D.length-1];D.push(N)}});const $=e.metrics.measured[R]??e.metrics.unmeasured[R]??0;return(D.length===0||Math.abs(D[D.length-1]-$)>.001)&&D.push($),D.length<2?[W,$]:(v.set(R,D),D)},j=(R,D)=>{const W=S(R);if(W.length<2)return"neutral";const $=W[W.length-2],_=D-$,V=.02;return _>V?"up":_<-V?"down":"neutral"},k=R=>{const D=["productionEfficiency","welfareStandardAdoption"],W=["costPerUnit","welfareIncidentRate","welfareDebt","enforcementGap","regulatoryCapture","sentienceKnowledgeGap","systemIrreversibility"];return D.includes(R)?!0:!W.includes(R)},A=(R,D)=>{const W=Math.min(1,Math.max(0,R)),_=k(D)?W:1-W;return _<.33?"#ef4444":_<.67?"#fbbf24":"#4ade80"},I=({label:R,value:D,max:W=1,color:$,metricKey:_})=>{const V=ic(_),Y=S(_),L=j(_,D),T=L==="up"?"":L==="down"?"":"",z=(V==null?void 0:V.alertThreshold)&&D>=V.alertThreshold,P=A(D/W,_);return i.jsxs("div",{style:{marginBottom:"16px",position:"relative"},onMouseEnter:N=>{if(d&&(clearTimeout(d),u(null)),V){const H=N.currentTarget.getBoundingClientRect();o(_),s({x:H.right+10,y:H.top}),l(!1)}},onMouseLeave:()=>{const N=setTimeout(()=>{c||(o(null),s(null))},200);u(N)},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",flex:1},children:[i.jsx("span",{style:{fontSize:"12px",color:"#aaa",cursor:V?"help":"default"},children:R}),V&&i.jsx("span",{style:{fontSize:"10px",color:"#666"},children:""}),z&&i.jsx("span",{style:{fontSize:"12px",color:"#ef4444"},children:""}),i.jsx("span",{style:{fontSize:"10px",color:"#888"},children:T}),i.jsx("div",{style:{flex:1,maxWidth:"40px",marginLeft:"4px",cursor:"pointer"},onClick:()=>m({metricKey:_,label:R,color:$,isUnmeasured:Object.keys(e.metrics.unmeasured).includes(_)}),title:"Click to view full history",children:i.jsx(qm,{values:Y,color:P})})]}),i.jsxs("span",{style:{fontSize:"12px",color:z?"#ef4444":P,fontWeight:600},children:[(D*100).toFixed(0),"%"]})]}),z&&(V==null?void 0:V.alertMessage)&&i.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px",padding:"4px 6px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",border:"1px solid rgba(239, 68, 68, 0.3)"},children:V.alertMessage}),i.jsx("div",{style:{height:"10px",backgroundColor:"#000000",borderRadius:"6px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)"},children:i.jsx("div",{style:{height:"100%",width:`${D/W*100}%`,backgroundColor:P,transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s ease",boxShadow:`0 0 10px ${P}40`,borderRadius:"6px"}})})]})};return i.jsxs("div",{style:{padding:"0",backgroundColor:"transparent"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h3",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0,letterSpacing:"-0.02em"},children:"Metrics Dashboard"}),i.jsx("button",{onClick:()=>n(!t),style:{padding:"8px 12px",backgroundColor:t?"#60a5fa":"rgba(255, 255, 255, 0.1)",color:t?"#000":"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",fontSize:"11px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:R=>{t||(R.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)")},onMouseLeave:R=>{t||(R.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},children:t?" Show Less":" Show All Metrics"})]}),e.lossWarnings&&e.lossWarnings.length>0&&i.jsx("div",{style:{marginBottom:"24px"},children:e.lossWarnings.map((R,D)=>{const W=Cu(R.type);return W?i.jsxs("div",{style:{padding:"12px 16px",backgroundColor:R.severity==="critical"?"rgba(239, 68, 68, 0.15)":"rgba(234, 179, 8, 0.15)",border:`2px solid ${R.severity==="critical"?"#ef4444":"#eab308"}`,borderRadius:"8px",marginBottom:"12px",borderLeft:`4px solid ${W.color}`},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[i.jsx("span",{style:{fontSize:"16px"},children:R.severity==="critical"?"":""}),i.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:R.severity==="critical"?"#ef4444":"#eab308"},children:W.name}),R.severity==="critical"&&i.jsx("span",{style:{fontSize:"10px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.2)",padding:"2px 6px",borderRadius:"4px",fontWeight:600,textTransform:"uppercase"},children:"Critical"})]}),i.jsx("div",{style:{fontSize:"12px",color:"#ddd",lineHeight:"1.5",marginTop:"4px"},children:R.severity==="critical"?W.message:W.warningMessage})]},`${R.type}-${R.turn}-${D}`):null})}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Measured"}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",marginBottom:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(I,{label:"Welfare Standard Adoption",value:e.metrics.measured.welfareStandardAdoption/3,max:1,color:"#60a5fa",metricKey:"welfareStandardAdoption"}),i.jsx(I,{label:"Welfare Incident Rate",value:e.metrics.measured.welfareIncidentRate,color:"#f87171",metricKey:"welfareIncidentRate"}),t&&i.jsxs(i.Fragment,{children:[i.jsx(I,{label:"Production Efficiency",value:e.metrics.measured.productionEfficiency,color:"#4ade80",metricKey:"productionEfficiency"}),i.jsx(I,{label:"Cost Per Unit",value:e.metrics.measured.costPerUnit,color:"#fbbf24",metricKey:"costPerUnit"})]})]}),i.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"2px solid rgba(74, 222, 128, 0.3)",boxShadow:"0 0 20px rgba(74, 222, 128, 0.1)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",fontWeight:500},children:"Success Index"}),i.jsx("button",{onClick:()=>y("success"),onMouseEnter:R=>{const D=R.currentTarget.getBoundingClientRect();E("success"),h({x:D.right+10,y:D.top})},onMouseLeave:()=>{E(null),h(null)},style:{background:"none",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"12px",padding:"0",display:"flex",alignItems:"center",lineHeight:"1"},title:"Click to learn more about Success Index",children:""})]}),i.jsxs("div",{style:{fontSize:"32px",fontWeight:700,color:"#4ade80",letterSpacing:"-0.02em"},children:[(p*100).toFixed(0),"%"]})]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Unmeasured (Governance Debt)"}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx(I,{label:"Welfare Debt",value:e.metrics.unmeasured.welfareDebt,color:"#fb923c",metricKey:"welfareDebt"}),i.jsx(I,{label:"System Irreversibility",value:e.metrics.unmeasured.systemIrreversibility,color:"#ef4444",metricKey:"systemIrreversibility"}),t&&i.jsxs(i.Fragment,{children:[i.jsx(I,{label:"Enforcement Gap",value:e.metrics.unmeasured.enforcementGap,color:"#f59e0b",metricKey:"enforcementGap"}),i.jsx(I,{label:"Regulatory Capture",value:e.metrics.unmeasured.regulatoryCapture,color:"#ef4444",metricKey:"regulatoryCapture"}),i.jsx(I,{label:"Sentience Knowledge Gap",value:e.metrics.unmeasured.sentienceKnowledgeGap,color:"#a855f7",metricKey:"sentienceKnowledgeGap"})]})]}),i.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#000000",borderRadius:"8px",border:"2px solid rgba(251, 146, 60, 0.3)",boxShadow:"0 0 20px rgba(251, 146, 60, 0.1)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",fontWeight:500},children:"Debt Index"}),i.jsx("button",{onClick:()=>y("debt"),onMouseEnter:R=>{const D=R.currentTarget.getBoundingClientRect();E("debt"),h({x:D.right+10,y:D.top})},onMouseLeave:()=>{E(null),h(null)},style:{background:"none",border:"none",color:"#fb923c",cursor:"pointer",fontSize:"12px",padding:"0",display:"flex",alignItems:"center",lineHeight:"1"},title:"Click to learn more about Debt Index",children:""})]}),i.jsxs("div",{style:{fontSize:"32px",fontWeight:700,color:"#fb923c",letterSpacing:"-0.02em"},children:[(C*100).toFixed(0),"%"]})]})]}),i.jsx(Qm,{}),b&&g&&i.jsxs("div",{style:{position:"fixed",left:`${g.x}px`,top:`${g.y}px`,backgroundColor:"#111111",border:`1px solid ${b==="success"?"rgba(74, 222, 128, 0.3)":"rgba(251, 146, 60, 0.3)"}`,borderRadius:"8px",padding:"12px",maxWidth:"280px",zIndex:1e4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:b==="success"?"Measured Success Index":"Governance Debt Index"}),i.jsx("div",{style:{fontSize:"11px",color:"#bbb",lineHeight:"1.5",marginBottom:"8px"},children:b==="success"?"Combines production efficiency, welfare standard adoption, cost management, and incident reduction into a single score. Higher is better.":"Tracks hidden costs: enforcement gaps, regulatory capture, knowledge gaps, system irreversibility, and welfare debt. Lower is better."}),i.jsx("div",{style:{fontSize:"10px",color:"#888",fontStyle:"italic",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:"Click the icon for detailed explanation"})]}),r&&a&&(()=>{const R=ic(r);return R?i.jsxs("div",{style:{position:"fixed",left:`${a.x}px`,top:`${a.y}px`,backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",maxWidth:"300px",zIndex:1e4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"auto"},onMouseEnter:()=>{d&&(clearTimeout(d),u(null)),l(!0)},onMouseLeave:()=>{l(!1);const D=setTimeout(()=>{o(null),s(null)},150);u(D)},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:R.label}),i.jsx("div",{style:{fontSize:"11px",color:"#bbb",lineHeight:"1.5",marginBottom:"8px"},children:R.description}),i.jsxs("div",{style:{fontSize:"10px",color:"#888",fontStyle:"italic",marginBottom:"6px",paddingTop:"6px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[" ",R.realWorldExample]}),R.benchmark&&i.jsxs("div",{style:{fontSize:"10px",color:"#60a5fa",marginTop:"6px"},children:["Benchmark: ",R.benchmark.level," - ",R.benchmark.description]}),R.researchCitation&&i.jsxs("div",{style:{fontSize:"9px",color:"#666",marginTop:"6px",fontStyle:"italic"},children:[R.researchCitation,R.researchUrl&&i.jsx("a",{href:R.researchUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",marginLeft:"6px",textDecoration:"underline",cursor:"pointer",fontWeight:500},onClick:D=>{D.stopPropagation();try{setTimeout(()=>{o(null),s(null)},500)}catch(W){console.warn("Could not open link:",R.researchUrl,W),setTimeout(()=>{o(null),s(null)},100)}},onError:D=>{console.warn("Link error:",R.researchUrl)},children:"Read paper "})]})]}):null})(),f&&i.jsx(Km,{state:e,metricKey:f.metricKey,label:f.label,color:f.color,isUnmeasured:f.isUnmeasured,onClose:()=>m(null)}),x&&i.jsx(Su,{type:x,onClose:()=>y(null)})]})}function ju({state:e,onClose:t}){const n=xu(e),r=()=>{const s=[],c=new Map;return e.auditTrail.forEach(l=>{l.assumptions&&l.assumptions.split(",").map(u=>u.trim()).filter(u=>u).forEach(u=>{c.has(u)||c.set(u,{strength:1,createdTurn:l.turn})})}),e.auditTrail.forEach(l=>{l.assumptions&&l.assumptions.split(",").map(u=>u.trim()).filter(u=>u).forEach(u=>{const f=c.get(u);if(f){const m=l.turn-f.createdTurn,x=Math.max(0,1-m*.1);s.push({turn:l.turn,assumption:u,strength:x,event:`Reaffirmed in "${l.nodeTitle}"`}),f.lastReaffirmed=l.turn}})}),e.memory.assumptionsBank.forEach(l=>{s.push({turn:e.turn,assumption:l.text,strength:l.strength,event:"Current State"})}),s.sort((l,d)=>l.turn-d.turn)},o=r(),a=Array.from(new Set(o.map(s=>s.assumption)));return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:t,children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflowY:"auto",padding:"24px"},onClick:s=>s.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0},children:"Assumption Timeline"}),i.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px"},children:""})]}),i.jsx("div",{style:{marginBottom:"32px"},children:i.jsx("div",{style:{position:"relative",paddingLeft:"40px",borderLeft:"2px solid rgba(255, 255, 255, 0.2)",minHeight:"200px"},children:a.map((s,c)=>{var u;const l=o.filter(f=>f.assumption===s),d=((u=l[l.length-1])==null?void 0:u.strength)||0;return i.jsxs("div",{style:{marginBottom:"32px",position:"relative"},children:[i.jsx("div",{style:{position:"absolute",left:"-45px",top:"0",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:d>.7?"#4ade80":d>.3?"#fbbf24":"#ef4444",border:"2px solid #000"}}),i.jsxs("div",{style:{marginBottom:"8px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:s}),i.jsxs("div",{style:{fontSize:"11px",color:"#888"},children:["Current Strength: ",(d*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginBottom:"12px"},children:[i.jsx("div",{style:{flex:1,height:"8px",backgroundColor:"#111111",borderRadius:"4px",overflow:"hidden"},children:i.jsx("div",{style:{height:"100%",width:`${d*100}%`,backgroundColor:d>.7?"#4ade80":d>.3?"#fbbf24":"#ef4444",transition:"width 0.3s ease"}})}),i.jsxs("div",{style:{fontSize:"10px",color:"#666",minWidth:"40px",textAlign:"right"},children:[(d*100).toFixed(0),"%"]})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:l.map((f,m)=>i.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#111111",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"11px",color:"#aaa"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[i.jsxs("span",{style:{color:"#fff",fontWeight:600},children:["Turn ",f.turn]}),i.jsxs("span",{style:{color:f.strength>.7?"#4ade80":f.strength>.3?"#fbbf24":"#ef4444"},children:["Strength: ",(f.strength*100).toFixed(0),"%"]})]}),i.jsx("div",{style:{color:"#888",fontSize:"10px"},children:f.event})]},m))})]},c)})})}),n.length>0&&i.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",border:"1px solid rgba(239, 68, 68, 0.3)",marginBottom:"24px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#ef4444",marginBottom:"8px"},children:" Critical Assumption Failures"}),i.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:[n.length," assumption(s) have degraded below critical thresholds:"]}),i.jsx("ul",{style:{marginTop:"8px",paddingLeft:"20px",fontSize:"12px",color:"#aaa"},children:n.map((s,c)=>i.jsxs("li",{style:{marginBottom:"4px"},children:[s.text," (Strength: ",(s.strength*100).toFixed(0),"%)"]},c))})]}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px"},children:"Summary"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",fontSize:"12px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"#aaa"},children:"Total Assumptions"}),i.jsx("div",{style:{color:"#fff",fontWeight:600,fontSize:"18px"},children:a.length})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"#aaa"},children:"Active"}),i.jsx("div",{style:{color:"#4ade80",fontWeight:600,fontSize:"18px"},children:a.filter(s=>{var d;const c=r().filter(u=>u.assumption===s);return(((d=c[c.length-1])==null?void 0:d.strength)||0)>.3}).length})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"#aaa"},children:"Degraded"}),i.jsx("div",{style:{color:"#ef4444",fontWeight:600,fontSize:"18px"},children:n.length})]})]})]})]})})}function Zm(e,t,n){const r=eg(e,t,n),o=window.open("","_blank");if(!o){alert("Please allow popups to export PDF");return}o.document.write(r),o.document.close(),setTimeout(()=>{o.print()},250)}function eg(e,t,n){return`
<!DOCTYPE html>
<html>
<head>
  <title>Animal Welfare Governance - Post-Mortem Report</title>
  <style>
    @media print {
      @page {
        size: A4;
        margin: 2cm;
      }
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color: #000;
      background: #fff;
      padding: 40px;
      max-width: 800px;
      margin: 0 auto;
    }
    h1 { color: #000; font-size: 28px; margin-bottom: 10px; }
    h2 { color: #333; font-size: 20px; margin-top: 30px; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }
    h3 { color: #555; font-size: 16px; margin-top: 20px; margin-bottom: 10px; }
    .summary { background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .metric { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }
    .metric-label { font-weight: 600; }
    .metric-value { color: #666; }
    .decision { background: #f9f9f9; padding: 15px; margin: 10px 0; border-left: 4px solid #2563eb; border-radius: 4px; }
    .decision-title { font-weight: 600; margin-bottom: 5px; }
    .decision-details { font-size: 12px; color: #666; }
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
    th { background: #f5f5f5; font-weight: 600; }
    .footer { margin-top: 40px; padding-top: 20px; border-top: 2px solid #333; font-size: 12px; color: #666; text-align: center; }
  </style>
</head>
<body>
  <h1>Animal Welfare Governance Simulator</h1>
  <div style="color: #666; margin-bottom: 30px;">Post-Mortem Report - Generated ${new Date().toLocaleDateString()}</div>
  
  <div class="summary">
    <h2>Executive Summary</h2>
    <div class="metric">
      <span class="metric-label">Total Decisions:</span>
      <span class="metric-value">${e.auditTrail.length}</span>
    </div>
    <div class="metric">
      <span class="metric-label">Total Turns:</span>
      <span class="metric-value">${e.turn}</span>
    </div>
    <div class="metric">
      <span class="metric-label">Final Phase:</span>
      <span class="metric-value">${e.phaseId}</span>
    </div>
    <div class="metric">
      <span class="metric-label">Measured Success Index:</span>
      <span class="metric-value">${(t*100).toFixed(1)}%</span>
    </div>
    <div class="metric">
      <span class="metric-label">Governance Debt Index:</span>
      <span class="metric-value">${(n*100).toFixed(1)}%</span>
    </div>
  </div>

  <h2>Decision Timeline</h2>
  ${e.auditTrail.map(o=>`
    <div class="decision">
      <div class="decision-title">Turn ${o.turn}: ${o.nodeTitle}</div>
      <div class="decision-details">
        <strong>Choice:</strong> ${o.chosenLabel}<br>
        <strong>Owner:</strong> ${o.ownerRole}<br>
        <strong>Rationale:</strong> ${o.rationale||"N/A"}<br>
        <strong>Assumptions:</strong> ${o.assumptions||"None"}<br>
        <strong>Unmeasured Impact:</strong> ${o.unmeasuredImpact}
      </div>
    </div>
  `).join("")}

  <h2>Final Metrics</h2>
  <table>
    <thead>
      <tr>
        <th>Metric</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Production Efficiency</td>
        <td>${(e.metrics.measured.productionEfficiency*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Welfare Standard Adoption</td>
        <td>${(e.metrics.measured.welfareStandardAdoption*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Cost Per Unit</td>
        <td>${(e.metrics.measured.costPerUnit*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Welfare Incident Rate</td>
        <td>${(e.metrics.measured.welfareIncidentRate*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Welfare Debt</td>
        <td>${(e.metrics.unmeasured.welfareDebt*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Enforcement Gap</td>
        <td>${(e.metrics.unmeasured.enforcementGap*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>Regulatory Capture</td>
        <td>${(e.metrics.unmeasured.regulatoryCapture*100).toFixed(1)}%</td>
      </tr>
      <tr>
        <td>System Irreversibility</td>
        <td>${(e.metrics.unmeasured.systemIrreversibility*100).toFixed(1)}%</td>
      </tr>
    </tbody>
  </table>

  <div class="footer">
    <p>Generated by Animal Welfare Governance Simulator</p>
    <p>This report represents a simulation of governance decisions and their impacts.</p>
  </div>
</body>
</html>
  `}function ku(e){const t=[];return Object.entries(e.map.regionValues).forEach(([n,r])=>{const o=Fa(n);if(!o)return;const a=o.baselineScore,s=Math.min(1,Math.max(0,a+r*.5)),c=Vi(s),l=wi(c),d=s-a;t.push({iso3:n,name:o.name,grade:c,gradeColor:l,score:s,change:d})}),t.sort((n,r)=>r.score-n.score)}function Tu(e){const t=ku(e);return t.length===0?0:t.reduce((r,o)=>r+o.score,0)/t.length}const Eu="welfareGovernanceLeaderboard",tg=50;function Iu(e){const t=lt(e.metrics.measured),n=ye(e.metrics.unmeasured),r=Tu(e);return t*.5-n*.2+r*.3}function ng(e,t,n){const r=Iu(e),o=lt(e.metrics.measured),a=ye(e.metrics.unmeasured),s={id:`entry_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,playerName:t,measuredSuccess:o,governanceDebt:a,totalScore:r,turn:e.turn,timestamp:Date.now(),shareableUrl:n},c=Ns();c.push(s),c.sort((d,u)=>u.totalScore-d.totalScore);const l=c.slice(0,tg);return localStorage.setItem(Eu,JSON.stringify(l)),s}function Ns(){try{const e=localStorage.getItem(Eu);return e?JSON.parse(e):[]}catch{return[]}}function rg(e=10){return Ns().slice(0,e)}function ac(e){return(e*100).toFixed(1)}function ig({onClose:e,currentScore:t,currentEntryId:n}){const[r,o]=w.useState([]),[a,s]=w.useState(-1);w.useEffect(()=>{if(o(rg(20)),n){const l=Ns().findIndex(d=>d.id===n)+1;s(l>0?l:-1)}},[n]);const c=l=>new Date(l).toLocaleDateString();return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:e,children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflowY:"auto",padding:"24px"},onClick:l=>l.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0},children:" Leaderboard"}),i.jsx("button",{onClick:e,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px"},children:""})]}),t!==void 0&&i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",marginBottom:"24px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#888",marginBottom:"8px"},children:"Your Score"}),i.jsx("div",{style:{fontSize:"24px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:ac(t)}),a>0&&i.jsxs("div",{style:{fontSize:"12px",color:"#aaa"},children:["Rank: #",a," of ",r.length]})]}),i.jsx("div",{style:{backgroundColor:"#111111",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"2px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",color:"#888",fontWeight:600},children:"Rank"}),i.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",color:"#888",fontWeight:600},children:"Player"}),i.jsx("th",{style:{padding:"12px",textAlign:"right",fontSize:"12px",color:"#888",fontWeight:600},children:"Score"}),i.jsx("th",{style:{padding:"12px",textAlign:"right",fontSize:"12px",color:"#888",fontWeight:600},children:"Success"}),i.jsx("th",{style:{padding:"12px",textAlign:"right",fontSize:"12px",color:"#888",fontWeight:600},children:"Debt"}),i.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",color:"#888",fontWeight:600},children:"Date"})]})}),i.jsx("tbody",{children:r.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,style:{padding:"40px",textAlign:"center",color:"#666",fontSize:"14px"},children:"No entries yet. Complete a scenario to appear on the leaderboard!"})}):r.map((l,d)=>i.jsxs("tr",{style:{borderBottom:d<r.length-1?"1px solid rgba(255, 255, 255, 0.05)":"none",backgroundColor:l.id===n?"rgba(37, 99, 235, 0.1)":"transparent"},children:[i.jsx("td",{style:{padding:"12px",fontSize:"14px",fontWeight:600,color:"#fff"},children:d===0?"":d===1?"":d===2?"":`#${d+1}`}),i.jsx("td",{style:{padding:"12px",fontSize:"13px",color:"#fff",fontWeight:l.id===n?600:400},children:l.playerName}),i.jsx("td",{style:{padding:"12px",fontSize:"14px",color:"#4ade80",fontWeight:600,textAlign:"right"},children:ac(l.totalScore)}),i.jsxs("td",{style:{padding:"12px",fontSize:"12px",color:"#aaa",textAlign:"right"},children:[(l.measuredSuccess*100).toFixed(0),"%"]}),i.jsxs("td",{style:{padding:"12px",fontSize:"12px",color:"#aaa",textAlign:"right"},children:[(l.governanceDebt*100).toFixed(0),"%"]}),i.jsx("td",{style:{padding:"12px",fontSize:"11px",color:"#666",textAlign:"center"},children:c(l.timestamp)})]},l.id))})]})}),i.jsxs("div",{style:{marginTop:"16px",fontSize:"11px",color:"#666",textAlign:"center"},children:["Leaderboard stores top ",r.length," entries locally"]})]})})}const Ru=[{type:"welfare",name:"Welfare Victory",description:"Achieve high welfare standards globally while maintaining efficiency",checkCondition:e=>{const t=lt(e.metrics.measured),n=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length,r=Object.values(e.map.regionValues).filter(o=>o>.7).length;return t>.75&&n>.6&&r>=5},message:"You have achieved exceptional welfare standards across the globe while maintaining production efficiency. Your commitment to animal welfare has created a model for others to follow.",color:"#4ade80"},{type:"debt",name:"Debt Victory",description:"Minimize welfare debt while maintaining reasonable standards",checkCondition:e=>{const t=ye(e.metrics.unmeasured),n=lt(e.metrics.measured);return t<.25&&n>.5},message:"You have successfully minimized hidden costs and governance debt while maintaining reasonable welfare standards. Your pragmatic approach avoided the pitfalls of unmeasured risks.",color:"#60a5fa"},{type:"enforcement",name:"Enforcement Victory",description:"Achieve perfect enforcement with minimal gaps",checkCondition:e=>{const t=e.metrics.unmeasured.enforcementGap,n=e.metrics.unmeasured.regulatoryCapture,r=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length;return t<.15&&n<.2&&r>.5},message:"You have achieved exceptional enforcement with minimal gaps between policy and practice. Your governance systems ensure that standards translate into real-world improvements.",color:"#a78bfa"},{type:"balance",name:"Balance Victory",description:"Achieve all metrics in good ranges - the most challenging path",checkCondition:e=>{const t=lt(e.metrics.measured),n=ye(e.metrics.unmeasured),r=e.metrics.unmeasured.enforcementGap,o=Object.values(e.map.regionValues).reduce((a,s)=>a+s,0)/Object.values(e.map.regionValues).length;return t>.65&&n<.35&&r<.25&&o>.55&&e.metrics.unmeasured.regulatoryCapture<.3&&e.metrics.unmeasured.sentienceKnowledgeGap<.3},message:"You have achieved exceptional balance across all dimensions of governance. Your holistic approach demonstrates that it is possible to balance welfare, efficiency, enforcement, and long-term sustainability.",color:"#fbbf24"}];function og(e){const t=["balance","enforcement","debt","welfare"];for(const n of t){const r=Ru.find(o=>o.type===n);if(r&&r.checkCondition(e))return n}return null}function ag(e){return Ru.find(t=>t.type===e)||null}function sg({achievement:e,unlocked:t=!0}){const n=t?"rgba(255, 255, 255, 0.15)":"rgba(255, 255, 255, 0.05)",r=t?"rgba(255, 255, 255, 0.2)":"rgba(255, 255, 255, 0.08)";return i.jsxs("div",{style:{padding:"12px",backgroundColor:t?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.02)",borderRadius:"8px",border:"1px solid "+n,opacity:t?1:.5,transition:"all 0.2s",display:"flex",gap:"12px",alignItems:"center"},children:[e.icon&&i.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",overflow:"hidden",flexShrink:0,border:"2px solid "+r,boxShadow:t?"0 2px 8px rgba(255, 255, 255, 0.1)":"none"},children:i.jsx("img",{src:e.icon,alt:e.name,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",filter:t?"brightness(1.05) contrast(1.1)":"grayscale(1) brightness(0.4)"},onError:o=>{const a=o.target;a.style.display="none"}})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:t?"#fff":"#888",marginBottom:"4px"},children:e.name}),i.jsx("div",{style:{fontSize:"12px",color:t?"#aaa":"#666",lineHeight:"1.4"},children:e.description})]})]})}const zu=[{id:"ethical_pioneer",name:"Ethical Pioneer",description:"Always chose the highest welfare option in every decision",checkCondition:e=>{const t=["welfare","standard","protect","recognize","broad"],n=e.auditTrail.every(r=>t.some(o=>r.chosenLabel.toLowerCase().includes(o)||r.rationale.toLowerCase().includes(o)));return e.auditTrail.length>=5&&n},icon:"https://randomuser.me/api/portraits/women/68.jpg"},{id:"pragmatic_governor",name:"Pragmatic Governor",description:"Balanced all concerns across measured and unmeasured metrics",checkCondition:e=>{const t=e.metrics.measured.productionEfficiency*.3+Math.min(1,e.metrics.measured.welfareStandardAdoption/3)*.3+(1-e.metrics.measured.costPerUnit)*.2+(1-e.metrics.measured.welfareIncidentRate)*.2,n=ye(e.metrics.unmeasured);return t>.6&&n<.4&&e.auditTrail.length>=8},icon:"https://randomuser.me/api/portraits/men/71.jpg"},{id:"research_champion",name:"Research Champion",description:"Prioritized knowledge gaps and research throughout",checkCondition:e=>{const t=["research","knowledge","understanding","study","science"];return e.auditTrail.filter(r=>t.some(o=>r.rationale.toLowerCase().includes(o)||r.chosenLabel.toLowerCase().includes(o))).length>=4&&e.metrics.unmeasured.sentienceKnowledgeGap<.25},icon:"https://randomuser.me/api/portraits/women/82.jpg"},{id:"debt_eliminator",name:"Debt Eliminator",description:"Minimized welfare debt throughout the scenario",checkCondition:e=>ye(e.metrics.unmeasured)<.2&&e.metrics.unmeasured.welfareDebt<.15,icon:"https://randomuser.me/api/portraits/men/46.jpg"},{id:"enforcement_master",name:"Enforcement Master",description:"Achieved minimal enforcement gaps",checkCondition:e=>e.metrics.unmeasured.enforcementGap<.15&&e.metrics.unmeasured.regulatoryCapture<.2,icon:"https://randomuser.me/api/portraits/women/37.jpg"},{id:"efficiency_expert",name:"Efficiency Expert",description:"Maintained high production efficiency throughout",checkCondition:e=>e.metrics.measured.productionEfficiency>.75&&e.metrics.measured.costPerUnit<.3,icon:"https://randomuser.me/api/portraits/men/58.jpg"},{id:"global_leader",name:"Global Leader",description:"Achieved high welfare standards in 7+ countries",checkCondition:e=>Object.values(e.map.regionValues).filter(n=>n>.7).length>=7,icon:"https://randomuser.me/api/portraits/women/55.jpg"},{id:"balanced_approach",name:"Balanced Approach",description:"Achieved balance victory - all metrics in good ranges",checkCondition:e=>{const t=e.metrics.measured.productionEfficiency*.3+Math.min(1,e.metrics.measured.welfareStandardAdoption/3)*.3+(1-e.metrics.measured.costPerUnit)*.2+(1-e.metrics.measured.welfareIncidentRate)*.2,n=ye(e.metrics.unmeasured),r=Object.values(e.map.regionValues).reduce((o,a)=>o+a,0)/Object.values(e.map.regionValues).length;return t>.65&&n<.35&&e.metrics.unmeasured.enforcementGap<.25&&r>.55&&e.metrics.unmeasured.regulatoryCapture<.3&&e.metrics.unmeasured.sentienceKnowledgeGap<.3},icon:"https://randomuser.me/api/portraits/men/63.jpg"},{id:"rapid_decision_maker",name:"Rapid Decision Maker",description:"Completed the scenario in under 15 turns",checkCondition:e=>e.turn<=15&&e.flags.isComplete,icon:"https://randomuser.me/api/portraits/women/90.jpg"},{id:"thoughtful_planner",name:"Thoughtful Planner",description:"Maintained assumptions throughout with minimal degradation",checkCondition:e=>{const t=e.memory.assumptionsBank.filter(n=>n.strength>.7).length;return e.memory.assumptionsBank.length>=5&&t>=3},icon:"https://randomuser.me/api/portraits/men/79.jpg"}];function lg(e){const t=[],n=e.achievements||[];for(const r of zu)!n.includes(r.id)&&r.checkCondition(e)&&t.push(r.id);return t}function cg(e){return zu.find(t=>t.id===e)||null}function dg({state:e,onClose:t}){const[n,r]=w.useState(!1),[o,a]=w.useState(!1),[s,c]=w.useState(!0),[l,d]=w.useState(""),[u,f]=w.useState(null),[m,x]=w.useState(null),[y,b]=w.useState(!1),E=lt(e.metrics.measured),g=ye(e.metrics.unmeasured),h=xu(e),p=Iu(e),C=ku(e),v=Tu(e),S=e.victoryType||og(e),j=S?ag(S):null,k=()=>{if(!l.trim()){alert("Please enter your name");return}const I=vu(e),R=ng(e,l.trim(),I);f(R.id),c(!1),alert("Score submitted to leaderboard!")},A=e.auditTrail.filter(I=>I.unmeasuredImpact.includes("welfare debt")||I.unmeasuredImpact.includes("welfareDebt")).slice(0,3);return i.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:t,children:[i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",padding:"32px"},onClick:I=>I.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"24px",fontWeight:600,color:"#fff",margin:0},children:"Post-Mortem Report"}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:()=>Zm(e,E,g),style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#111111",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:" Export PDF"}),i.jsx("button",{onClick:t,style:{padding:"8px 16px",backgroundColor:"transparent",color:"#888",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Close"})]})]}),i.jsx("div",{style:{marginBottom:"32px",padding:"20px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"4px"},children:"Total Score"}),i.jsx("div",{style:{fontSize:"32px",fontWeight:600,color:"#4ade80"},children:(p*100).toFixed(1)})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s&&i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"text",placeholder:"Your name",value:l,onChange:I=>d(I.target.value),style:{padding:"8px 12px",backgroundColor:"#000000",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",fontSize:"12px",width:"150px"},onKeyPress:I=>{I.key==="Enter"&&k()}}),i.jsx("button",{onClick:k,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",fontWeight:600},children:"Submit Score"})]}),i.jsx("button",{onClick:()=>a(!0),style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",fontWeight:600},children:" View Leaderboard"})]})]})}),C.length>0&&i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Global Impact: Country Welfare Grades"}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",marginBottom:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px"},children:"Average Country Score"}),i.jsxs("div",{style:{fontSize:"28px",fontWeight:600,color:"#4ade80"},children:[(v*100).toFixed(1),"%"]}),i.jsx("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Based on welfare improvements across all tracked countries"})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"10px",maxHeight:"300px",overflowY:"auto"},children:C.map(I=>i.jsxs("div",{style:{padding:"10px",backgroundColor:"#000000",borderRadius:"6px",border:`2px solid ${I.gradeColor}`,textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:I.name}),i.jsx("div",{style:{fontSize:"24px",fontWeight:700,color:I.gradeColor,marginBottom:"4px",textShadow:`0 0 8px ${I.gradeColor}60`},children:I.grade}),i.jsxs("div",{style:{fontSize:"10px",color:I.change>=0?"#4ade80":"#ef4444"},children:[I.change>=0?"":""," ",Math.abs(I.change*100).toFixed(1),"%"]})]},I.iso3))})]}),e.achievements&&e.achievements.length>0&&i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsxs("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:["Achievements Unlocked (",e.achievements.length,")"]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"12px"},children:e.achievements.map(I=>{const R=cg(I);return R?i.jsx(sg,{achievement:R,unlocked:!0},I):null})})]}),(j||e.lossConditionsMet&&e.lossConditionsMet.length>0)&&i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Outcome Assessment"}),j&&i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:`2px solid ${j.color}`,marginBottom:"12px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("span",{style:{fontSize:"20px"},children:""}),i.jsx("span",{style:{fontSize:"16px",fontWeight:600,color:j.color},children:j.name})]}),i.jsx("div",{style:{fontSize:"13px",color:"#aaa",lineHeight:"1.5"},children:j.message})]}),e.lossConditionsMet&&e.lossConditionsMet.length>0&&i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:e.lossConditionsMet.map(I=>{const R=Cu(I);return R?i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:`2px solid ${R.color}`,borderLeft:`4px solid ${R.color}`},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[i.jsx("span",{style:{fontSize:"20px"},children:""}),i.jsx("span",{style:{fontSize:"16px",fontWeight:600,color:R.color},children:R.name})]}),i.jsx("div",{style:{fontSize:"13px",color:"#aaa",lineHeight:"1.5"},children:R.message})]},I):null})})]}),i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Final Metrics"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(74, 222, 128, 0.2)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#888",marginBottom:"8px"},children:["Measured Success Index",i.jsx("button",{onClick:()=>x("success"),style:{background:"none",border:"none",color:"#4ade80",cursor:"pointer",fontSize:"12px",padding:"0",display:"flex",alignItems:"center",lineHeight:"1"},title:"Learn about Success Index",children:""})]}),i.jsxs("div",{style:{fontSize:"32px",fontWeight:600,color:"#4ade80"},children:[(E*100).toFixed(0),"%"]})]}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(251, 146, 60, 0.2)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#888",marginBottom:"8px"},children:["Governance Debt Index",i.jsx("button",{onClick:()=>x("debt"),style:{background:"none",border:"none",color:"#fb923c",cursor:"pointer",fontSize:"12px",padding:"0",display:"flex",alignItems:"center",lineHeight:"1"},title:"Learn about Debt Index",children:""})]}),i.jsxs("div",{style:{fontSize:"32px",fontWeight:600,color:"#fb923c"},children:[(g*100).toFixed(0),"%"]})]})]})]}),e.auditTrail.length>0&&i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Trajectory Over Time"}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px"},children:[i.jsxs("div",{style:{display:"flex",gap:"24px",marginBottom:"16px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"8px"},children:"Measured Success"}),i.jsx("div",{style:{height:"60px",position:"relative",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:e.auditTrail.map((I,R)=>{const D=(R+1)/Math.max(e.auditTrail.length,1),W=E*D;return i.jsx("div",{style:{position:"absolute",left:`${D*100}%`,bottom:`${W*100}%`,width:"4px",height:"4px",backgroundColor:"#4ade80",borderRadius:"50%",transform:"translate(-50%, 50%)"}},R)})})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"8px"},children:"Governance Debt"}),i.jsx("div",{style:{height:"60px",position:"relative",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:e.auditTrail.map((I,R)=>{const D=(R+1)/Math.max(e.auditTrail.length,1),W=g*D;return i.jsx("div",{style:{position:"absolute",left:`${D*100}%`,bottom:`${W*100}%`,width:"4px",height:"4px",backgroundColor:"#fb923c",borderRadius:"50%",transform:"translate(-50%, 50%)"}},R)})})]})]}),i.jsx("div",{style:{fontSize:"11px",color:"#666",fontStyle:"italic"},children:"Note: Trajectory is approximated from decision points. Full historical tracking would require state snapshots."})]})]}),i.jsxs("div",{style:{marginBottom:"32px",padding:"16px",backgroundColor:"#1a1d29",borderRadius:"8px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Irreversibility Analysis"}),i.jsxs("div",{style:{fontSize:"14px",color:"#aaa",lineHeight:"1.6"},children:[i.jsxs("div",{style:{marginBottom:"8px"},children:[i.jsx("strong",{children:"System Irreversibility:"})," ",(e.metrics.unmeasured.systemIrreversibility*100).toFixed(0),"%"]}),e.metrics.unmeasured.systemIrreversibility>.8?i.jsx("div",{style:{color:"#ef4444",marginTop:"8px"},children:" The system has become difficult to unwind. Changes would require significant coordination and may be prohibitively expensive."}):i.jsx("div",{style:{color:"#10b981",marginTop:"8px"},children:" The system maintains reasonable flexibility for future changes."})]})]}),A.length>0&&i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Top Decisions Increasing Welfare Debt"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:A.map((I,R)=>i.jsxs("div",{style:{padding:"12px",backgroundColor:"#111111",borderRadius:"6px"},children:[i.jsxs("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:["Turn ",I.turn,": ",I.nodeTitle]}),i.jsx("div",{style:{fontSize:"12px",color:"#aaa"},children:I.chosenLabel})]},R))})]}),h.length>0&&i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",margin:0},children:"Degraded Assumptions"}),i.jsx("button",{onClick:()=>r(!0),style:{padding:"6px 12px",fontSize:"11px",backgroundColor:"#111111",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer"},children:"View Timeline "})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:h.map((I,R)=>i.jsxs("div",{style:{padding:"12px",backgroundColor:"#111111",borderRadius:"6px",border:"1px solid rgba(251, 146, 60, 0.2)"},children:[i.jsxs("div",{style:{fontSize:"12px",color:"#fb923c",marginBottom:"4px"},children:["Strength: ",(I.strength*100).toFixed(0),"% (Created Turn ",I.createdTurn,")"]}),i.jsx("div",{style:{fontSize:"13px",color:"#aaa"},children:I.text})]},R))})]}),i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Decision Summary"}),i.jsxs("div",{style:{fontSize:"14px",color:"#aaa"},children:[i.jsxs("div",{children:["Total Decisions: ",e.auditTrail.length]}),i.jsxs("div",{children:["Total Turns: ",e.turn]}),i.jsxs("div",{children:["Final Phase: ",e.phaseId]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:" Research References"}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",maxHeight:"300px",overflowY:"auto"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"12px",fontStyle:"italic"},children:"Research papers and sources referenced throughout your decision-making process:"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.auditTrail.map((I,R)=>i.jsxs("div",{style:{padding:"12px",backgroundColor:"#000000",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{style:{fontSize:"12px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:["Turn ",I.turn,": ",I.nodeTitle]}),i.jsxs("div",{style:{fontSize:"11px",color:"#aaa"},children:["Decision: ",I.chosenLabel]})]},R)),e.auditTrail.length===0&&i.jsx("div",{style:{fontSize:"12px",color:"#666",fontStyle:"italic"},children:"No decisions made yet. Research references will appear here as you make decisions."})]})]})]})]}),n&&i.jsx(ju,{state:e,onClose:()=>r(!1)}),o&&i.jsx(ig,{onClose:()=>a(!1),currentScore:p,currentEntryId:u||void 0}),m&&i.jsx(Su,{type:m,onClose:()=>x(null)})]})}function ug({onClose:e}){const[t,n]=w.useState(0),r=[{title:"Welcome to the AI & Animal Welfare Governance Simulator",content:i.jsxs("div",{children:[i.jsxs("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:["This interactive tool helps you understand how governance decisions impact both ",i.jsx("strong",{children:"animal welfare"})," and ",i.jsx("strong",{children:"AI systems managing animals"})," over time. You'll make decisions that affect both ",i.jsx("strong",{children:"measured outcomes"})," (what organizations track) and ",i.jsx("strong",{children:"governance debt"})," (hidden long-term costs)."]}),i.jsxs("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:["AI systems are already managing millions of animalsmonitoring behavior, assessing welfare, optimizing environments. With welfare integrated into AI governance frameworks, you'll decide how to ensure these systems prioritize welfare rather than just efficiency. Navigate through 5 phases with decision points covering both animal welfare and AI governance. Each choice has consequences that compound over timethis simulator takes a ",i.jsx("strong",{children:"longtermist perspective"}),", exploring how today's decisions shape outcomes across decades and generations."]}),i.jsx("p",{style:{lineHeight:"1.6",fontSize:"13px",color:"#888",fontStyle:"italic"},children:"Part of the Electric Sheep/Futurekind ecosystem, exploring governance for both animals and AI systems across vast timescales."})]})},{title:Me("tutorial.globe"),content:i.jsxs("div",{children:[i.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:"The globe visualizes welfare status across regions. You can switch between three views:"}),i.jsxs("ul",{style:{marginLeft:"20px",lineHeight:"1.8"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Welfare Standards"})," - Current adoption levels"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Welfare Debt"})," - Accumulated compromises"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Enforcement"})," - Policy enforcement levels"]})]}),i.jsx("p",{style:{marginTop:"16px",lineHeight:"1.6"},children:"Hover over regions to see detailed values. Arcs show supply chains and regulatory flows. Rings indicate recent events like policy shifts or welfare incidents."})]})},{title:Me("tutorial.decisions"),content:i.jsxs("div",{children:[i.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:"For each decision node, you'll make choices about both animal welfare and AI systems managing animals:"}),i.jsxs("ul",{style:{marginLeft:"20px",lineHeight:"1.8"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Read the context"})," - Understand the situation, including how AI systems are involved"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review advisor recommendations"})," - Research-backed advice from experts on both animal welfare and AI governance"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hover over choices"})," - See predicted impact before selecting (affects both animals and AI systems)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Record your rationale"})," - Document your thinking about welfare and AI governance"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Note assumptions"})," - Track what you're assuming about animals, AI systems, or both"]})]}),i.jsx("p",{style:{marginTop:"16px",lineHeight:"1.6"},children:"Use keyboard shortcuts (1-5) to quickly select choices. Choices are randomized per node to prevent memorization."})]})},{title:Me("tutorial.metrics"),content:i.jsxs("div",{children:[i.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:"The metrics panel shows two categories, tracking both animal welfare and AI system impacts:"}),i.jsxs("ul",{style:{marginLeft:"20px",lineHeight:"1.8"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Measured Metrics"})," - What organizations typically track (efficiency, costs, incidents, welfare adoption)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Governance Debt"})," - Hidden costs that compound over time (debt, enforcement gaps, irreversibility, AI system lock-in)"]})]}),i.jsx("p",{style:{marginTop:"16px",lineHeight:"1.6"},children:"Hover over any metric to see explanations, real-world examples, and research citations. Sparklines show trends over time. Warning icons () indicate dangerous levelsincluding when AI systems are optimizing for wrong metrics or when welfare requirements aren't being met."})]})},{title:"Key Mechanics",content:i.jsxs("div",{children:[i.jsxs("ul",{style:{marginLeft:"20px",lineHeight:"1.8"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"AI Systems Managing Animals"})," - AI systems are already deployed, monitoring and making decisions. Your choices determine whether they optimize for welfare or efficiency"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Memory Decay"})," - Assumptions weaken over time unless reaffirmed (applies to both animal welfare and AI governance)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"System Irreversibility"})," - Some choices become locked as systems become harder to change, modeling long-term lock-in (including AI system dependencies)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Governance Debt"})," - Short-term compromises create long-term problems that compound over decades (affects both animals and AI oversight)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Case Studies"})," - Each decision links to real-world examples of animal welfare and AI governance"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Longtermist Framing"})," - Decisions are evaluated for their impact across generations, considering both animals and potentially sentient AI systems"]})]}),i.jsx("p",{style:{marginTop:"16px",lineHeight:"1.6"},children:"All your decisions are tracked throughout the simulation. At the end, you'll get a post-mortem report showing your trajectory and key insightsincluding how your choices created or avoided long-term lock-in for both animals and AI systems."})]})},{title:Me("tutorial.ready"),content:i.jsxs("div",{children:[i.jsx("p",{style:{marginBottom:"16px",lineHeight:"1.6"},children:"You're ready to begin! Remember:"}),i.jsxs("ul",{style:{marginLeft:"20px",lineHeight:"1.8"},children:[i.jsx("li",{children:'There are no "right" answers - explore different paths for both animal welfare and AI governance'}),i.jsx("li",{children:"Pay attention to both measured and unmeasured impacts (affects both animals and AI systems)"}),i.jsxs("li",{children:[i.jsx("strong",{children:"Consider the long-term consequences"})," - How will your choices affect future generations? What systems are you locking in? How will AI systems evolve?"]}),i.jsx("li",{children:"Review advisor recommendations for research-backed insights on both animals and AI"}),i.jsxs("li",{children:["Think about ",i.jsx("strong",{children:"irreversibility"})," - Which decisions create path dependencies that future generations can't easily undo? This includes AI system lock-in"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"AI systems are already managing animals"})," - Your decisions shape whether they prioritize welfare or efficiency"]})]}),i.jsx("p",{style:{marginTop:"16px",lineHeight:"1.6",fontStyle:"italic"},children:"This simulator is part of the Electric Sheep/Futurekind ecosystem - exploring governance for both animals and AI systems across vast timescales, considering the welfare of trillions of beings (animals and potentially sentient AI) across billions of years."})]})}],o=r[t],a=t===0,s=t===r.length-1;return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",padding:"32px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"24px",fontWeight:600,color:"#fff",margin:0},children:o.title}),i.jsx("button",{onClick:e,style:{padding:"8px 16px",backgroundColor:"transparent",color:"#888",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:Me("buttons.skip")})]}),i.jsx("div",{style:{fontSize:"14px",color:"#bbb",lineHeight:"1.6",marginBottom:"32px",minHeight:"200px"},children:o.content}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:r.map((c,l)=>i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:l===t?"#3b82f6":l<t?"#60a5fa":"rgba(255, 255, 255, 0.2)",transition:"background-color 0.2s"}},l))}),i.jsxs("div",{style:{textAlign:"center",fontSize:"12px",color:"#888",marginTop:"8px"},children:["Step ",t+1," of ",r.length]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"12px"},children:[i.jsx("button",{onClick:()=>n(Math.max(0,t-1)),disabled:a,style:{padding:"10px 20px",backgroundColor:a?"transparent":"#111111",color:a?"#666":"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:a?"not-allowed":"pointer",fontSize:"14px",opacity:a?.5:1},children:Me("buttons.previous")}),i.jsx("button",{onClick:()=>{s?e():n(t+1)},style:{padding:"10px 20px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:Me(s?"buttons.getStarted":"buttons.next")})]})]})})}const uo="savedScenarios",pg=10;function Wt(){try{const e=localStorage.getItem(uo);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Failed to load saved scenarios:",e),[]}}function fg(e,t,n){const r=Wt();r.length>=pg&&(r.sort((a,s)=>a.timestamp-s.timestamp),r.shift());const o={id:`save_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:t,timestamp:Date.now(),state:JSON.parse(JSON.stringify(e)),version:n};return r.push(o),localStorage.setItem(uo,JSON.stringify(r)),o.id}function mg(e){const n=Wt().find(r=>r.id===e);return n?n.state:null}function gg(e){const t=Wt(),n=t.filter(r=>r.id!==e);return n.length===t.length?!1:(localStorage.setItem(uo,JSON.stringify(n)),!0)}function hg(e,t){const n=Wt(),r=n.find(o=>o.id===e);return r?(r.name=t,localStorage.setItem(uo,JSON.stringify(n)),!0):!1}function xg({currentState:e,scenarioVersion:t,onLoad:n,onClose:r}){const[o,a]=w.useState([]),[s,c]=w.useState("save"),[l,d]=w.useState(""),[u,f]=w.useState(null),[m,x]=w.useState(""),[y,b]=w.useState(new Set);w.useEffect(()=>{a(Wt())},[]);const E=()=>{if(!l.trim()){alert("Please enter a name for this save");return}fg(e,l.trim(),t),a(Wt()),d(""),alert("Scenario saved!")},g=S=>{const j=mg(S);j?(n(j),r()):alert("Failed to load scenario")},h=S=>{confirm("Are you sure you want to delete this saved scenario?")&&(gg(S),a(Wt()),b(j=>{const k=new Set(j);return k.delete(S),k}))},p=S=>{m.trim()&&(hg(S,m.trim()),a(Wt()),f(null),x(""))},C=S=>{b(j=>{const k=new Set(j);return k.has(S)?k.delete(S):k.add(S),k})},v=S=>new Date(S).toLocaleString();return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},onClick:r,children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",padding:"24px"},onClick:S=>S.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0},children:"Save & Load Scenarios"}),i.jsx("button",{onClick:r,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px"},children:""})]}),i.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:["save","load","compare"].map(S=>i.jsx("button",{onClick:()=>c(S),style:{padding:"8px 16px",backgroundColor:s===S?"#111111":"transparent",color:"#fff",border:"none",borderBottom:s===S?"2px solid #fff":"2px solid transparent",cursor:"pointer",fontSize:"14px",fontWeight:s===S?600:400,textTransform:"capitalize"},children:S},S))}),s==="save"&&i.jsxs("div",{children:[i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",color:"#aaa",marginBottom:"8px"},children:"Save Name"}),i.jsx("input",{type:"text",value:l,onChange:S=>d(S.target.value),placeholder:"e.g., 'Conservative Approach' or 'Aggressive Welfare'",style:{width:"100%",padding:"10px",backgroundColor:"#111111",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"14px"},onKeyPress:S=>{S.key==="Enter"&&E()}})]}),i.jsx("button",{onClick:E,style:{width:"100%",padding:"12px",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save Current Scenario"}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:["Current turn: ",e.turn," | Phase: ",e.phaseId]})]}),s==="load"&&i.jsx("div",{children:o.length===0?i.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"No saved scenarios yet. Save your current progress to load it later."}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map(S=>i.jsxs("div",{style:{padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("div",{style:{flex:1},children:u===S.id?i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"text",value:m,onChange:j=>x(j.target.value),style:{flex:1,padding:"6px",backgroundColor:"#000000",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",fontSize:"12px"},onKeyPress:j=>{j.key==="Enter"&&p(S.id)}}),i.jsx("button",{onClick:()=>p(S.id),style:{padding:"6px 12px",backgroundColor:"#1a1a1a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""}),i.jsx("button",{onClick:()=>{f(null),x("")},style:{padding:"6px 12px",backgroundColor:"#1a1a1a",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:S.name}),i.jsxs("div",{style:{fontSize:"11px",color:"#888"},children:["Turn ",S.state.turn," | Phase: ",S.state.phaseId," | ",v(S.timestamp)]})]})}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{onClick:()=>g(S.id),style:{padding:"8px 16px",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:600},children:"Load"}),i.jsx("button",{onClick:()=>{f(S.id),x(S.name)},style:{padding:"8px 12px",backgroundColor:"transparent",color:"#aaa",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""}),i.jsx("button",{onClick:()=>h(S.id),style:{padding:"8px 12px",backgroundColor:"transparent",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:""})]})]},S.id))})}),s==="compare"&&i.jsx("div",{children:o.length<2?i.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Need at least 2 saved scenarios to compare."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginBottom:"16px",fontSize:"12px",color:"#aaa"},children:"Select 2-3 scenarios to compare side-by-side:"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"24px"},children:o.map(S=>i.jsx("div",{onClick:()=>{(y.has(S.id)||y.size<3)&&C(S.id)},style:{padding:"12px",backgroundColor:y.has(S.id)?"#111111":"#000000",borderRadius:"6px",border:y.has(S.id)?"2px solid #fff":"1px solid rgba(255, 255, 255, 0.1)",cursor:y.size>=3&&!y.has(S.id)?"not-allowed":"pointer",opacity:y.size>=3&&!y.has(S.id)?.5:1},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("input",{type:"checkbox",checked:y.has(S.id),onChange:()=>{},style:{width:"18px",height:"18px",cursor:"pointer"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff"},children:S.name}),i.jsxs("div",{style:{fontSize:"11px",color:"#888"},children:["Turn ",S.state.turn," | ",v(S.timestamp)]})]})]})},S.id))}),y.size>=2&&i.jsx(yg,{scenarios:o.filter(S=>y.has(S.id))})]})})]})})}function yg({scenarios:e,onClose:t}){return i.jsxs("div",{style:{marginTop:"24px",padding:"20px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:"Side-by-Side Comparison"}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${e.length}, 1fr)`,gap:"16px",overflowX:"auto"},children:e.map(n=>i.jsxs("div",{style:{minWidth:"200px"},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:n.name}),i.jsxs("div",{style:{fontSize:"11px",color:"#aaa",marginBottom:"8px"},children:["Turn: ",n.state.turn]}),i.jsxs("div",{style:{fontSize:"11px",color:"#aaa",marginBottom:"8px"},children:["Phase: ",n.state.phaseId]}),i.jsxs("div",{style:{fontSize:"11px",color:"#aaa",marginBottom:"12px"},children:["Decisions: ",n.state.auditTrail.length]}),i.jsxs("div",{style:{padding:"8px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"10px",color:"#888"},children:[i.jsxs("div",{children:["Measured Success: ",(n.state.metrics.measured.productionEfficiency*100).toFixed(0),"%"]}),i.jsxs("div",{children:["Welfare Debt: ",(n.state.metrics.unmeasured.welfareDebt*100).toFixed(0),"%"]})]})]},n.id))})]})}function Ga(e,t){const n={very_easy:1.4,easy:1.2,medium:1,hard:.8,very_hard:.6}[t];return{measured:{productionEfficiency:Math.min(1,e.measured.productionEfficiency*n),costPerUnit:Math.max(0,e.measured.costPerUnit*(2-n)),welfareIncidentRate:Math.max(0,e.measured.welfareIncidentRate*(2-n)),welfareStandardAdoption:Math.min(3,e.measured.welfareStandardAdoption*n)},unmeasured:{welfareDebt:Math.max(0,e.unmeasured.welfareDebt*(2-n)),enforcementGap:Math.max(0,e.unmeasured.enforcementGap*(2-n)),regulatoryCapture:Math.max(0,e.unmeasured.regulatoryCapture*(2-n)),sentienceKnowledgeGap:Math.max(0,e.unmeasured.sentienceKnowledgeGap*(2-n)),systemIrreversibility:Math.max(0,e.unmeasured.systemIrreversibility*(2-n))}}}function Ha(e,t){switch(t){case"optimistic":return{measured:{...e.measured,productionEfficiency:Math.min(1,e.measured.productionEfficiency*1.3),welfareStandardAdoption:Math.min(3,e.measured.welfareStandardAdoption*1.5),welfareIncidentRate:Math.max(0,e.measured.welfareIncidentRate*.7)},unmeasured:{...e.unmeasured,welfareDebt:Math.max(0,e.unmeasured.welfareDebt*.5),enforcementGap:Math.max(0,e.unmeasured.enforcementGap*.6),regulatoryCapture:Math.max(0,e.unmeasured.regulatoryCapture*.7)}};case"pessimistic":return{measured:{...e.measured,productionEfficiency:Math.max(0,e.measured.productionEfficiency*.7),welfareStandardAdoption:Math.max(0,e.measured.welfareStandardAdoption*.5),welfareIncidentRate:Math.min(1,e.measured.welfareIncidentRate*1.5)},unmeasured:{...e.unmeasured,welfareDebt:Math.min(1,e.unmeasured.welfareDebt*1.5),enforcementGap:Math.min(1,e.unmeasured.enforcementGap*1.4),regulatoryCapture:Math.min(1,e.unmeasured.regulatoryCapture*1.3)}};case"balanced":return{measured:{...e.measured,productionEfficiency:Math.min(1,e.measured.productionEfficiency*1.1),welfareStandardAdoption:Math.min(3,e.measured.welfareStandardAdoption*1.2)},unmeasured:{...e.unmeasured,welfareDebt:Math.max(0,e.unmeasured.welfareDebt*.9),enforcementGap:Math.max(0,e.unmeasured.enforcementGap*.9)}};case"crisis":return{measured:{...e.measured,productionEfficiency:Math.max(0,e.measured.productionEfficiency*.6),welfareStandardAdoption:Math.max(0,e.measured.welfareStandardAdoption*.4),welfareIncidentRate:Math.min(1,e.measured.welfareIncidentRate*1.8)},unmeasured:{...e.unmeasured,welfareDebt:Math.min(1,e.unmeasured.welfareDebt*1.8),enforcementGap:Math.min(1,e.unmeasured.enforcementGap*1.7),regulatoryCapture:Math.min(1,e.unmeasured.regulatoryCapture*1.6),systemIrreversibility:Math.min(1,e.unmeasured.systemIrreversibility*1.5)}};case"transition":return{measured:{...e.measured,productionEfficiency:Math.min(1,e.measured.productionEfficiency*1.15),welfareStandardAdoption:Math.min(3,e.measured.welfareStandardAdoption*1.3)},unmeasured:{...e.unmeasured,welfareDebt:Math.max(0,e.unmeasured.welfareDebt*.85),enforcementGap:Math.max(0,e.unmeasured.enforcementGap*.9),systemIrreversibility:Math.min(1,e.unmeasured.systemIrreversibility*1.2)}};case"innovation":return{measured:{...e.measured,productionEfficiency:Math.min(1,e.measured.productionEfficiency*1.25),welfareStandardAdoption:Math.min(3,e.measured.welfareStandardAdoption*1.4),welfareIncidentRate:Math.max(0,e.measured.welfareIncidentRate*.8)},unmeasured:{...e.unmeasured,welfareDebt:Math.max(0,e.unmeasured.welfareDebt*.7),enforcementGap:Math.max(0,e.unmeasured.enforcementGap*.75),sentienceKnowledgeGap:Math.min(1,e.unmeasured.sentienceKnowledgeGap*1.3)}};default:return e}}function Au(e){return{very_easy:"Very favorable starting conditions, ideal for learning and exploration",easy:"More favorable starting conditions, easier to achieve positive outcomes",medium:"Standard starting conditions, balanced challenge",hard:"Challenging starting conditions, requires careful decision-making",very_hard:"Extremely challenging conditions, maximum difficulty for experienced players"}[e]}function Mu(e){return{default:"Standard baseline metrics",optimistic:"Favorable conditions with higher welfare standards already in place",pessimistic:"Challenging conditions with significant welfare debt and enforcement gaps",balanced:"Moderate improvements across key metrics",crisis:"Crisis scenario: high welfare debt, low enforcement, system near collapse",transition:"Transition period: moderate improvements but high system irreversibility",innovation:"Innovation-driven: good metrics but knowledge gaps remain"}[e]}function vg({onStart:e,onClose:t}){const[n,r]=w.useState("medium"),[o,a]=w.useState("default"),[s,c]=w.useState(!1),[l,d]=w.useState(30);return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3,padding:"20px"},onClick:t,children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",maxWidth:"600px",width:"100%",padding:"32px"},onClick:u=>u.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0},children:"Scenario Configuration"}),i.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px"},children:""})]}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Difficulty Level"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:["very_easy","easy","medium","hard","very_hard"].map(u=>i.jsxs("label",{style:{padding:"12px",backgroundColor:n===u?"#111111":"#000000",border:`2px solid ${n===u?"#fff":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("input",{type:"radio",name:"difficulty",value:u,checked:n===u,onChange:()=>r(u),style:{width:"18px",height:"18px",cursor:"pointer"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",textTransform:"capitalize"},children:u.replace("_"," ")}),i.jsx("div",{style:{fontSize:"12px",color:"#aaa",marginTop:"4px"},children:Au(u)})]})]},u))})]}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Starting Condition"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:["default","optimistic","pessimistic","balanced"].map(u=>i.jsxs("label",{style:{padding:"12px",backgroundColor:o===u?"#111111":"#000000",border:`2px solid ${o===u?"#fff":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("input",{type:"radio",name:"startingCondition",value:u,checked:o===u,onChange:()=>a(u),style:{width:"18px",height:"18px",cursor:"pointer"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",textTransform:"capitalize"},children:u}),i.jsx("div",{style:{fontSize:"12px",color:"#aaa",marginTop:"4px"},children:Mu(u)})]})]},u))})]}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",marginBottom:"12px"},children:[i.jsx("input",{type:"checkbox",checked:s,onChange:u=>c(u.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),i.jsx("span",{style:{fontSize:"14px",fontWeight:600,color:"#fff"},children:"Enable Time Limit (Optional)"})]}),s&&i.jsxs("div",{style:{padding:"12px",backgroundColor:"#111111",borderRadius:"6px"},children:[i.jsx("label",{style:{display:"block",fontSize:"12px",color:"#aaa",marginBottom:"8px"},children:"Time Limit (minutes)"}),i.jsx("input",{type:"number",min:"5",max:"120",value:l,onChange:u=>d(Math.max(5,Math.min(120,parseInt(u.target.value)||30))),style:{width:"100%",padding:"8px",backgroundColor:"#000000",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",fontSize:"14px"}})]})]}),i.jsx("button",{onClick:()=>e({difficulty:n,startingCondition:o,timeLimit:s?l:void 0}),style:{width:"100%",padding:"14px",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:600},children:"Start Scenario"})]})})}function wg({isOpen:e,onClose:t,choiceLabel:n,nodeTitle:r,delta:o,previousState:a,currentState:s,citations:c=[]}){var m,x,y,b,E,g,h,p,C,v,S;if(w.useEffect(()=>{if(e){const j=setTimeout(()=>{t()},8e3);return()=>clearTimeout(j)}},[e,t]),!e)return null;const l=[];(m=o.metrics)!=null&&m.measured&&Object.entries(o.metrics.measured).forEach(([j,k])=>{const A=a.metrics.measured[j]||0,I=s.metrics.measured[j]||0;l.push({name:j.replace(/([A-Z])/g," $1").replace(/^./,R=>R.toUpperCase()),before:A,after:I,delta:I-A})}),(x=o.metrics)!=null&&x.unmeasured&&Object.entries(o.metrics.unmeasured).forEach(([j,k])=>{const A=a.metrics.unmeasured[j]||0,I=s.metrics.unmeasured[j]||0;l.push({name:j.replace(/([A-Z])/g," $1").replace(/^./,R=>R.toUpperCase()),before:A,after:I,delta:I-A})});const d=[];(y=o.map)!=null&&y.regionValues&&Object.entries(o.map.regionValues).forEach(([j,k])=>{const A=a.map.regionValues[j]||0,I=s.map.regionValues[j]||0,R={USA:"United States",GBR:"United Kingdom",FRA:"France",DEU:"Germany",CHN:"China",IND:"India",BRA:"Brazil",ZAF:"South Africa",AUS:"Australia",CAN:"Canada",MEX:"Mexico"};d.push({iso3:j,name:R[j]||j,before:A,after:I,delta:k})});const u=j=>`${(j*100).toFixed(1)}%`,f=j=>`${j>=0?"+":""}${(j*100).toFixed(1)}%`;return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:t,children:i.jsxs("div",{style:{backgroundColor:"#000000",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"24px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)"},onClick:j=>j.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"20px"},children:[i.jsxs("div",{children:[i.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:["Decision Impact: ",n]}),i.jsx("p",{style:{fontSize:"13px",color:"#aaa",margin:0},children:r})]}),i.jsx("button",{onClick:t,style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{marginBottom:"20px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px"},children:[i.jsxs("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:['Because you chose "',n,'", the following changes were applied:']}),l.length>0&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#888",marginBottom:"8px",textTransform:"uppercase"},children:"Metrics"}),l.map((j,k)=>i.jsxs("div",{style:{marginBottom:"8px",fontSize:"12px",color:"#ccc"},children:[i.jsxs("span",{style:{fontWeight:500},children:[j.name,":"]})," ",i.jsx("span",{style:{color:"#888"},children:u(j.before)}),"  ",i.jsx("span",{style:{color:j.delta>=0?"#4ade80":"#ef4444",fontWeight:500},children:u(j.after)})," ",i.jsxs("span",{style:{color:j.delta>=0?"#4ade80":"#ef4444"},children:["(",f(j.delta),")"]})]},k))]}),d.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#888",marginBottom:"8px",textTransform:"uppercase"},children:"Regional Impact"}),d.map((j,k)=>i.jsxs("div",{style:{marginBottom:"8px",fontSize:"12px",color:"#ccc"},children:[i.jsxs("span",{style:{fontWeight:500},children:[j.name,":"]})," ",i.jsx("span",{style:{color:"#888"},children:u(j.before)}),"  ",i.jsx("span",{style:{color:j.delta>=0?"#4ade80":"#ef4444",fontWeight:500},children:u(j.after)})," ",i.jsxs("span",{style:{color:j.delta>=0?"#4ade80":"#ef4444"},children:["(",f(j.delta),")"]})]},k))]}),(((E=(b=o.map)==null?void 0:b.activateArcs)==null?void 0:E.length)||((h=(g=o.map)==null?void 0:g.spawnRings)==null?void 0:h.length))>0&&i.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#888",marginBottom:"8px",textTransform:"uppercase"},children:"Global Events Triggered"}),((C=(p=o.map)==null?void 0:p.activateArcs)==null?void 0:C.length)>0&&i.jsxs("div",{style:{fontSize:"12px",color:"#ccc",marginBottom:"4px"},children:[" ",o.map.activateArcs.length," supply chain flow(s) activated"]}),((S=(v=o.map)==null?void 0:v.spawnRings)==null?void 0:S.length)>0&&i.jsxs("div",{style:{fontSize:"12px",color:"#ccc"},children:[" ",o.map.spawnRings.length," event(s) spawned on globe"]})]})]}),c.length>0&&i.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#111111",borderRadius:"8px"},children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#888",marginBottom:"8px"},children:"Research References:"}),c.map((j,k)=>i.jsx("div",{style:{fontSize:"11px",color:"#60a5fa",marginBottom:"4px"},children:i.jsx("a",{href:j,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",textDecoration:"underline"},children:j})},k))]}),i.jsx("div",{style:{marginTop:"16px",fontSize:"11px",color:"#666",fontStyle:"italic"},children:"This impact breakdown is based on the scenario's deterministic model. See the audit trail for full details."})]})})}function bg({onClose:e}){return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:e,children:i.jsxs("div",{style:{backgroundColor:"#000000",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"32px",maxWidth:"700px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)"},onClick:t=>t.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"24px",fontWeight:600,color:"#fff",margin:0},children:"Credits & Acknowledgments"}),i.jsx("button",{onClick:e,style:{background:"transparent",border:"none",color:"#fff",fontSize:"28px",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{fontSize:"14px",color:"#ccc",lineHeight:"1.8"},children:[i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("h3",{style:{fontSize:"18px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Animal Welfare Governance Simulator"}),i.jsx("p",{style:{marginBottom:"8px"},children:"An educational tool designed to illustrate how governance decisions impact animal welfare outcomes through interactive simulation."}),i.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("p",{style:{marginBottom:"8px",fontSize:"13px",color:"#fff",fontWeight:500},children:"Created and Developed By:"}),i.jsx("p",{style:{marginBottom:"4px",fontSize:"14px",color:"#60a5fa",fontWeight:500},children:"John Flack"}),i.jsx("p",{style:{fontSize:"12px",color:"#888",fontStyle:"italic"},children:"Application Builder & Author"})]}),i.jsx("p",{style:{fontSize:"12px",color:"#888",fontStyle:"italic",marginTop:"16px"},children:"Version 1.0.0"})]}),i.jsxs("div",{style:{marginBottom:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Technologies & Libraries"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",listStyle:"disc"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"React"})," - UI framework"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"react-globe.gl"})," - 3D globe visualization"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Three.js"})," - 3D graphics rendering"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Vite"})," - Build tool and dev server"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"TypeScript"})," - Type-safe JavaScript"]})]})]}),i.jsxs("div",{style:{marginBottom:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Data Sources & Research"}),i.jsx("p",{style:{marginBottom:"12px"},children:"This simulator draws on research and data from:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",listStyle:"disc",marginBottom:"12px"},children:[i.jsx("li",{children:"Cambridge Declaration on Consciousness (2012)"}),i.jsx("li",{children:"Five Domains Model (Mellor & Beausoleil, 2015)"}),i.jsx("li",{children:"Animal Protection Index (World Animal Protection)"}),i.jsx("li",{children:"WOAH/OIE Animal Welfare Standards"}),i.jsx("li",{children:"FAO Livestock Efficiency Metrics"}),i.jsx("li",{children:"EU Animal Welfare Directives"}),i.jsx("li",{children:"Academic research on animal welfare science, policy, and economics"})]}),i.jsx("p",{style:{fontSize:"12px",color:"#888",fontStyle:"italic"},children:"Full citations available in advisor recommendations and metric tooltips throughout the application."})]}),i.jsxs("div",{style:{marginBottom:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Geographic Data"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",listStyle:"disc"},children:[i.jsx("li",{children:"World GeoJSON data for country boundaries"}),i.jsx("li",{children:"Country welfare data compiled from public sources and research"})]})]}),i.jsxs("div",{style:{marginBottom:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Educational Purpose"}),i.jsx("p",{style:{marginBottom:"8px"},children:"This simulator is designed for educational purposes to help users understand:"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",listStyle:"disc"},children:[i.jsx("li",{children:"The complexity of animal welfare governance decisions"}),i.jsx("li",{children:"Trade-offs between different policy approaches"}),i.jsx("li",{children:"How decisions can have cascading effects on welfare outcomes"}),i.jsx("li",{children:"The importance of enforcement, transparency, and evidence-based policy"})]}),i.jsx("p",{style:{marginTop:"12px",fontSize:"12px",color:"#888",fontStyle:"italic"},children:"This tool should not be used as the sole basis for policy decisions. Real-world outcomes are influenced by many factors not captured in this simplified model."})]}),i.jsxs("div",{style:{paddingTop:"24px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Acknowledgments"}),i.jsx("p",{style:{marginBottom:"8px"},children:"Special thanks to the researchers, organizations, and advocates working to improve animal welfare worldwide. This tool aims to make their insights more accessible and actionable."}),i.jsx("p",{style:{fontSize:"12px",color:"#888",fontStyle:"italic",marginTop:"16px"},children:"For questions, feedback, or to report issues, please refer to the validation disclaimer in the application."})]})]})]})})}const Sg=[{advisorId:"ADV_ETHICS",choiceIndex:0,reasoning:"Broad recognition of sentience aligns with current scientific understanding across vertebrates and selected invertebrates. Research from Animal Sentience journal and the Cambridge Declaration on Consciousness supports this comprehensive approach. Narrow recognition creates an arbitrary moral boundary that may be difficult to expand later.",researchCitations:[{text:"Cambridge Declaration on Consciousness (2012): Non-human animals have the neuroanatomical, neurochemical, and neurophysiological substrates of conscious states",url:"https://fcmconference.org/img/CambridgeDeclarationOnConsciousness.pdf",sourceType:"academic",year:2012,lastVerified:"2026-01-19",archiveUrl:"https://web.archive.org/web/20200101000000*/https://fcmconference.org/img/CambridgeDeclarationOnConsciousness.pdf"},{text:"Animal Sentience Journal: Evidence for sentience in cephalopods and decapod crustaceans",url:"https://www.wellbeingintlstudiesrepository.org/animsent/",sourceType:"peer-reviewed",lastVerified:"2026-01-19"},{text:"Universal Declaration on Animal Welfare: Recognition of sentience as foundational principle",url:"https://www.worldanimalprotection.ca/our-work/global-animal-protection/universal-declaration/",sourceType:"ngo",year:2007,lastVerified:"2026-01-19"}],benefits:["Establishes comprehensive legal foundation for welfare protections","Aligns with scientific consensus on animal consciousness","Prevents future need to expand recognition piecemeal"],concerns:["May face stronger political resistance","Requires enforcement capacity for broader scope"]},{advisorId:"ADV_WELFARE_SCI",choiceIndex:0,reasoning:"Broad recognition is supported by extensive research on sentience across taxa. The Five Domains Model applies across vertebrates and selected invertebrates, suggesting welfare considerations should not be arbitrarily limited. Narrow recognition may exclude species with demonstrated cognitive and emotional capacities.",researchCitations:[{text:"Five Domains Model (Mellor & Beausoleil, 2015): Comprehensive welfare assessment framework applicable across species",doi:"10.1016/j.applanim.2015.08.006"},{text:"Animal-Based Welfare Indicators (MDPI, 2023): Evidence-based indicators support broad recognition",url:"https://www.mdpi.com/journal/animals/special_issues/welfare_indicators",sourceType:"peer-reviewed",year:2023,lastVerified:"2026-01-19"},{text:"Comparative cognition research: Sentience evidence across vertebrate and invertebrate taxa",url:"https://www.cell.com/trends/cognitive-sciences/fulltext/S1364-6613(20)30019-2",sourceType:"peer-reviewed",doi:"10.1016/j.tics.2020.01.002",year:2020,lastVerified:"2026-01-19"}],benefits:["Evidence-based approach to sentience recognition","Supports comprehensive welfare science","Reduces knowledge gaps about animal needs"],concerns:["Implementation complexity increases with scope","Requires scientific consensus on invertebrate sentience"]},{advisorId:"ADV_ECONOMIST",choiceIndex:1,reasoning:"Narrow recognition reduces immediate implementation costs while establishing essential legal foundation. Gradual expansion can follow once enforcement systems are established. This approach balances welfare goals with economic and political feasibility.",researchCitations:["Cost-benefit analysis of welfare standards (Nature Scientific Reports, 2021): Implementation costs scale with scope","Production economics research: Gradual adoption reduces market disruption","Policy implementation studies: Phased approaches improve compliance rates"],benefits:["Lower initial implementation costs","Easier political acceptance","Allows gradual system development"],concerns:["May limit future protections if expansion is difficult","Could create path dependency favoring narrow scope"]},{advisorId:"ADV_POLICY_EXP",choiceIndex:0,reasoning:"Broad recognition provides stronger legal foundation for future welfare standards. While implementation may be more complex, the comprehensive framework reduces need for later legal amendments. International standards (WOAH/OIE) increasingly support broad recognition.",researchCitations:["Animal Protection Index methodology: Legal recognition as foundational indicator","WOAH/OIE welfare standards: International trend toward broad recognition","Policy framework studies: Comprehensive frameworks reduce amendment needs"],benefits:["Stronger legal foundation for welfare standards","Alignment with international standards","Reduces future regulatory gaps"],concerns:["Requires robust enforcement capacity","May face implementation delays"]}],Cg=[{advisorId:"ADV_WELFARE_SCI",choiceIndex:0,reasoning:"Mandatory baseline standards with enforcement are essential for measurable welfare improvements. Voluntary standards have shown limited effectiveness in improving actual welfare outcomes. Research shows that mandatory standards with proper enforcement lead to better welfare indicators.",researchCitations:["Animal-Based Welfare Indicators (MDPI, 2023): Mandatory standards correlate with better welfare outcomes","Five Domains Model: Comprehensive standards address all welfare domains","Welfare assessment studies: Voluntary programs show inconsistent compliance"],benefits:["Measurable welfare improvements","Consistent application across producers","Evidence-based standards"],concerns:["Requires significant enforcement capacity","Higher implementation costs"]},{advisorId:"ADV_POLICY_EXP",choiceIndex:0,reasoning:"Mandatory standards with government oversight provide accountability and consistency. The Animal Protection Index shows that countries with mandatory standards and enforcement capacity score higher on welfare outcomes. Voluntary systems often lack transparency and accountability.",researchCitations:["Animal Protection Index (World Animal Protection): Mandatory standards correlate with better welfare scores","Regulatory effectiveness studies: Government oversight improves compliance","Policy implementation research: Mandatory frameworks reduce regulatory capture"],benefits:["Accountability and transparency","Consistent enforcement","Reduces regulatory capture"],concerns:["Requires government capacity building","May face industry resistance"]},{advisorId:"ADV_ECONOMIST",choiceIndex:1,reasoning:"Voluntary industry-led standards can achieve faster adoption with lower enforcement costs. Market-driven certification schemes can incentivize compliance through consumer preferences. However, this approach requires strong market signals and transparency.",researchCitations:["Market-based welfare standards (GLOBALG.A.P.): Consumer-driven adoption","Certification economics: Voluntary programs can achieve scale","Supply chain research: Market incentives for welfare improvements"],benefits:["Faster market adoption","Lower government enforcement costs","Market-driven innovation"],concerns:["Risk of regulatory capture","Inconsistent enforcement","Dependent on consumer demand"]},{advisorId:"ADV_INDUSTRY",choiceIndex:1,reasoning:"Voluntary standards allow industry to develop practical solutions that balance welfare with production realities. Industry-led initiatives can adapt more quickly to local conditions and production systems. Mandatory standards may be too rigid for diverse production contexts.",researchCitations:["Industry best practices: Flexibility in implementation","Production system diversity: One-size-fits-all standards may not work","Industry innovation: Voluntary programs can drive rapid improvement"],benefits:["Industry buy-in and cooperation","Flexibility for diverse systems","Faster implementation"],concerns:["May prioritize efficiency over welfare","Lacks independent oversight","Inconsistent standards"]}],jg=[{advisorId:"ADV_WELFARE_SCI",choiceIndex:0,reasoning:"Strict welfare standards for intensive operations address the most significant welfare challenges. Research shows that intensive systems can achieve good welfare with proper standards, space, and enrichment. The Five Domains Model provides framework for comprehensive improvements.",researchCitations:["Five Domains Model: Welfare improvements possible in intensive systems","Space and enrichment research: Critical factors for welfare in intensive systems","Welfare assessment studies: Intensive systems can meet high welfare standards"],benefits:["Addresses largest welfare challenges","Evidence-based improvements","Comprehensive welfare framework"],concerns:["Significant cost increases","Requires major system changes"]},{advisorId:"ADV_ECONOMIST",choiceIndex:1,reasoning:"Gradual voluntary improvements with incentives balance welfare goals with economic realities. Sudden strict standards could disrupt food supply and increase costs dramatically. Incentive-based approaches can achieve improvements while maintaining market stability.",researchCitations:["Economic impact of welfare standards: Gradual transitions reduce market disruption","Incentive-based programs: Cost-effective welfare improvements","Market stability research: Phased approaches maintain supply"],benefits:["Maintains market stability","Lower immediate costs","Industry cooperation"],concerns:["Slower welfare improvements","May not address core issues","Dependent on incentives"]},{advisorId:"ADV_POLICY_EXP",choiceIndex:0,reasoning:"Strict standards with enforcement are necessary to address welfare issues in intensive systems. Voluntary approaches have historically failed to achieve meaningful improvements. Policy research shows that mandatory standards with clear timelines are most effective.",researchCitations:["Policy effectiveness studies: Mandatory standards achieve better outcomes","Regulatory enforcement: Clear standards with penalties improve compliance","Historical analysis: Voluntary programs show limited impact"],benefits:["Predictable compliance","Clear enforcement framework","Measurable progress"],concerns:["Enforcement capacity required","Industry resistance","Implementation timeline"]}],kg=[{advisorId:"ADV_WELFARE_SCI",choiceIndex:0,reasoning:"Heavy investment in alternative proteins offers the potential to dramatically reduce animal suffering while maintaining food security. Research shows that cultured meat and plant-based alternatives can provide nutrition without traditional welfare concerns. This represents a paradigm shift in food production.",researchCitations:["Alternative protein research: Potential to reduce animal use","Cultured meat studies: Welfare benefits of cell-based production","Nutritional analysis: Plant-based alternatives meet dietary needs"],benefits:["Potential to eliminate many welfare concerns","Scalable production","Reduces welfare debt"],concerns:["Technology still developing","May create new dependencies","Uncertain long-term impacts"]},{advisorId:"ADV_ECONOMIST",choiceIndex:0,reasoning:"Heavy investment positions the economy at the forefront of a growing market. Alternative proteins are projected to capture significant market share. Early investment can create competitive advantages and reduce long-term costs through economies of scale.",researchCitations:["Market projections: Alternative proteins growing market share","Investment economics: Early mover advantages","Cost reduction: Economies of scale in production"],benefits:["Market leadership position","Economic growth potential","Long-term cost reductions"],concerns:["High initial investment","Market uncertainty","Technology risks"]},{advisorId:"ADV_INDUSTRY",choiceIndex:1,reasoning:"Moderate support allows for market testing and gradual transition. Maintaining traditional systems ensures food security while alternative proteins develop. This balanced approach reduces risk and allows industry to adapt gradually.",researchCitations:["Market transition studies: Gradual shifts reduce disruption","Food security research: Maintaining multiple production systems","Industry adaptation: Phased transitions improve outcomes"],benefits:["Reduces market disruption","Maintains food security","Allows gradual industry adaptation"],concerns:["Slower welfare improvements","May miss market opportunities","Maintains welfare debt"]}],Tg=[{advisorId:"ADV_CONSERVATION",choiceIndex:0,reasoning:"Strict protection with limited sustainable use balances animal welfare with ecosystem health. Research shows that well-managed protected areas support both wildlife welfare and biodiversity. Sustainable use frameworks must prioritize welfare alongside conservation goals.",researchCitations:["Wildlife conservation research: Protected areas support welfare and biodiversity","Sustainable use frameworks: Balancing welfare and conservation","Ecosystem health studies: Welfare and conservation are complementary"],benefits:["Protects wildlife welfare","Maintains ecosystem health","Long-term conservation outcomes"],concerns:["Requires strong enforcement","May limit local livelihoods","Enforcement capacity needed"]},{advisorId:"ADV_CONSERVATION",choiceIndex:1,reasoning:"Sustainable use with welfare oversight can support both conservation and local communities. Research from IPBES shows that community-managed sustainable use can achieve conservation goals while respecting welfare. This approach requires robust oversight and monitoring.",researchCitations:["IPBES Sustainable Use Assessment: Community-managed systems can work","Conservation and welfare: Integrated approaches","Community-based conservation: Local participation improves outcomes"],benefits:["Supports local communities","Achieves conservation goals","Community participation"],concerns:["Requires oversight capacity","Welfare standards must be maintained","Monitoring challenges"]}],Eg={N01_SENTIENCE_RECOGNITION:Sg,N02_FARM_STANDARDS:Cg,N03_FACTORY_FARMING:jg,N04_ALTERNATIVE_PROTEINS:kg,N05_WILDLIFE_CONSERVATION:Tg};function Ig({scenario:e,onClose:t}){const[n,r]=w.useState(null),[o,a]=w.useState(null),[s,c]=w.useState({min:"",max:""}),[l,d]=w.useState(""),[u,f]=w.useState(!1),m=w.useMemo(()=>{const v=[];return e.phases.forEach(S=>{S.nodes.forEach(j=>{j.caseStudies&&j.caseStudies.forEach((k,A)=>{if(k.url){const I=Ho(k.sourceType||xn(k.url));v.push({id:`case-${j.id}-${A}`,title:k.title,type:"case-study",category:I,url:k.url,doi:k.doi,year:k.year,sourceType:k.sourceType||xn(k.url),description:k.description,nodeId:j.id,lastVerified:k.lastVerified,archiveUrl:k.archiveUrl})}})})}),Object.entries(bu).forEach(([S,j])=>{if(j.researchUrl){const k=Ho(xn(j.researchUrl));v.push({id:`metric-${S}`,title:j.researchCitation||j.label,type:"metric",category:k,url:j.researchUrl,sourceType:xn(j.researchUrl),description:j.description,metricKey:S})}}),Object.entries(Eg).forEach(([S,j])=>{j.forEach((k,A)=>{k.researchCitations&&k.researchCitations.forEach((I,R)=>{var W;const D=typeof I=="string"?{text:I}:I;if(D.url||D.doi){const $=Ho(D.sourceType||(D.doi?"peer-reviewed":xn(D.url||"")));v.push({id:`advisor-${S}-${A}-${R}`,title:D.text,type:"advisor",category:$,url:D.url,doi:D.doi,year:(W=D.year)==null?void 0:W.toString(),sourceType:D.sourceType||(D.doi?"peer-reviewed":xn(D.url||"")),description:D.abstract,nodeId:S,lastVerified:D.lastVerified,archiveUrl:D.archiveUrl})}})})}),v},[e]),x=w.useMemo(()=>{let v=m;if(n&&(v=v.filter(S=>S.category===n)),o&&(v=v.filter(S=>S.sourceType===o)),s.min&&(v=v.filter(S=>S.year?parseInt(S.year)>=parseInt(s.min):!1)),s.max&&(v=v.filter(S=>S.year?parseInt(S.year)<=parseInt(s.max):!1)),l.trim()){const S=l.toLowerCase();v=v.filter(j=>{var k,A;return j.title.toLowerCase().includes(S)||((k=j.description)==null?void 0:k.toLowerCase().includes(S))||((A=j.url)==null?void 0:A.toLowerCase().includes(S))})}return v.sort((S,j)=>S.category!==j.category?S.category.localeCompare(j.category):S.year&&j.year&&S.year!==j.year?parseInt(j.year)-parseInt(S.year):S.title.localeCompare(j.title))},[m,n,o,s,l]),y=w.useMemo(()=>{const v=new Set(m.map(S=>S.category));return Array.from(v).sort()},[m]),b=w.useMemo(()=>{const v=new Set(m.map(S=>S.sourceType).filter(Boolean));return Array.from(v).sort()},[m]),E=w.useMemo(()=>{const v=m.map(S=>S.year?parseInt(S.year):null).filter(S=>S!==null);return v.length===0?{min:2e3,max:2026}:{min:Math.min(...v),max:Math.max(...v)}},[m]),g=()=>{const v=x.map((A,I)=>{const R=`entry${I+1}`,D=A.title.replace(/[{}]/g,""),W=A.sourceType==="government"?"Government":"Various",$=A.year||"n.d.",_=A.url||"",V=A.doi?`doi = {${A.doi}},
`:"";return`@misc{${R},
  title = {${D}},
  author = {${W}},
  year = {${$}},
  ${V}url = {${_}},
  note = {${A.category}}
}`}).join(`

`),S=new Blob([v],{type:"text/plain"}),j=URL.createObjectURL(S),k=document.createElement("a");k.href=j,k.download="inheritance-bibliography.bib",k.click(),URL.revokeObjectURL(j),f(!1)},h=()=>{const v=x.map(A=>{const I=A.title.replace(/\.$/,""),R=A.year||"(n.d.)",D=A.url?` Retrieved from ${A.url}`:"",W=A.doi?` https://doi.org/${A.doi}`:"";return`${I}. (${R}).${D}${W}`}).join(`

`),S=new Blob([v],{type:"text/plain"}),j=URL.createObjectURL(S),k=document.createElement("a");k.href=j,k.download="inheritance-bibliography-apa.txt",k.click(),URL.revokeObjectURL(j),f(!1)},p=()=>{const v=x.map(A=>{const I=A.title.replace(/\.$/,""),R=A.year||"n.d.",D=A.url||"";return`"${I}." ${A.category}, ${R}. Web. ${new Date().getFullYear()}. <${D}>`}).join(`.

`),S=new Blob([v],{type:"text/plain"}),j=URL.createObjectURL(S),k=document.createElement("a");k.href=j,k.download="inheritance-bibliography-mla.txt",k.click(),URL.revokeObjectURL(j),f(!1)},C=()=>{const v=x.map(A=>{const I=A.title,R=A.year||"n.d.",D=A.url?`[${A.url}](${A.url})`:"",W=A.doi?`  [DOI: ${A.doi}](https://doi.org/${A.doi})`:"",$=A.lastVerified?`   Verified ${A.lastVerified}`:"",_=A.archiveUrl?`  [Archived](${A.archiveUrl})`:"",V=A.sourceType?`  _${A.sourceType.replace("-"," ")}_`:"";return`- **${I}** (${R})${V}${D}${W}${$}${_}`}).join(`

`),S=new Blob([v],{type:"text/markdown"}),j=URL.createObjectURL(S),k=document.createElement("a");k.href=j,k.download="inheritance-bibliography.md",k.click(),URL.revokeObjectURL(j),f(!1)};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:i.jsxs("div",{style:{backgroundColor:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.12)",maxWidth:"900px",width:"100%",maxHeight:"90vh",display:"flex",flexDirection:"column",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)"},children:[i.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsx("h2",{style:{fontSize:"24px",fontWeight:600,color:"#fff",margin:0,marginBottom:"8px"},children:"Research Bibliography"}),i.jsxs("div",{style:{fontSize:"13px",color:"#888",marginTop:"4px"},children:[m.length," sources  ",y.length," categories"]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>f(!u),style:{padding:"8px 16px",backgroundColor:"rgba(96, 165, 250, 0.2)",color:"#fff",border:"1px solid rgba(96, 165, 250, 0.3)",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Export "}),u&&i.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"8px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",padding:"8px",minWidth:"150px",zIndex:10001},children:[i.jsx("button",{onClick:g,style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",textAlign:"left"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:"BibTeX"}),i.jsx("button",{onClick:h,style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",textAlign:"left"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:"APA"}),i.jsx("button",{onClick:p,style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",textAlign:"left"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:"MLA"}),i.jsx("div",{style:{height:"1px",background:"linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%)",margin:"4px 0"}}),i.jsx("button",{onClick:C,style:{width:"100%",padding:"8px 12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",textAlign:"left"},onMouseEnter:v=>v.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:v=>v.currentTarget.style.backgroundColor="transparent",children:"Markdown"})]})]}),i.jsx("button",{onClick:t,style:{padding:"8px 16px",backgroundColor:"transparent",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Close"})]})]}),i.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255, 255, 255, 0.08)",display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[i.jsx("input",{type:"text",placeholder:"Search sources...",value:l,onChange:v=>d(v.target.value),style:{flex:1,minWidth:"200px",padding:"10px 14px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"#fff",fontSize:"14px",outline:"none"}}),i.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[i.jsx("button",{onClick:()=>{r(null),a(null),c({min:"",max:""})},style:{padding:"8px 14px",fontSize:"12px",fontWeight:600,backgroundColor:n===null&&o===null&&!s.min&&!s.max?"rgba(96, 165, 250, 0.2)":"transparent",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer"},children:"All"}),y.map(v=>i.jsx("button",{onClick:()=>r(v===n?null:v),style:{padding:"8px 14px",fontSize:"12px",fontWeight:600,backgroundColor:n===v?"rgba(96, 165, 250, 0.2)":"transparent",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer"},children:v},v))]}),b.length>0&&i.jsxs("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center",marginTop:"8px"},children:[i.jsx("span",{style:{fontSize:"12px",color:"#888",marginRight:"4px"},children:"Source Type:"}),b.map(v=>i.jsx("button",{onClick:()=>a(v===o?null:v),style:{padding:"6px 12px",fontSize:"11px",fontWeight:600,backgroundColor:o===v?"rgba(139, 92, 246, 0.2)":"transparent",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",cursor:"pointer",textTransform:"capitalize"},children:v.replace("-"," ")},v))]}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginTop:"8px"},children:[i.jsx("span",{style:{fontSize:"12px",color:"#888"},children:"Year:"}),i.jsx("input",{type:"number",placeholder:"Min",value:s.min,onChange:v=>c({...s,min:v.target.value}),min:E.min,max:E.max,style:{width:"80px",padding:"6px 10px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#fff",fontSize:"12px",outline:"none"}}),i.jsx("span",{style:{fontSize:"12px",color:"#888"},children:"to"}),i.jsx("input",{type:"number",placeholder:"Max",value:s.max,onChange:v=>c({...s,max:v.target.value}),min:E.min,max:E.max,style:{width:"80px",padding:"6px 10px",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#fff",fontSize:"12px",outline:"none"}})]})]}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:"20px 24px"},children:x.length===0?i.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888",fontSize:"14px"},children:"No sources found matching your criteria."}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:x.map((v,S)=>{const k=(S>0?x[S-1].category:null)!==v.category;return i.jsxs("div",{children:[k&&i.jsx("div",{style:{fontSize:"12px",fontWeight:600,color:"#60a5fa",textTransform:"uppercase",letterSpacing:"0.5px",marginTop:S>0?"24px":0,marginBottom:"12px"},children:v.category}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[i.jsx("h3",{style:{fontSize:"15px",fontWeight:600,color:"#fff",margin:0,flex:1},children:v.title}),v.sourceType&&i.jsx("span",{style:{fontSize:"10px",padding:"4px 8px",backgroundColor:Rg(v.sourceType),color:"#fff",borderRadius:"4px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",marginLeft:"12px"},children:v.sourceType.replace("-"," ")})]}),v.description&&i.jsx("div",{style:{fontSize:"13px",color:"#aaa",marginBottom:"10px",lineHeight:"1.5"},children:v.description}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center",fontSize:"12px",color:"#888"},children:[v.year&&i.jsx("span",{children:v.year}),v.url&&i.jsx("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",textDecoration:"underline",cursor:"pointer"},children:"View Source "}),v.doi&&i.jsxs("a",{href:`https://doi.org/${v.doi}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",textDecoration:"underline",cursor:"pointer"},children:["DOI: ",v.doi," "]}),v.lastVerified&&i.jsxs("span",{style:{fontSize:"11px",color:"#4ade80"},children:[" Verified ",v.lastVerified]}),v.archiveUrl&&i.jsx("a",{href:v.archiveUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#888",textDecoration:"underline",cursor:"pointer",fontSize:"11px"},children:"Archived "})]})]})]},v.id)})})})]})})}function xn(e){return e.includes("gov.uk")||e.includes("whitehouse.gov")||e.includes("ec.europa.eu")||e.includes("legislation.gov")||e.includes("aphis.usda.gov")||e.includes("agriculture.gov.au")?"government":e.includes("nature.com")||e.includes("springer.com")||e.includes("cell.com")||e.includes("mdpi.com")||e.includes("doi.org")||e.includes(".edu")?"peer-reviewed":e.includes("worldanimalprotection")||e.includes("humanesociety.org")||e.includes("awionline.org")||e.includes("hsi.org")?"ngo":e.includes(".com")&&!e.includes("nature.com")&&!e.includes("springer.com")?"industry":"other"}function Ho(e){switch(e){case"government":return"Government Sources";case"peer-reviewed":case"academic":return"Academic Papers";case"ngo":return"NGO Reports";case"industry":return"Industry Sources";default:return"Other"}}function Rg(e){switch(e){case"government":return"rgba(59, 130, 246, 0.3)";case"peer-reviewed":case"academic":return"rgba(139, 92, 246, 0.3)";case"ngo":return"rgba(34, 197, 94, 0.3)";case"industry":return"rgba(251, 146, 60, 0.3)";default:return"rgba(107, 114, 128, 0.3)"}}const Du=[{id:"the_primatologist",title:"The Primatologist",description:"A renowned researcher whose groundbreaking work on animal cognition has revolutionized our understanding of sentience. Their insights help bridge the gap between scientific knowledge and policy implementation.",quote:"Understanding animal minds is the foundation of ethical governance.",icon:"https://randomuser.me/api/portraits/women/65.jpg",triggerCondition:(e,t)=>{const n=["research","knowledge","understanding","study","science","sentience"];return t.filter(o=>n.some(a=>o.rationale.toLowerCase().includes(a)||o.chosenLabel.toLowerCase().includes(a))).length>=3&&e.metrics.unmeasured.sentienceKnowledgeGap<.3},effect:{metrics:{unmeasured:{sentienceKnowledgeGap:-.15}}}},{id:"the_welfare_engineer",title:"The Welfare Engineer",description:"An innovator who designs humane systems that balance welfare with practical production needs. Their engineering solutions demonstrate that ethical standards need not compromise efficiency.",quote:"Good design serves both animals and producers.",icon:"https://randomuser.me/api/portraits/men/75.jpg",triggerCondition:(e,t)=>{const n=t.filter(o=>o.chosenLabel.toLowerCase().includes("welfare")||o.chosenLabel.toLowerCase().includes("standard")),r=e.metrics.measured.productionEfficiency>.5;return n.length>=3&&r},effect:{metrics:{measured:{welfareStandardAdoption:.2,productionEfficiency:.05}}}},{id:"the_ethicist",title:"The Ethicist",description:"A philosopher whose work on animal ethics has shaped modern welfare frameworks. Their moral reasoning helps balance competing ethical considerations and reduce accumulated welfare debt.",quote:"Ethics without action is mere contemplation.",icon:"https://randomuser.me/api/portraits/women/44.jpg",triggerCondition:(e,t)=>{const n=["ethic","moral","right","wrong","value","principle"];return t.filter(o=>n.some(a=>o.rationale.toLowerCase().includes(a)||o.chosenLabel.toLowerCase().includes(a))).length>=3&&e.metrics.unmeasured.welfareDebt<.4},effect:{metrics:{unmeasured:{welfareDebt:-.12}}}},{id:"the_conservationist",title:"The Conservationist",description:"An advocate whose research on ecosystem health has influenced conservation policy. Their holistic approach connects individual welfare with broader environmental and biodiversity concerns.",quote:"Every animal is part of a larger system.",icon:"https://randomuser.me/api/portraits/men/81.jpg",triggerCondition:(e,t)=>{const n=["ecosystem","wildlife","conservation","biodiversity","environment"];return t.filter(o=>n.some(a=>o.rationale.toLowerCase().includes(a)||o.chosenLabel.toLowerCase().includes(a))).length>=2},effect:{metrics:{unmeasured:{welfareDebt:-.08},measured:{welfareStandardAdoption:.1}}}},{id:"the_policy_architect",title:"The Policy Architect",description:"A governance expert who designs effective regulatory frameworks. Their systematic approach helps bridge the gap between policy intent and practical enforcement.",quote:"Good policy is policy that works.",icon:"https://randomuser.me/api/portraits/women/68.jpg",triggerCondition:(e,t)=>{const n=["enforcement","regulation","policy","governance","compliance","oversight"];return t.filter(o=>n.some(a=>o.rationale.toLowerCase().includes(a)||o.chosenLabel.toLowerCase().includes(a))).length>=3&&e.metrics.unmeasured.enforcementGap<.3},effect:{metrics:{unmeasured:{enforcementGap:-.12,regulatoryCapture:-.05}}}},{id:"the_transition_specialist",title:"The Transition Specialist",description:"An expert in systemic change who helps organizations transition to higher welfare standards without disrupting operations. Their practical experience guides smooth transformations.",quote:"Change is inevitable; transition is a choice.",icon:"https://randomuser.me/api/portraits/men/92.jpg",triggerCondition:(e,t)=>{const n=["transition","alternative","change","transform","adapt"],r=t.filter(s=>n.some(c=>s.rationale.toLowerCase().includes(c)||s.chosenLabel.toLowerCase().includes(c))),o=e.metrics.unmeasured.welfareDebt<.3,a=e.metrics.unmeasured.systemIrreversibility<.4;return r.length>=2&&o&&a},effect:{metrics:{unmeasured:{welfareDebt:-.1,systemIrreversibility:-.08}}}}];function zg(e){var n;const t=((n=e.greatPeople)==null?void 0:n.map(r=>r.id))||[];for(const r of Du)if(!t.includes(r.id)&&r.triggerCondition(e,e.auditTrail))return r;return null}function sc(e,t){var r;const n={...e};return t.effect.metrics&&(t.effect.metrics.measured&&(n.metrics.measured={...n.metrics.measured,...t.effect.metrics.measured},n.metrics.measured.productionEfficiency=Math.max(0,Math.min(1,n.metrics.measured.productionEfficiency)),n.metrics.measured.costPerUnit=Math.max(0,Math.min(1,n.metrics.measured.costPerUnit)),n.metrics.measured.welfareIncidentRate=Math.max(0,Math.min(1,n.metrics.measured.welfareIncidentRate)),n.metrics.measured.welfareStandardAdoption=Math.max(0,n.metrics.measured.welfareStandardAdoption)),t.effect.metrics.unmeasured&&(n.metrics.unmeasured={...n.metrics.unmeasured,...t.effect.metrics.unmeasured},Object.keys(n.metrics.unmeasured).forEach(o=>{const a=n.metrics.unmeasured[o];n.metrics.unmeasured[o]=Math.max(0,Math.min(1,a))}))),(r=t.effect.map)!=null&&r.regionValues&&(n.map.regionValues={...n.map.regionValues},Object.entries(t.effect.map.regionValues).forEach(([o,a])=>{n.map.regionValues[o]=Math.max(0,Math.min(1,(n.map.regionValues[o]||0)+a))})),n}function Ag({state:e}){const t=e.greatPeople||[],[n,r]=w.useState(null),[o,a]=w.useState(null);if(t.length===0)return null;const s=l=>Du.find(d=>d.id===l)||null,c=l=>{var u,f;const d=[];return(u=l.effect.metrics)!=null&&u.measured&&Object.entries(l.effect.metrics.measured).forEach(([m,x])=>{const y=x>0?"+":"";d.push(`${m}: ${y}${(x*100).toFixed(0)}%`)}),(f=l.effect.metrics)!=null&&f.unmeasured&&Object.entries(l.effect.metrics.unmeasured).forEach(([m,x])=>{const y=x>0?"+":"";d.push(`${m}: ${y}${(x*100).toFixed(0)}%`)}),d};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"16px"},children:[i.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:"#fff",margin:"0 0 12px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Great People"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map(l=>{const d=s(l.id),u=d==null?void 0:d.icon,f=d?c(d):[];return i.jsxs("div",{style:{padding:"10px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.08)",display:"flex",gap:"10px",alignItems:"center",cursor:"help",position:"relative"},onMouseEnter:m=>{if(d&&f.length>0){const x=m.currentTarget.getBoundingClientRect();r(l.id),a({x:x.right+10,y:x.top})}},onMouseLeave:()=>{r(null),a(null)},children:[u&&i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",overflow:"hidden",flexShrink:0,border:"2px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 2px 6px rgba(255, 255, 255, 0.1)"},children:i.jsx("img",{src:u,alt:l.title,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"},onError:m=>{const x=m.target;x.style.display="none"}})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:l.title}),i.jsxs("div",{style:{fontSize:"11px",color:"#aaa",lineHeight:"1.4"},children:["Unlocked on Turn ",l.unlockedTurn]})]})]},l.id)})})]}),n&&o&&(()=>{const l=s(n);if(!l)return null;const d=c(l);return i.jsxs("div",{style:{position:"fixed",left:`${o.x}px`,top:`${o.y}px`,backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",maxWidth:"280px",zIndex:1e4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:l.title}),i.jsx("div",{style:{fontSize:"11px",color:"#bbb",lineHeight:"1.5",marginBottom:"8px"},children:l.description}),d.length>0&&i.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"11px",fontWeight:600,color:"#4ade80",marginBottom:"4px"},children:"Abilities:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"10px",color:"#aaa",lineHeight:"1.6"},children:d.map((u,f)=>i.jsx("li",{children:u},f))})]})]})})()]})}const Bs=[{id:"global_welfare_accord",name:"Global Welfare Accord",description:"A landmark international agreement establishing universal welfare standards. This accord represents unprecedented cooperation between nations.",completionCondition:e=>{const t=Object.values(e.map.regionValues).filter(r=>r>.7).length,n=Object.values(e.map.regionValues).reduce((r,o)=>r+o,0)/Object.values(e.map.regionValues).length;return t>=5&&n>.65},effect:{metrics:{unmeasured:{enforcementGap:-.1}},map:{regionValues:{USA:.05,CAN:.05,MEX:.05,GBR:.05,FRA:.05,DEU:.05,IND:.05,CHN:.05,BRA:.05,ZAF:.05,AUS:.05}}},location:{lat:46.2,lng:2.2,country:"France"},icon:"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=200&h=200&fit=crop"},{id:"sentience_recognition_treaty",name:"Sentience Recognition Treaty",description:"A global treaty formally recognizing animal sentience as a foundation for all welfare policy. This treaty has been adopted by major powers worldwide.",completionCondition:e=>e.metrics.unmeasured.sentienceKnowledgeGap<.2&&e.metrics.measured.welfareStandardAdoption>1.5,effect:{metrics:{unmeasured:{sentienceKnowledgeGap:-.15},measured:{welfareStandardAdoption:.3}}},location:{lat:52.5,lng:13.4,country:"Germany"},icon:"https://images.unsplash.com/photo-1519834785169-98be25ec3f84?w=200&h=200&fit=crop"},{id:"alternative_protein_revolution",name:"Alternative Protein Revolution",description:"A breakthrough in alternative protein technologies that dramatically reduces reliance on traditional animal agriculture while maintaining nutrition.",completionCondition:e=>e.metrics.unmeasured.welfareDebt<.25&&e.metrics.measured.productionEfficiency>.7&&e.metrics.measured.costPerUnit<.35,effect:{metrics:{unmeasured:{welfareDebt:-.12,systemIrreversibility:-.1},measured:{productionEfficiency:.1,costPerUnit:-.05}}},location:{lat:37.8,lng:-122.4,country:"USA"},icon:"https://images.unsplash.com/photo-1556911220-bff31c812fba?w=200&h=200&fit=crop"},{id:"enforcement_network",name:"Global Enforcement Network",description:"An international network of enforcement agencies working together to ensure welfare standards are met across borders.",completionCondition:e=>e.metrics.unmeasured.enforcementGap<.2&&e.metrics.unmeasured.regulatoryCapture<.25&&e.map.activeArcs.length>=10,effect:{metrics:{unmeasured:{enforcementGap:-.12,regulatoryCapture:-.08}}},location:{lat:50.8,lng:4.4,country:"Belgium"},icon:"https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=200&h=200&fit=crop"},{id:"welfare_research_institute",name:"International Welfare Research Institute",description:"A premier research institution dedicated to advancing our understanding of animal welfare science and its practical applications.",completionCondition:e=>e.metrics.unmeasured.sentienceKnowledgeGap<.2&&e.metrics.measured.welfareStandardAdoption>1.2&&e.auditTrail.filter(t=>t.rationale.toLowerCase().includes("research")||t.rationale.toLowerCase().includes("science")).length>=4,effect:{metrics:{unmeasured:{sentienceKnowledgeGap:-.1},measured:{welfareStandardAdoption:.2}}},location:{lat:52.2,lng:.1,country:"UK"},icon:"https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=200&h=200&fit=crop"},{id:"transition_fund",name:"Global Transition Fund",description:"A massive international fund supporting the transition to higher welfare systems, reducing financial barriers for producers.",completionCondition:e=>e.metrics.measured.costPerUnit<.4&&e.metrics.unmeasured.welfareDebt<.3&&e.metrics.measured.productionEfficiency>.6,effect:{metrics:{measured:{costPerUnit:-.08,productionEfficiency:.05},unmeasured:{welfareDebt:-.08}}},location:{lat:40.7,lng:-74,country:"USA"},icon:"https://images.unsplash.com/photo-1541872703-74c5e44368f9?w=200&h=200&fit=crop"}];function Mg(e){const t=[],n=e.completedWonders||[];for(const r of Bs)!n.includes(r.id)&&r.completionCondition(e)&&t.push(r.id);return t}function Dg(e){return Bs.find(t=>t.id===e)||null}function Pg(e,t){var r;const n={...e};return t.effect.metrics&&(t.effect.metrics.measured&&(n.metrics.measured={...n.metrics.measured,...t.effect.metrics.measured},n.metrics.measured.productionEfficiency=Math.max(0,Math.min(1,n.metrics.measured.productionEfficiency)),n.metrics.measured.costPerUnit=Math.max(0,Math.min(1,n.metrics.measured.costPerUnit)),n.metrics.measured.welfareIncidentRate=Math.max(0,Math.min(1,n.metrics.measured.welfareIncidentRate)),n.metrics.measured.welfareStandardAdoption=Math.max(0,n.metrics.measured.welfareStandardAdoption)),t.effect.metrics.unmeasured&&(n.metrics.unmeasured={...n.metrics.unmeasured,...t.effect.metrics.unmeasured},Object.keys(n.metrics.unmeasured).forEach(o=>{const a=n.metrics.unmeasured[o];n.metrics.unmeasured[o]=Math.max(0,Math.min(1,a))}))),(r=t.effect.map)!=null&&r.regionValues&&(n.map.regionValues={...n.map.regionValues},Object.entries(t.effect.map.regionValues).forEach(([o,a])=>{n.map.regionValues[o]=Math.max(0,Math.min(1,(n.map.regionValues[o]||0)+a))})),n}function Lg({state:e}){const t=e.completedWonders||[],[n,r]=w.useState(null),[o,a]=w.useState(null);if(t.length===0)return null;const s=l=>Bs.find(d=>d.id===l)||null,c=l=>{var u,f,m;const d=[];if((u=l.effect.metrics)!=null&&u.measured&&Object.entries(l.effect.metrics.measured).forEach(([x,y])=>{const b=y>0?"+":"";d.push(`${x}: ${b}${(y*100).toFixed(0)}%`)}),(f=l.effect.metrics)!=null&&f.unmeasured&&Object.entries(l.effect.metrics.unmeasured).forEach(([x,y])=>{const b=y>0?"+":"";d.push(`${x}: ${b}${(y*100).toFixed(0)}%`)}),(m=l.effect.map)!=null&&m.regionValues){const x=Object.keys(l.effect.map.regionValues).length;x>0&&d.push(`Regional boost: +${(l.effect.map.regionValues[Object.keys(l.effect.map.regionValues)[0]]*100).toFixed(0)}% to ${x} regions`)}return d};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"16px"},children:[i.jsx("h3",{style:{fontSize:"14px",fontWeight:600,color:"#fff",margin:"0 0 12px 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Wonders"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.map(l=>{const d=s(l);if(!d)return null;const u=d.icon,f=c(d);return i.jsxs("div",{style:{padding:"10px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.08)",display:"flex",gap:"10px",alignItems:"center",cursor:"help",position:"relative"},onMouseEnter:m=>{if(f.length>0){const x=m.currentTarget.getBoundingClientRect();r(l),a({x:x.right+10,y:x.top})}},onMouseLeave:()=>{r(null),a(null)},children:[u&&i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"6px",overflow:"hidden",flexShrink:0,border:"2px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 2px 6px rgba(255, 255, 255, 0.1)"},children:i.jsx("img",{src:u,alt:d.name,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"},onError:m=>{const x=m.target;x.style.display="none"}})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:d.name}),d.location.country&&i.jsx("div",{style:{fontSize:"11px",color:"#aaa",lineHeight:"1.4"},children:d.location.country})]})]},l)})})]}),n&&o&&(()=>{const l=s(n);if(!l)return null;const d=c(l);return i.jsxs("div",{style:{position:"fixed",left:`${o.x}px`,top:`${o.y}px`,backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",maxWidth:"280px",zIndex:1e4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#fff",marginBottom:"8px"},children:l.name}),i.jsx("div",{style:{fontSize:"11px",color:"#bbb",lineHeight:"1.5",marginBottom:"8px"},children:l.description}),d.length>0&&i.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"11px",fontWeight:600,color:"#4ade80",marginBottom:"4px"},children:"Global Effect:"}),i.jsx("ul",{style:{margin:0,paddingLeft:"18px",fontSize:"10px",color:"#aaa",lineHeight:"1.6"},children:d.map((u,f)=>i.jsx("li",{children:u},f))})]})]})})()]})}function lc({onSelect:e}){const[t,n]=w.useState("medium"),[r,o]=w.useState("default");return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:i.jsxs("div",{style:{backgroundColor:"#111111",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"32px",maxWidth:"600px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[i.jsx("h2",{style:{fontSize:"24px",fontWeight:700,color:"#fff",margin:"0 0 8px 0",textAlign:"center"},children:"Configure Your Scenario"}),i.jsx("p",{style:{fontSize:"14px",color:"#aaa",margin:"0 0 32px 0",textAlign:"center"},children:"Choose your difficulty level and starting conditions to customize your governance challenge"}),i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("label",{style:{display:"block",fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Difficulty Level"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:["very_easy","easy","medium","hard","very_hard"].map(a=>i.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:t===a?"rgba(96, 165, 250, 0.2)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${t===a?"#60a5fa":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[i.jsx("input",{type:"radio",name:"difficulty",value:a,checked:t===a,onChange:s=>n(s.target.value),style:{marginRight:"12px",cursor:"pointer"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",textTransform:"capitalize",marginBottom:"4px"},children:a.replace("_"," ")}),i.jsx("div",{style:{fontSize:"12px",color:"#aaa"},children:Au(a)})]})]},a))})]}),i.jsxs("div",{style:{marginBottom:"32px"},children:[i.jsx("label",{style:{display:"block",fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Starting Condition"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:["default","optimistic","pessimistic","balanced","crisis","transition","innovation"].map(a=>i.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:r===a?"rgba(96, 165, 250, 0.2)":"rgba(255, 255, 255, 0.05)",border:`2px solid ${r===a?"#60a5fa":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[i.jsx("input",{type:"radio",name:"startingCondition",value:a,checked:r===a,onChange:s=>o(s.target.value),style:{marginRight:"12px",cursor:"pointer"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",textTransform:"capitalize",marginBottom:"4px"},children:a}),i.jsx("div",{style:{fontSize:"12px",color:"#aaa"},children:Mu(a)})]})]},a))})]}),i.jsx("button",{onClick:()=>e(t,r),style:{width:"100%",padding:"16px",backgroundColor:"#60a5fa",color:"#000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#3b82f6"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#60a5fa"},children:"Start Scenario"})]})})}function Wg({type:e,title:t,description:n,onClose:r,autoCloseDelay:o=5e3}){const[a,s]=w.useState(!0),[c,l]=w.useState(!1);if(w.useEffect(()=>{const f=setTimeout(()=>{l(!0),setTimeout(()=>{s(!1),r()},300)},o);return()=>clearTimeout(f)},[o,r]),!a)return null;const u={great_person:{bg:"rgba(74, 222, 128, 0.15)",border:"rgba(74, 222, 128, 0.4)",glow:"rgba(74, 222, 128, 0.3)",text:"#4ade80"},wonder:{bg:"rgba(251, 146, 60, 0.15)",border:"rgba(251, 146, 60, 0.4)",glow:"rgba(251, 146, 60, 0.3)",text:"#fb923c"},phase_transition:{bg:"rgba(96, 165, 250, 0.15)",border:"rgba(96, 165, 250, 0.4)",glow:"rgba(96, 165, 250, 0.3)",text:"#60a5fa"}}[e];return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
        @keyframes slideDown {
          from {
            transform: translateY(-100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        @keyframes glow {
          0%, 100% {
            box-shadow: 0 0 20px ${u.glow}, 0 0 40px ${u.glow};
          }
          50% {
            box-shadow: 0 0 30px ${u.glow}, 0 0 60px ${u.glow};
          }
        }
      `}),i.jsx("div",{style:{position:"fixed",top:"60px",left:"50%",transform:"translateX(-50%)",zIndex:15e3,maxWidth:"600px",width:"90%",animation:"slideDown 0.3s ease-out",opacity:c?0:1,transition:"opacity 0.3s ease-out",pointerEvents:"auto"},children:i.jsx("div",{style:{backgroundColor:u.bg,border:`2px solid ${u.border}`,borderRadius:"12px",padding:"16px 20px",boxShadow:`0 4px 20px ${u.glow}, 0 0 40px ${u.glow}`,animation:"glow 2s ease-in-out infinite",backdropFilter:"blur(10px)"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{fontSize:"16px",fontWeight:700,color:u.text,marginBottom:"4px",textTransform:"uppercase",letterSpacing:"1px"},children:[e==="great_person"&&"Great Person Unlocked",e==="wonder"&&"Wonder Completed",e==="phase_transition"&&"Phase Transition"]}),i.jsx("div",{style:{fontSize:"18px",fontWeight:600,color:"#fff",marginBottom:"6px"},children:t}),i.jsx("div",{style:{fontSize:"13px",color:"#ccc",lineHeight:"1.5"},children:n})]}),i.jsx("button",{onClick:()=>{l(!0),setTimeout(()=>{s(!1),r()},300)},style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:.7,transition:"opacity 0.2s"},onMouseEnter:f=>f.currentTarget.style.opacity="1",onMouseLeave:f=>f.currentTarget.style.opacity="0.7",children:""})]})})})]})}function Ng({onClose:e}){const[t,n]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>n(!0),100)},[]);const r=()=>{n(!1),setTimeout(e,300)};return i.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.9)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",opacity:t?1:0,transition:"opacity 0.3s ease"},children:i.jsxs("div",{style:{maxWidth:"700px",padding:"40px",backgroundColor:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)"},children:[i.jsx("div",{style:{fontSize:"28px",fontWeight:700,color:"#fff",marginBottom:"12px",textAlign:"center"},children:"AI & Animal Welfare Governance Simulator"}),i.jsx("div",{style:{fontSize:"13px",color:"#888",marginBottom:"30px",textAlign:"center",fontStyle:"italic"},children:"An exploratory tool for understanding governance tradeoffs across decades and generations"}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"rgba(96, 165, 250, 0.1)",borderRadius:"8px",border:"1px solid rgba(96, 165, 250, 0.3)"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#60a5fa",marginBottom:"12px"},children:Me("welcome.whatThisIs")}),i.jsxs("div",{style:{fontSize:"14px",color:"#ddd",lineHeight:"1.6"},children:["This is a ",i.jsx("strong",{children:"scenario exploration tool"}),", not a game or prediction. You'll make governance decisions about both animal welfare and AI systems managing animalsfrom factory farming to wildlife conservation, from AI sentience recognition to AI welfare governanceand observe how measured successes can hide accumulating risks. Every decision you make has consequences that extend far into the future, modeling how governance choices compound over decades and generations."]})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"rgba(139, 92, 246, 0.1)",borderRadius:"8px",border:"1px solid rgba(139, 92, 246, 0.3)"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#8b5cf6",marginBottom:"12px"},children:"A Longtermist Perspective"}),i.jsxs("div",{style:{fontSize:"14px",color:"#ddd",lineHeight:"1.6"},children:["This simulator explores how governance decisions compound over decades. ",i.jsx("strong",{children:"System irreversibility"})," and ",i.jsx("strong",{children:"governance debt"})," model long-term lock-inhow choices made today constrain options for future generations. As part of the ",i.jsx("strong",{children:"Electric Sheep/Futurekind ecosystem"}),", we're exploring how to build governance systems that remain flexible and ethical across vast timescales, considering the welfare of trillions of beingsboth animals and potentially sentient AI systemsacross billions of years."]})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"rgba(251, 146, 60, 0.1)",borderRadius:"8px",border:"1px solid rgba(251, 146, 60, 0.3)"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#fb923c",marginBottom:"12px"},children:Me("welcome.keyConcept")}),i.jsxs("div",{style:{fontSize:"14px",color:"#ddd",lineHeight:"1.6"},children:["Like technical debt in software, ",i.jsx("strong",{children:"governance debt"})," accumulates when short-term decisions create long-term problems. Welfare standards may improve while enforcement gaps, regulatory capture, and system irreversibility quietly grow."]})]}),i.jsxs("div",{style:{marginBottom:"30px",padding:"20px",backgroundColor:"rgba(168, 85, 247, 0.1)",borderRadius:"8px",border:"1px solid rgba(168, 85, 247, 0.3)"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#a855f7",marginBottom:"12px"},children:`There's No "Winning"`}),i.jsxs("div",{style:{fontSize:"14px",color:"#ddd",lineHeight:"1.6"},children:[`Every choice involves tradeoffs. The goal isn't to find the "right" answer, but to `,i.jsx("strong",{children:"understand how different values and priorities lead to different outcomes"}),". Explore, reflect, and learn."]})]}),i.jsxs("div",{style:{marginBottom:"30px",padding:"16px",backgroundColor:"rgba(74, 222, 128, 0.05)",borderRadius:"8px",border:"1px solid rgba(74, 222, 128, 0.2)",fontSize:"12px",color:"#aaa",lineHeight:"1.5"},children:[i.jsx("strong",{style:{color:"#4ade80"},children:Me("welcome.longtermistScope")})," Expanded scenarios including wild animal suffering, invertebrate welfare (shrimp/insects), AI systems managing animals, and potential AI sentience recognition. Explore the full scope of welfare ethics across billions of years and trillions of beingsboth animals and potentially sentient AI systemsunderstanding how today's governance choices shape the welfare landscape for future generations."]}),i.jsx("button",{onClick:r,style:{width:"100%",padding:"16px",backgroundColor:"#60a5fa",color:"#000",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:700,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#3b82f6",o.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="#60a5fa",o.currentTarget.style.transform="translateY(0)"},children:Me("buttons.begin")}),i.jsx("div",{style:{marginTop:"20px",fontSize:"11px",color:"#666",textAlign:"center"},children:Me("welcome.footer")})]})})}function Bg({choiceLabel:e,measuredChanges:t,unmeasuredChanges:n,onClose:r}){const[o,a]=w.useState(!1);w.useEffect(()=>{setTimeout(()=>a(!0),100);const l=setTimeout(()=>{s()},8e3);return()=>clearTimeout(l)},[]);const s=()=>{a(!1),setTimeout(r,300)},c=l=>l.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase());return i.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",maxWidth:"400px",padding:"20px",backgroundColor:"#0a0a0a",borderRadius:"10px",border:"1px solid rgba(96, 165, 250, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)",zIndex:5e3,opacity:o?1:0,transform:o?"translateY(0)":"translateY(20px)",transition:"all 0.3s ease"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#60a5fa"},children:" Impact Feedback"}),i.jsx("button",{onClick:s,style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"18px",padding:"0",lineHeight:"1"},children:""})]}),i.jsxs("div",{style:{fontSize:"13px",color:"#ddd",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("strong",{children:"You chose:"})," ",e]}),t.length>0&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#4ade80",fontWeight:600,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Measured Outcomes"}),t.map((l,d)=>i.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:[i.jsxs("div",{style:{fontSize:"12px",color:l.direction==="up"?"#4ade80":"#f87171",fontWeight:600,marginBottom:"4px"},children:[l.direction==="up"?"":""," ",c(l.metric),": ",(Math.abs(l.change)*100).toFixed(0),"%"]}),i.jsx("div",{style:{fontSize:"11px",color:"#aaa",lineHeight:"1.4"},children:l.reason})]},d))]}),n.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#fb923c",fontWeight:600,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Hidden Risks (Governance Debt)"}),n.map((l,d)=>i.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"rgba(251, 146, 60, 0.05)",borderRadius:"6px",border:"1px solid rgba(251, 146, 60, 0.1)"},children:[i.jsxs("div",{style:{fontSize:"12px",color:l.direction==="up"?"#fb923c":"#4ade80",fontWeight:600,marginBottom:"4px"},children:[l.direction==="up"?" ":" "," ",c(l.metric),": ",(Math.abs(l.change)*100).toFixed(0),"%"]}),i.jsx("div",{style:{fontSize:"11px",color:"#aaa",lineHeight:"1.4"},children:l.reason})]},d))]}),t.length===0&&n.length===0&&i.jsx("div",{style:{fontSize:"12px",color:"#888",fontStyle:"italic",textAlign:"center",padding:"12px"},children:"No significant metric changes from this decision"})]})}const Fg=5,Fs="savedRuns";function _g(e){const t=Ua(),n=cc(e.metrics.measured),r=dc(e.metrics.unmeasured),o=e.auditTrail.slice(0,3).map(m=>m.chosenLabel),a=Array.from(new Set(e.auditTrail.map(m=>m.phaseId).filter(Boolean))),s=e.auditTrail.map(m=>m.chosenLabel),c=e.auditTrail.map(m=>m.nodeId),l=e.auditTrail.filter(m=>m.metricsSnapshot).map(m=>({turn:m.turn,successIndex:cc(m.metricsSnapshot.measured),debtIndex:dc(m.metricsSnapshot.unmeasured),measured:m.metricsSnapshot.measured,unmeasured:m.metricsSnapshot.unmeasured})),d={turn:e.turn,successIndex:n,debtIndex:r,measured:e.metrics.measured,unmeasured:e.metrics.unmeasured};(l.length===0||l[l.length-1].turn!==e.turn)&&l.push(d);const f=[{id:`run_${Date.now()}`,timestamp:Date.now(),finalTurn:e.turn,successIndex:n,debtIndex:r,keyChoices:o,completedPhases:a,allChoices:s,nodeSequence:c,metricsHistory:l,auditTrail:e.auditTrail},...t].slice(0,Fg);localStorage.setItem(Fs,JSON.stringify(f))}function Ua(){try{const e=localStorage.getItem(Fs);return e?JSON.parse(e):[]}catch{return[]}}function Og(){localStorage.removeItem(Fs)}function cc(e){const{welfareStandardAdoption:t,productionEfficiency:n,welfareIncidentRate:r,costPerUnit:o}=e,a=t/3,s=1-r,c=1-o;return a*.4+n*.2+s*.3+c*.1}function dc(e){const{welfareDebt:t,enforcementGap:n,regulatoryCapture:r,sentienceKnowledgeGap:o,systemIrreversibility:a}=e;return t*.3+n*.2+r*.2+o*.15+a*.15}function Gg({currentState:e,onClose:t}){const[n,r]=w.useState(!1),[o,a]=w.useState([]);w.useEffect(()=>{setTimeout(()=>r(!0),100),a(Ua())},[]);const s=()=>{r(!1),setTimeout(t,300)},c=()=>{_g(e),a(Ua())},l=()=>{confirm("Clear all saved runs?")&&(Og(),a([]))},d=lt(e.metrics.measured),u=ye(e.metrics.unmeasured);return i.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",opacity:n?1:0,transition:"opacity 0.3s ease"},children:i.jsxs("div",{style:{maxWidth:"800px",width:"90%",padding:"30px",backgroundColor:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)",maxHeight:"80vh",overflowY:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("div",{style:{fontSize:"22px",fontWeight:700,color:"#fff"},children:"Run Comparison"}),i.jsx("button",{onClick:s,style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"24px",padding:"0",lineHeight:"1"},children:""})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"rgba(96, 165, 250, 0.1)",borderRadius:"8px",border:"2px solid rgba(96, 165, 250, 0.3)"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#60a5fa",fontWeight:600,marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Run"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Turn"}),i.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"#fff"},children:e.turn})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Success Index"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#4ade80"},children:[(d*100).toFixed(0),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Debt Index"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#fb923c"},children:[(u*100).toFixed(0),"%"]})]})]}),i.jsx("button",{onClick:c,style:{marginTop:"16px",width:"100%",padding:"10px",backgroundColor:"#60a5fa",color:"#000",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:"Save This Run"})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"#fff"},children:["Previous Runs (",o.length,"/5)"]}),o.length>0&&i.jsx("button",{onClick:l,style:{padding:"6px 12px",backgroundColor:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"11px",fontWeight:600,cursor:"pointer"},children:"Clear All"})]}),o.length===0?i.jsx("div",{style:{padding:"32px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",textAlign:"center",color:"#888",fontSize:"13px",fontStyle:"italic"},children:"No saved runs yet. Save your current run to compare different paths."}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:o.map((f,m)=>{const x=f.successIndex-d,y=f.debtIndex-u,b=new Date(f.timestamp);return i.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsxs("div",{style:{fontSize:"12px",color:"#888"},children:[b.toLocaleDateString()," ",b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),i.jsxs("div",{style:{fontSize:"12px",color:"#888"},children:["Turn ",f.finalTurn]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"12px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Success Index"}),i.jsxs("div",{style:{fontSize:"16px",fontWeight:700,color:"#4ade80"},children:[(f.successIndex*100).toFixed(0),"%",i.jsxs("span",{style:{fontSize:"11px",marginLeft:"6px",color:x>0?"#ef4444":x<0?"#4ade80":"#888"},children:[x>0?"":x<0?"":"="," ",Math.abs(x*100).toFixed(0),"%"]})]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Debt Index"}),i.jsxs("div",{style:{fontSize:"16px",fontWeight:700,color:"#fb923c"},children:[(f.debtIndex*100).toFixed(0),"%",i.jsxs("span",{style:{fontSize:"11px",marginLeft:"6px",color:y>0?"#ef4444":y<0?"#4ade80":"#888"},children:[y>0?"":y<0?"":"="," ",Math.abs(y*100).toFixed(0),"%"]})]})]})]}),f.keyChoices.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"6px"},children:"First 3 Choices:"}),f.keyChoices.map((E,g)=>i.jsxs("div",{style:{fontSize:"11px",color:"#ddd",marginBottom:"2px",paddingLeft:"8px",borderLeft:"2px solid rgba(96, 165, 250, 0.3)"},children:[g+1,". ",E]},g))]})]},f.id)})})]})]})})}function Hg({currentState:e,onSelectRun:t,onClose:n}){const[r,o]=w.useState(!1),[a,s]=w.useState([]),[c,l]=w.useState("");w.useEffect(()=>{setTimeout(()=>o(!0),100);const y=localStorage.getItem("parallelRuns");if(y)try{s(JSON.parse(y))}catch(b){console.error("Failed to load parallel runs:",b)}},[]);const d=()=>{o(!1),setTimeout(n,300)},u=()=>{if(!c.trim()){alert("Please enter a name for this run");return}const y=["#60a5fa","#4ade80","#fbbf24","#ef4444","#a855f7","#ec4899"],b={id:`run_${Date.now()}`,name:c.trim(),state:JSON.parse(JSON.stringify(e)),color:y[a.length%y.length]},E=[...a,b];s(E),localStorage.setItem("parallelRuns",JSON.stringify(E)),l("")},f=y=>{const b=a.filter(E=>E.id!==y);s(b),localStorage.setItem("parallelRuns",JSON.stringify(b))},m=y=>{t(y),d()},x=y=>{const b=lt(y.state.metrics.measured),E=ye(y.state.metrics.unmeasured);return{success:b,debt:E}};return i.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",opacity:r?1:0,transition:"opacity 0.3s ease"},children:i.jsxs("div",{style:{maxWidth:"900px",width:"90%",padding:"30px",backgroundColor:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)",maxHeight:"80vh",overflowY:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("div",{style:{fontSize:"22px",fontWeight:700,color:"#fff"},children:"Policy Comparison Mode"}),i.jsx("button",{onClick:d,style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"24px",padding:"0",lineHeight:"1"},children:""})]}),i.jsx("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"rgba(96, 165, 250, 0.1)",borderRadius:"8px",border:"1px solid rgba(96, 165, 250, 0.3)",fontSize:"13px",color:"#ddd",lineHeight:"1.6"},children:"Run multiple governance strategies in parallel to compare outcomes. Each run tracks independently, allowing you to explore different approaches side-by-side."}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"12px"},children:"Create Parallel Run from Current State"}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsx("input",{type:"text",value:c,onChange:y=>l(y.target.value),placeholder:"e.g., 'Pragmatic Approach', 'Idealist Strategy'",style:{flex:1,padding:"10px",backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#fff",fontSize:"13px"},onKeyPress:y=>{y.key==="Enter"&&u()}}),i.jsx("button",{onClick:u,disabled:a.length>=4,style:{padding:"10px 20px",backgroundColor:a.length>=4?"#444":"#60a5fa",color:"#000",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:600,cursor:a.length>=4?"not-allowed":"pointer",opacity:a.length>=4?.5:1},children:"Create Run"})]}),a.length>=4&&i.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#888",fontStyle:"italic"},children:"Maximum 4 parallel runs (to maintain performance)"})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:["Parallel Runs (",a.length,"/4)"]}),a.length===0?i.jsx("div",{style:{padding:"32px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",textAlign:"center",color:"#888",fontSize:"13px",fontStyle:"italic"},children:"No parallel runs yet. Create one to start comparing strategies."}):i.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:a.map(y=>{const b=x(y);return x({state:e}),i.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"2px solid "+y.color,position:"relative"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsx("div",{style:{fontSize:"15px",fontWeight:700,color:"#fff"},children:y.name}),i.jsx("button",{onClick:()=>f(y.id),style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"18px",padding:"0",lineHeight:"1"},title:"Delete run",children:""})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"12px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Success Index"}),i.jsxs("div",{style:{fontSize:"18px",fontWeight:700,color:"#4ade80"},children:[(b.success*100).toFixed(0),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Debt Index"}),i.jsxs("div",{style:{fontSize:"18px",fontWeight:700,color:"#fb923c"},children:[(b.debt*100).toFixed(0),"%"]})]})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#888",marginBottom:"12px"},children:["Turn ",y.state.turn,"  ",y.state.auditTrail.length," decisions"]}),i.jsx("div",{style:{display:"flex",gap:"8px"},children:i.jsx("button",{onClick:()=>m(y.id),style:{flex:1,padding:"8px",backgroundColor:y.color,color:"#000",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"Switch to This Run"})})]},y.id)})})]}),i.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"rgba(96, 165, 250, 0.1)",borderRadius:"8px",border:"1px solid rgba(96, 165, 250, 0.3)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#60a5fa",fontWeight:600,marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Active Run"}),i.jsx("div",{style:{fontSize:"13px",color:"#ddd",lineHeight:"1.6"},children:"You're currently working on the main run. Create a parallel run to branch from this point and explore alternative strategies."})]})]})})}function Ug({state:e,onClose:t}){var b;const[n,r]=w.useState(!1),[o,a]=w.useState("all");w.useEffect(()=>{setTimeout(()=>r(!0),100)},[]);const s=()=>{r(!1),setTimeout(t,300)},l=(()=>{var p;const E=[];let g={...((p=e.initialMetrics)==null?void 0:p.unmeasured)||{}};const h={welfareDebt:"#ef4444",enforcementGap:"#fbbf24",regulatoryCapture:"#ec4899",sentienceKnowledgeGap:"#8b5cf6",systemIrreversibility:"#fb923c"};return e.auditTrail.forEach((C,v)=>{var k;const S=v>0&&e.auditTrail[v-1].metricsSnapshot?e.auditTrail[v-1].metricsSnapshot.unmeasured:g,j=((k=C.metricsSnapshot)==null?void 0:k.unmeasured)||g;Object.keys(j).forEach(A=>{const I=S[A]||0,R=j[A]||0,D=R-I;Math.abs(D)>.01&&(g={...g,[A]:R},E.push({turn:C.turn,decision:C.chosenLabel,nodeTitle:C.nodeTitle,debtType:A,change:D,cumulative:R,color:h[A]||"#888"}))})}),E.sort((C,v)=>C.turn-v.turn)})(),d=o==="all"?l:l.filter(E=>E.debtType===o),u=["welfareDebt","enforcementGap","regulatoryCapture","sentienceKnowledgeGap","systemIrreversibility"],f={welfareDebt:"Welfare Debt",enforcementGap:"Enforcement Gap",regulatoryCapture:"Regulatory Capture",sentienceKnowledgeGap:"Sentience Knowledge Gap",systemIrreversibility:"System Irreversibility"},m=Object.values(e.metrics.unmeasured).reduce((E,g)=>E+g,0),x=Object.values(((b=e.initialMetrics)==null?void 0:b.unmeasured)||{}).reduce((E,g)=>E+g,0),y=m-x;return i.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.85)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",opacity:n?1:0,transition:"opacity 0.3s ease"},children:i.jsxs("div",{style:{maxWidth:"900px",width:"90%",padding:"30px",backgroundColor:"#0a0a0a",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.8)",maxHeight:"80vh",overflowY:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("div",{style:{fontSize:"22px",fontWeight:700,color:"#fff"},children:"Governance Debt Timeline"}),i.jsx("button",{onClick:s,style:{background:"none",border:"none",color:"#888",cursor:"pointer",fontSize:"24px",padding:"0",lineHeight:"1"},children:""})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"rgba(251, 146, 60, 0.1)",borderRadius:"8px",border:"1px solid rgba(251, 146, 60, 0.3)"},children:[i.jsx("div",{style:{fontSize:"14px",color:"#fb923c",fontWeight:600,marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Total Debt Accumulation"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Initial Debt"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#aaa"},children:[(x*100).toFixed(0),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Current Debt"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#fb923c"},children:[(m*100).toFixed(0),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Increase"}),i.jsxs("div",{style:{fontSize:"20px",fontWeight:700,color:"#ef4444"},children:["+",(y*100).toFixed(0),"%"]})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>a("all"),style:{padding:"8px 16px",backgroundColor:o==="all"?"#60a5fa":"rgba(255, 255, 255, 0.05)",color:o==="all"?"#000":"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:"All Types"}),u.map(E=>i.jsx("button",{onClick:()=>a(E),style:{padding:"8px 16px",backgroundColor:o===E?"#60a5fa":"rgba(255, 255, 255, 0.05)",color:o===E?"#000":"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",fontSize:"12px",fontWeight:600,cursor:"pointer"},children:f[E]},E))]}),i.jsxs("div",{children:[i.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"#fff",marginBottom:"16px"},children:["Debt Accumulation Events (",d.length,")"]}),d.length===0?i.jsx("div",{style:{padding:"32px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",textAlign:"center",color:"#888",fontSize:"13px",fontStyle:"italic"},children:"No debt accumulation events found for this filter."}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.map((E,g)=>i.jsx("div",{style:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"2px solid "+E.color,borderLeftWidth:"6px"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{fontSize:"12px",color:E.color,fontWeight:600,marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Turn ",E.turn,": ",f[E.debtType]]}),i.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#fff",marginBottom:"4px"},children:E.nodeTitle}),i.jsxs("div",{style:{fontSize:"13px",color:"#ddd",marginBottom:"8px"},children:["Decision: ",E.decision]})]}),i.jsxs("div",{style:{textAlign:"right",minWidth:"120px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Change"}),i.jsxs("div",{style:{fontSize:"18px",fontWeight:700,color:E.change>0?"#ef4444":"#4ade80"},children:[E.change>0?"+":"",(E.change*100).toFixed(1),"%"]}),i.jsxs("div",{style:{fontSize:"11px",color:"#888",marginTop:"8px"},children:["Cumulative: ",(E.cumulative*100).toFixed(0),"%"]})]})]})},g))})]})]})})}let si=null;async function $g(e=!1){if(si&&!e)return si;try{const t=e?`?t=${Date.now()}`:"",n=await fetch(`/scenario.v1.json${t}`);if(!n.ok)throw new Error(`Failed to load scenario: ${n.status}`);return si=await n.json(),si}catch(t){return console.error("Error loading scenario:",t),{version:"1.0.0",phases:[]}}}function Uo(e,t){if(!e||!e.phases)return console.error("Invalid scenario structure:",e),null;for(const n of e.phases){if(!n.nodes)continue;const r=n.nodes.find(o=>o.id===t);if(r)return console.log(`Found node ${t} in phase ${n.id}`),r}return console.warn(`Node ${t} not found in scenario. Available nodes:`,e.phases.flatMap(n=>n.nodes.map(r=>r.id))),null}function bi(e,t){for(const n of e.phases)if(n.nodes.some(r=>r.id===t))return n.id;return null}function li(e,t="medium",n="default"){const r=e.phases[0],o=r==null?void 0:r.nodes[0];let a={measured:{productionEfficiency:.5,costPerUnit:.3,welfareIncidentRate:.1,welfareStandardAdoption:.5},unmeasured:{welfareDebt:.1,enforcementGap:.1,regulatoryCapture:.2,sentienceKnowledgeGap:.2,systemIrreversibility:.1}};a=Ga(a,t),a=Ha(a,n);const s={USA:.3,CAN:.2,MEX:.25,ARG:.32,CHL:.3,BRA:.4,GBR:.4,FRA:.35,DEU:.3,ITA:.35,ESP:.32,NLD:.42,POL:.28,SWE:.48,DNK:.4,IND:.5,CHN:.45,JPN:.32,KOR:.3,THA:.28,IDN:.3,PHL:.28,MYS:.3,ZAF:.35,EGY:.28,KEN:.3,NGA:.28,SAU:.3,TUR:.32,ISR:.35,AUS:.3,NZL:.45};return console.log("createInitialState: regionValues count:",Object.keys(s).length),console.log("createInitialState: Has EGY?","EGY"in s,s.EGY),"EGY"in s||console.error(" EGY missing from initial regionValues!"),{turn:0,currentNodeId:(o==null?void 0:o.id)||"N01_INITIAL",phaseId:(r==null?void 0:r.id)||"P1_DEPLOY",metrics:JSON.parse(JSON.stringify(a)),initialMetrics:JSON.parse(JSON.stringify(a)),map:{mode:"welfareStandards",regionValues:s,activeArcs:[],activeHubs:[],activeRings:[]},auditTrail:[],memory:{assumptionsBank:[]},flags:{isComplete:!1,showDebug:!1},greatPeople:[],achievements:[],completedWonders:[],researchedTechs:[],activeEvents:[],victoryType:null,lossWarnings:[],lossConditionsMet:[],playerName:void 0}}function Vg({scenario:e,state:t,onClose:n}){const o=(()=>{const l=new Map,d=new Set(t.auditTrail.map(x=>x.nodeId));d.add(t.currentNodeId),e.phases.forEach(x=>{var y;(y=x.nodes)==null||y.forEach(b=>{var h;const E=bi(e,b.id)||x.id,g=((h=e.phases.find(p=>p.id===E))==null?void 0:h.title)||x.title;l.set(b.id,{id:b.id,title:b.title,phaseId:E,phaseTitle:g,x:0,y:0,visited:d.has(b.id),current:b.id===t.currentNodeId,children:[]})})}),e.phases.forEach(x=>{var y;(y=x.nodes)==null||y.forEach(b=>{var h;const E=l.get(b.id);if(!E)return;const g=new Set;(h=b.choices)==null||h.forEach(p=>{p.nextNodeId&&p.nextNodeId!==b.id&&g.add(p.nextNodeId)}),g.forEach(p=>{const C=l.get(p);C&&!E.children.find(v=>v.id===p)&&E.children.push(C)})})});const u=new Set,f=new Map;l.forEach(x=>{f.has(x.phaseId)||f.set(x.phaseId,[]),f.get(x.phaseId).push(x)}),f.forEach((x,y)=>{const b=e.phases.find(E=>E.id===y);b&&b.nodes&&x.sort((E,g)=>{const h=b.nodes.findIndex(C=>C.id===E.id),p=b.nodes.findIndex(C=>C.id===g.id);return h-p})});let m=0;return f.forEach((x,y)=>{const b=m*280+150;let E=0;x.forEach(g=>{u.has(g.id)||(g.x=b,g.y=E*120+150,u.add(g.id),E++)}),m++}),l.forEach(x=>{if(!u.has(x.id)){const y=e.phases.findIndex(b=>b.id===x.phaseId);x.x=y*280+150,x.y=150,u.add(x.id)}}),Array.from(l.values())})(),a=Math.max(...o.map(l=>l.x),1200),s=Math.max(...o.map(l=>l.y+60),800),c=l=>{const d=e.phases.findIndex(f=>f.id===l),u=["#60a5fa","#34d399","#fbbf24","#fb923c","#a855f7","#ef4444"];return u[d%u.length]||"#888"};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.95)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:n,children:i.jsxs("div",{style:{backgroundColor:"#000000",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",maxWidth:"95vw",maxHeight:"95vh",width:"100%",overflow:"auto",padding:"24px"},onClick:l=>l.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[i.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"#fff",margin:0},children:"Decision Tree View"}),i.jsx("button",{onClick:n,style:{backgroundColor:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"0",width:"32px",height:"32px"},children:""})]}),i.jsxs("div",{style:{marginBottom:"24px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",gap:"24px",flexWrap:"wrap",fontSize:"12px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#4ade80",border:"2px solid #000"}}),i.jsx("span",{style:{color:"#aaa"},children:"Current Node"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#60a5fa",border:"2px solid #000"}}),i.jsx("span",{style:{color:"#aaa"},children:"Visited"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#666",border:"2px solid #000"}}),i.jsx("span",{style:{color:"#aaa"},children:"Not Visited"})]})]}),i.jsx("div",{style:{width:"100%",height:"700px",overflow:"auto",backgroundColor:"#0a0a0a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative"},children:i.jsxs("svg",{width:Math.max(a+200,1200),height:Math.max(s+100,800),style:{display:"block"},children:[o.map(l=>l.children.map(d=>{const u=o.find(f=>f.id===d.id);return u?i.jsx("line",{x1:l.x,y1:l.y,x2:u.x,y2:u.y,stroke:l.visited?"#60a5fa":"#444",strokeWidth:2,opacity:l.visited?.6:.3,markerEnd:"url(#arrowhead)"},`${l.id}-${d.id}`):null})),i.jsx("defs",{children:i.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",children:i.jsx("polygon",{points:"0 0, 10 3, 0 6",fill:"#60a5fa",opacity:"0.6"})})}),o.map(l=>{const d=c(l.phaseId),u=l.current,f=l.visited;let m="#666";return u?m="#4ade80":f&&(m=d),i.jsxs("g",{children:[i.jsx("circle",{cx:l.x,cy:l.y,r:u?20:16,fill:m,stroke:u?"#fff":"#000",strokeWidth:u?3:2,style:{cursor:"pointer"}}),i.jsx("text",{x:l.x,y:l.y+40,textAnchor:"middle",fill:"#fff",fontSize:"11px",style:{pointerEvents:"none"},children:l.title.length>25?l.title.substring(0,25)+"...":l.title}),i.jsx("text",{x:l.x,y:l.y+55,textAnchor:"middle",fill:"#888",fontSize:"9px",style:{pointerEvents:"none"},children:l.phaseTitle.length>20?l.phaseTitle.substring(0,20)+"...":l.phaseTitle}),u&&i.jsx("text",{x:l.x,y:l.y-35,textAnchor:"middle",fill:"#4ade80",fontSize:"12px",fontWeight:"600",children:"CURRENT"})]},l.id)})]})}),i.jsxs("div",{style:{marginTop:"24px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"12px"},children:"Phases:"}),i.jsx("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:e.phases.map((l,d)=>{const u=["#60a5fa","#34d399","#fbbf24","#fb923c","#a855f7","#ef4444"],f=u[d%u.length]||"#888";return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:f}}),i.jsx("span",{style:{fontSize:"11px",color:"#aaa"},children:l.title})]},l.id)})})]}),i.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#111111",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",fontSize:"12px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"#888"},children:"Total Nodes"}),i.jsx("div",{style:{color:"#fff",fontWeight:600,fontSize:"18px"},children:o.length})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"#888"},children:"Visited"}),i.jsx("div",{style:{color:"#60a5fa",fontWeight:600,fontSize:"18px"},children:o.filter(l=>l.visited).length})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"#888"},children:"Remaining"}),i.jsx("div",{style:{color:"#666",fontWeight:600,fontSize:"18px"},children:o.filter(l=>!l.visited).length})]})]})]})})}function Yg({onShowVariation:e,onShowSaveLoad:t,onShowComparison:n,onShowPolicyComparison:r,onShowDebtTimeline:o,onShowMetaAnalysis:a,onShowAssumptionTimeline:s,onShowDecisionTree:c,onShowCredits:l}){const[d,u]=w.useState(!1);return e||t||n||r||o||a||s||c||l?i.jsx("div",{style:{marginBottom:"20px",position:"relative"},children:i.jsxs("div",{style:{position:"relative",display:"block",width:"100%"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[i.jsxs("button",{onClick:()=>u(!d),style:{padding:"8px 14px",fontSize:"13px",fontWeight:600,backgroundColor:"rgba(255, 255, 255, 0.05)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"6px",width:"100%",justifyContent:"center",position:"relative"},title:"Analysis tools and options",children:[i.jsx("span",{children:" Tools"}),i.jsx("span",{style:{fontSize:"10px",opacity:.6,position:"absolute",right:"14px"},children:""})]}),d&&i.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:"4px",backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"6px",padding:"4px",zIndex:1e3,minWidth:"200px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.5)"},children:[e&&i.jsx("button",{onClick:()=>{e(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Variations"}),t&&i.jsx("button",{onClick:()=>{t(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Save/Load"}),(e||t)&&i.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",margin:"4px 0"}}),n&&i.jsx("button",{onClick:()=>{n(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Compare Runs"}),r&&i.jsx("button",{onClick:()=>{r(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Policy Compare"}),o&&i.jsx("button",{onClick:()=>{o(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Debt Timeline"}),a&&i.jsx("button",{onClick:()=>{a(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Meta-Analysis"}),s&&i.jsx("button",{onClick:()=>{s(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Assumptions"}),c&&i.jsx("button",{onClick:()=>{c(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Decision Tree"}),onShowResearchBibliography&&i.jsx("button",{onClick:()=>{onShowResearchBibliography(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:" Research Bibliography"}),l&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",margin:"4px 0"}}),i.jsx("button",{onClick:()=>{l(),u(!1)},style:{display:"block",width:"100%",padding:"8px 12px",fontSize:"12px",backgroundColor:"transparent",color:"#666",border:"none",borderRadius:"4px",cursor:"pointer",textAlign:"left"},children:"Credits"})]})]})]})}):null}function Kg({onClose:e}){const[t,n]=w.useState(!0),[r,o]=w.useState(!1);w.useEffect(()=>{const s=setTimeout(()=>{a()},5e3);return()=>clearTimeout(s)},[]);const a=()=>{o(!0),setTimeout(()=>{e()},500)};return console.log("TitleCard rendering, visible:",t,"fadeOut:",r),i.jsxs("div",{onClick:a,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000000",zIndex:2e4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:r?0:1,transition:"opacity 0.5s ease",cursor:"pointer",pointerEvents:r?"none":"auto"},children:[i.jsxs("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[i.jsx("h1",{title:"an ai governance and risk simulator for animals",style:{fontSize:"72px",fontWeight:700,color:"#ffffff",margin:0,letterSpacing:"0.15em",lineHeight:1,textTransform:"uppercase",fontFamily:'"Times New Roman", Times, serif',textShadow:"0 4px 8px rgba(0, 0, 0, 0.8)",whiteSpace:"nowrap",opacity:1},children:"INHERITANCE"}),i.jsx("div",{style:{fontSize:"18px",fontWeight:500,color:"#aaa",letterSpacing:"0.1em",textTransform:"uppercase",fontFamily:'"Times New Roman", Times, serif',textShadow:"0 2px 4px rgba(0, 0, 0, 0.8)",marginTop:"10px"},children:"AN AI GOVERNANCE AND RISK SIMULATOR FOR ANIMALS"})]}),i.jsx("div",{style:{position:"absolute",bottom:"60px",fontSize:"12px",color:"#666",fontFamily:'"Times New Roman", Times, serif',letterSpacing:"0.05em",opacity:t?.6:0,transition:"opacity 1s ease 1s"},children:"Click to continue"})]})}function uc(e,t,n){const r=t>0;return e==="productionEfficiency"?r?"New production methods or technologies increased output per unit of input.":"Welfare improvements or regulatory requirements reduced production efficiency.":e==="welfareStandardAdoption"?r?"Higher welfare standards were mandated or adopted across more operations and regions.":"Standards were weakened, delayed, or faced lower adoption rates.":e==="costPerUnit"?r?"Welfare improvements, enforcement, or regulations increased production costs.":"Efficiency gains, industry optimization, or relaxed standards reduced costs.":e==="welfareIncidentRate"?r?"Disease, injury, or mortality rates increased due to inadequate standards or enforcement.":"Better welfare standards and practices reduced incidents of disease, injury, and mortality.":e==="welfareDebt"?r?"Short-term compromises on animal welfare created hidden costs that will compound over time.":"Decisions prioritized long-term welfare outcomes, reducing accumulated welfare compromises.":e==="enforcementGap"?r?"Enforcement capacity failed to keep pace with new standards, creating a gap between policy and practice.":"Investment in enforcement infrastructure or simpler standards reduced the enforcement gap.":e==="regulatoryCapture"?r?"Industry influence over policymaking increased, potentially prioritizing business concerns over welfare.":"Independent oversight or stronger government regulation reduced industry capture of policymaking.":e==="sentienceKnowledgeGap"?r?"Scientific understanding of animal sentience failed to advance or policy excluded certain species.":"Research investment or broader recognition of sentience reduced uncertainty about animal needs.":e==="systemIrreversibility"?r?"Economic dependencies and infrastructure investments made current systems harder to change or unwind.":"Flexibility was preserved or alternative systems were developed, maintaining options for future change.":"This metric was affected by your decision."}function rr(e,t,n,r=1){if(e===0)return 0;const o=Math.max(0,Math.min(1,t/r));if(n)if(e>0){const a=1-o*.5;return e*a}else{const a=.5+o*.5;return e*a}else if(e<0){const a=.5+o*.5;return e*a}else{const a=1-o*.5;return e*a}}function Qg(e,t){const n={...e};if(t.metrics){if(t.metrics.measured){const s={};t.metrics.measured.productionEfficiency!==void 0&&(s.productionEfficiency=e.metrics.measured.productionEfficiency+rr(t.metrics.measured.productionEfficiency,e.metrics.measured.productionEfficiency,!0)),t.metrics.measured.costPerUnit!==void 0&&(s.costPerUnit=e.metrics.measured.costPerUnit+rr(t.metrics.measured.costPerUnit,e.metrics.measured.costPerUnit,!1)),t.metrics.measured.welfareIncidentRate!==void 0&&(s.welfareIncidentRate=e.metrics.measured.welfareIncidentRate+rr(t.metrics.measured.welfareIncidentRate,e.metrics.measured.welfareIncidentRate,!1)),t.metrics.measured.welfareStandardAdoption!==void 0&&(s.welfareStandardAdoption=e.metrics.measured.welfareStandardAdoption+rr(t.metrics.measured.welfareStandardAdoption,Math.min(1,e.metrics.measured.welfareStandardAdoption/3),!0,3)),n.metrics.measured={...n.metrics.measured,...s},n.metrics.measured.productionEfficiency=Math.max(0,Math.min(1,n.metrics.measured.productionEfficiency)),n.metrics.measured.costPerUnit=Math.max(0,Math.min(1,n.metrics.measured.costPerUnit)),n.metrics.measured.welfareIncidentRate=Math.max(0,Math.min(1,n.metrics.measured.welfareIncidentRate)),n.metrics.measured.welfareStandardAdoption=Math.max(0,n.metrics.measured.welfareStandardAdoption)}if(t.metrics.unmeasured){const s={};Object.entries(t.metrics.unmeasured).forEach(([c,l])=>{const d=e.metrics.unmeasured[c];s[c]=d+rr(l,d,!1)}),n.metrics.unmeasured={...n.metrics.unmeasured,...s},Object.keys(n.metrics.unmeasured).forEach(c=>{const l=n.metrics.unmeasured[c];n.metrics.unmeasured[c]=Math.max(0,Math.min(1,l))})}}if(t.map){if(t.map.regionValues){n.map.regionValues={...n.map.regionValues};const s={USA:["CAN","MEX"],CAN:["USA","MEX"],MEX:["USA","CAN"],GBR:["IRL","FRA","DEU","NLD","BEL"],FRA:["GBR","DEU","ESP","ITA","BEL","CHE"],DEU:["FRA","AUT","POL","CZE","NLD","BEL","CHE"],ITA:["FRA","ESP","AUT","CHE"],ESP:["FRA","ITA","PRT"],NLD:["BEL","DEU","GBR"],BEL:["FRA","DEU","NLD"],POL:["DEU","CZE","SVK"],SWE:["DNK","NOR","FIN"],DNK:["SWE","NOR","DEU"],CHN:["JPN","KOR","THA","IDN","MYS","PHL","VNM"],JPN:["CHN","KOR","THA"],KOR:["CHN","JPN"],IND:["PAK","BGD","LKA","NPL"],THA:["VNM","MYS","IDN","PHL"],IDN:["MYS","THA","PHL","SGP"],MYS:["SGP","IDN","THA"],PHL:["IDN","THA","VNM"],BRA:["ARG","CHL","URY","PRY"],ARG:["BRA","CHL","URY"],CHL:["ARG","PER","BOL"],AUS:["NZL"],NZL:["AUS"],ZAF:["BWA","ZWE","MOZ","NAM"],EGY:["LBY","SDN","JOR","ISR"],SAU:["ARE","KWT","BHR","OMN","QAT"],TUR:["GRC","BGR","GEO","ARM"],ISR:["JOR","LBN","EGY"]};Object.entries(t.map.regionValues).forEach(([c,l])=>{if(n.map.regionValues[c]=Math.max(0,Math.min(1,(n.map.regionValues[c]||0)+l)),l>0&&s[c]){const d=l*.3;s[c].forEach(u=>{n.map.regionValues[u]!==void 0&&(n.map.regionValues[u]=Math.max(0,Math.min(1,n.map.regionValues[u]+d)))})}})}if(t.map.activateArcs){const s=n.currentNodeId,c=t.map.activateArcs.map(d=>{const u=n.map.activeArcs.find(f=>f.id===d);return u?{...u,triggeredByNodeId:u.triggeredByNodeId||s}:{id:d,startLat:0,startLng:0,endLat:0,endLng:0,type:"supply_chain",baseWeight:.5,label:d,triggeredByNodeId:s}}),l=new Set(n.map.activeArcs.map(d=>d.id));c.forEach(d=>{if(!l.has(d.id))n.map.activeArcs.push(d);else{const u=n.map.activeArcs.findIndex(f=>f.id===d.id);u>=0&&!n.map.activeArcs[u].triggeredByNodeId&&(n.map.activeArcs[u]={...n.map.activeArcs[u],triggeredByNodeId:s})}})}if(t.map.activateHubs){const s=t.map.activateHubs.map(l=>{const d=n.map.activeHubs.find(u=>u.id===l);return d||{id:l,name:l,lat:0,lng:0,iso3:"",type:"unknown"}}),c=new Set(n.map.activeHubs.map(l=>l.id));s.forEach(l=>{c.has(l.id)||n.map.activeHubs.push(l)})}if(t.map.spawnRings){const s=n.currentNodeId,c=t.map.spawnRings.map((l,d)=>({id:`ring_${e.turn}_${d}_${Date.now()}`,lat:l.lat,lng:l.lng,eventType:l.eventType,ttl:l.ttl,createdTurn:e.turn,triggeredByNodeId:s}));n.map.activeRings=[...n.map.activeRings,...c]}}const r=n.metrics.unmeasured.systemIrreversibility,a=(Math.min(1,n.metrics.unmeasured.welfareDebt*.7+n.metrics.unmeasured.enforcementGap*.5)-r)*.25;return n.metrics.unmeasured.systemIrreversibility=Math.max(0,Math.min(1,r+a)),n}const Jg=.05;function Xg(e){const t={...e},n=e.turn;return t.memory.assumptionsBank=e.memory.assumptionsBank.map(r=>{if(r.lastReaffirmedTurn===n)return{...r,strength:Math.min(1,r.strength+.2)};const o=Math.max(0,r.strength-Jg);return{...r,strength:o}}),t}function qg(e,t,n){const r={...e};return r.memory.assumptionsBank=r.memory.assumptionsBank.map(o=>o.text===t?{...o,lastReaffirmedTurn:n,strength:Math.min(1,o.strength+.2)}:o),r}function Zg(e,t,n){const r={...e},o={text:t,createdTurn:n,strength:1};return r.memory.assumptionsBank=[...r.memory.assumptionsBank,o],r}function pc(e,t){switch(t.type){case"INIT":return t.payload.initialState;case"CHOOSE_OPTION":{const{ownerRole:n,rationale:r,assumptions:o,delta:a,nodeTitle:s,chosenLabel:c,phaseId:l,unmeasuredImpact:d}=t.payload;let u=Xg(e);o.trim()&&(u=Zg(u,o,u.turn));const f=Qg(u,a),m={turn:f.turn+1,phaseId:l,nodeId:e.currentNodeId,nodeTitle:s,chosenLabel:c,ownerRole:n,rationale:r,assumptions:o,unmeasuredImpact:d,timestamp:Date.now(),metricsSnapshot:JSON.parse(JSON.stringify(f.metrics))},x=f.turn+1,y={...f,turn:x,auditTrail:[...f.auditTrail,m]},b=Jm(y),E=Xm(y).map(g=>({...g,turn:x}));return{...y,lossConditionsMet:b,lossWarnings:E}}case"TOGGLE_DEBUG":return{...e,flags:{...e.flags,showDebug:!e.flags.showDebug}};case"RESET":return t.payload.initialState;case"SET_MAP_MODE":return{...e,map:{...e.map,mode:t.payload.mode}};case"UNLOCK_GREAT_PERSON":{const n=e.greatPeople||[];return n.some(o=>o.id===t.payload.person.id)?e:{...e,greatPeople:[...n,t.payload.person]}}case"UNLOCK_ACHIEVEMENT":{const n=e.achievements||[];return n.includes(t.payload.achievementId)?e:{...e,achievements:[...n,t.payload.achievementId]}}case"COMPLETE_WONDER":{const n=e.completedWonders||[];return n.includes(t.payload.wonderId)?e:{...e,completedWonders:[...n,t.payload.wonderId]}}case"RESEARCH_TECH":{const n=e.researchedTechs||[];return n.includes(t.payload.techId)?e:{...e,researchedTechs:[...n,t.payload.techId]}}case"TRIGGER_EVENT":{const n=e.activeEvents||[];return{...e,activeEvents:[...n,t.payload.event]}}case"RESOLVE_EVENT":{const n=e.activeEvents||[];return{...e,activeEvents:n.filter(r=>r.id!==t.payload.eventId)}}case"SET_PLAYER_NAME":return{...e,playerName:t.payload.playerName};default:return e}}function eh(){var Os;const[e,t]=w.useState(null),[n,r]=w.useReducer(pc,null),[o,a]=w.useState(!0),s=w.useRef(null),[c,l]=w.useState(!1),[d,u]=w.useState(!1),[f,m]=w.useState(!1),[x,y]=w.useState(!1),[b,E]=w.useState(()=>(console.log("showTitleCard initial value:",!0),localStorage.getItem("hasSeenTitleCard")||sessionStorage.removeItem("tutorialSeen"),!0)),[g,h]=w.useState(()=>!localStorage.getItem("hasSeenWelcome")),[p,C]=w.useState(!1),[v,S]=w.useState(!1),[j,k]=w.useState(!1),[A,I]=w.useState(!1),[R,D]=w.useState(!1),[W,$]=w.useState(!1),[_,V]=w.useState(null),[Y,L]=w.useState(void 0),[T,z]=w.useState(!1),[P,N]=w.useState(null),[H,Q]=w.useState(null),[F,G]=w.useState(!1),[re,Be]=w.useState(!1),[J,U]=w.useState(!1),[ht,et]=w.useState(!1),[Jt,$n]=w.useState(null),[Br,po]=w.useState(!1),[th,Pu]=w.useState(null),[Vn,Et]=w.useState(!1),[nh,Lu]=w.useState("medium"),[rh,Wu]=w.useState("default"),[Yn,Fr]=w.useState(null),[ih,oh]=w.useState(!1),[mn,fo]=w.useState(null),[Fe,Nu]=w.useState(()=>typeof window<"u"?window.innerWidth<768:!1);w.useEffect(()=>{if(!sessionStorage.getItem("tutorialSeen")){const K=setTimeout(()=>{n&&n.auditTrail.length===0&&!n.flags.isComplete&&u(!0)},100);return()=>clearTimeout(K)}},[]),w.useEffect(()=>{async function O(){try{console.log("App: Starting initialization...");const K=await $g(!0);console.log("App: Scenario loaded",K),t(K);const ce=Dm();if(ce){r({type:"INIT",payload:{initialState:ce}}),a(!1);return}const Ve=localStorage.getItem("scenarioState"),ze=localStorage.getItem("scenarioStateVersion"),It=K.version||"1.0.0";let de;if(Ve&&ze===It)try{const fe=JSON.parse(Ve);if(fe.turn!==void 0&&fe.metrics&&fe.map)if(fe.metrics.measured&&fe.metrics.unmeasured&&fe.map.regionValues)if(Uo(K,fe.currentNodeId))de=fe;else throw new Error("Current node ID not found in scenario");else throw new Error("Invalid state structure - missing required fields");else throw new Error("Invalid state structure")}catch(fe){console.error("Failed to parse localStorage state (version mismatch or invalid):",fe),localStorage.removeItem("scenarioState"),localStorage.removeItem("scenarioStateVersion");const Xt=li(K),_r=localStorage.getItem("scenarioVariation");if(_r)try{const qt=JSON.parse(_r);if(qt.difficulty&&qt.startingCondition){const dt=Ha(Ga(Xt.metrics,qt.difficulty),qt.startingCondition);de={...Xt,metrics:dt,initialMetrics:JSON.parse(JSON.stringify(dt))}}else de=Xt}catch{de=Xt}else{localStorage.getItem("hasSeenWelcome")&&Et(!0),a(!1);return}}else{Ve&&ze!==It&&(localStorage.removeItem("scenarioState"),localStorage.removeItem("scenarioStateVersion")),localStorage.getItem("hasSeenWelcome")&&Et(!0),a(!1);return}localStorage.getItem("hasSeenWelcome")&&Et(!0),a(!1)}catch(K){console.error("Initialization error:",K),alert(`Failed to initialize: ${K instanceof Error?K.message:"Unknown error"}`),a(!1)}}O()},[]);const _s=(O,K)=>{if(Lu(O),Wu(K),e)try{const ce=li(e,O,K);r({type:"INIT",payload:{initialState:ce}}),a(!1),localStorage.setItem("scenarioVariation",JSON.stringify({difficulty:O,startingCondition:K}))}catch(ce){console.error("Error creating initial state:",ce),alert(`Failed to start scenario: ${ce instanceof Error?ce.message:"Unknown error"}`),Et(!0)}else console.error("Scenario not loaded when trying to start"),alert("Scenario not loaded. Please refresh the page."),Et(!0)};w.useEffect(()=>{n&&n.currentNodeId&&Vn&&!o&&(console.log("State confirmed available, hiding selector"),Et(!1))},[n==null?void 0:n.currentNodeId,Vn,o]),w.useEffect(()=>{n&&e&&(localStorage.setItem("scenarioState",JSON.stringify(n)),localStorage.setItem("scenarioStateVersion",e.version||"1.0.0"))},[n,e]);const Bu=w.useCallback((O,K,ce,Ve,ze)=>{var Us,$s,Vs;if(!e||!n)return;G(!1),et(!1),po(!1),z(!1);const It=Uo(e,n.currentNodeId);if(!It||!It.choices[O])return;const de=It.choices[O],Kn=bi(e,n.currentNodeId)||n.phaseId,fe=[];if((Us=de.delta.metrics)!=null&&Us.unmeasured){const ue=de.delta.metrics.unmeasured;ue.welfareDebt&&fe.push("increased welfare debt"),ue.enforcementGap&&fe.push("increased enforcement gap"),ue.regulatoryCapture&&fe.push("increased regulatory capture"),ue.sentienceKnowledgeGap&&fe.push("increased knowledge gaps about animal sentience"),ue.systemIrreversibility&&fe.push("increased system irreversibility")}const Xt=fe.length>0?`This decision ${fe.join(", ")}.`:"No significant unmeasured impacts detected.",_r={type:"CHOOSE_OPTION",payload:{choiceId:`C${O+1}`,ownerRole:K,rationale:ce,assumptions:Ve,delta:de.delta,nodeTitle:It.title,chosenLabel:de.label,phaseId:Kn,unmeasuredImpact:Xt}},qt=JSON.parse(JSON.stringify(n));let dt=pc(n,_r);ze&&dt.memory.assumptionsBank.length>0&&dt.memory.assumptionsBank.forEach(ue=>{dt=qg(dt,ue.text,dt.turn)});const tt={...dt,currentNodeId:de.nextNodeId,phaseId:bi(e,de.nextNodeId)||Kn,flags:{...dt.flags,isComplete:de.nextNodeId==="N16_COMPLETE"}},Gs=lg(tt);Gs.forEach(ue=>{r({type:"UNLOCK_ACHIEVEMENT",payload:{achievementId:ue}})});const mo=Mg(tt);let Hs=tt;if(mo.length>0){const ue=mo[0],ve=Dg(ue);ve&&(Hs=Pg(tt,ve),r({type:"COMPLETE_WONDER",payload:{wonderId:ue}}),Pu(ve),Fr({type:"wonder",title:ve.title,description:ve.description}))}const Or={...Hs,achievements:[...tt.achievements||[],...Gs],completedWonders:[...tt.completedWonders||[],...mo]},Ae=zg(Or);if(Ae){const ue=sc(tt,Ae);r({type:"UNLOCK_GREAT_PERSON",payload:{person:{id:Ae.id,title:Ae.title,description:Ae.description,quote:Ae.quote,unlockedTurn:tt.turn}}});const ve={...ue,greatPeople:[...Or.greatPeople||[],{id:Ae.id,title:Ae.title,description:Ae.description,quote:Ae.quote,unlockedTurn:tt.turn}],achievements:Or.achievements};r({type:"INIT",payload:{initialState:ve}}),Fr({type:"great_person",title:Ae.title,description:Ae.description})}else r({type:"INIT",payload:{initialState:Or}});setTimeout(()=>{s.current&&(s.current.scrollTop=0)},300);const go=[],ho=[];($s=de.delta.metrics)!=null&&$s.measured&&Object.entries(de.delta.metrics.measured).forEach(([ue,ve])=>{Math.abs(ve)>.01&&go.push({metric:ue,change:ve,direction:ve>0?"up":"down",reason:uc(ue,ve)})}),(Vs=de.delta.metrics)!=null&&Vs.unmeasured&&Object.entries(de.delta.metrics.unmeasured).forEach(([ue,ve])=>{Math.abs(ve)>.01&&ho.push({metric:ue,change:ve,direction:ve>0?"up":"down",reason:uc(ue,ve)})}),(go.length>0||ho.length>0)&&V({choiceLabel:de.label,measuredChanges:go,unmeasuredChanges:ho});const Vu=bi(e,de.nextNodeId)||Kn;Kn!==Vu?(G(!1),fo(null)):(fo({choiceLabel:de.label,nodeTitle:It.title,delta:de.delta,previousState:qt,currentState:Ae?sc(tt,Ae):tt}),G(!0))},[e,n]),Fu=w.useCallback(O=>{n&&r({type:"SET_PLAYER_NAME",payload:{playerName:O}})},[n]),_u=w.useCallback(()=>{if(!e)return;z(!1),G(!1),et(!1),po(!1),N(null),Q(null);const O=li(e);r({type:"RESET",payload:{initialState:O}}),localStorage.removeItem("scenarioState"),localStorage.removeItem("scenarioStateVersion")},[e]),Ou=w.useCallback(()=>{r({type:"TOGGLE_DEBUG"})},[]),Gu=w.useCallback(O=>{r({type:"INIT",payload:{initialState:O}}),m(!1)},[]);w.useEffect(()=>{n&&n.flags.isComplete&&l(!0)},[n]),w.useEffect(()=>{if(!n||!e)return;const O=n.phaseId;if(!H){Q(O);return}if(H!==O&&n&&n.turn>0){G(!1),et(!1),po(!1),z(!1),N(H);const K=e.phases.find(ce=>ce.id===O);K&&Fr({type:"phase_transition",title:`Entering ${K.title}`,description:K.description})}Q(O)},[n==null?void 0:n.phaseId,e,H,n==null?void 0:n.turn]),w.useEffect(()=>{if(Y!==void 0&&Y>0){const O=setInterval(()=>{L(K=>K===void 0||K<=1?(alert("Time limit reached! Your scenario run has ended."),0):K-1)},1e3);return()=>clearInterval(O)}},[Y]),w.useEffect(()=>{const O=()=>{Nu(window.innerWidth<768)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const Hu=e&&n?Uo(e,n.currentNodeId):null;w.useEffect(()=>{if(n&&s.current){const O=setTimeout(()=>{s.current&&(s.current.scrollTop=0)},150);return()=>clearTimeout(O)}},[n==null?void 0:n.turn,n==null?void 0:n.currentNodeId]);const Uu=localStorage.getItem("hasSeenWelcome"),$u=sessionStorage.getItem("tutorialSeen");if(Vn&&e&&!g&&!d&&!b&&Uu&&$u)return i.jsx(lc,{onSelect:_s});if(!b){if(!g){if(o&&!g&&!Vn&&!b)return i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",color:"#fff",backgroundColor:"#000000",position:"fixed",top:0,left:0,zIndex:9999},children:i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"18px",marginBottom:"12px"},children:"Loading scenario..."}),!e&&i.jsx("div",{style:{fontSize:"12px",color:"#888"},children:"Loading scenario data..."}),!n&&e&&i.jsx("div",{style:{fontSize:"12px",color:"#888"},children:"Initializing state..."})]})})}}return!n&&!g&&!Vn&&!b&&e&&!o?(console.warn("State not available after selector closed, re-showing selector"),i.jsx(lc,{onSelect:_s})):!n&&(o||!e)&&!b?i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",color:"#fff",backgroundColor:"#000000",position:"fixed",top:0,left:0,zIndex:9999},children:i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"18px",marginBottom:"12px"},children:"Loading..."}),!e&&i.jsx("div",{style:{fontSize:"12px",color:"#888"},children:"Loading scenario data..."}),!n&&e&&i.jsx("div",{style:{fontSize:"12px",color:"#888"},children:"Initializing game state..."})]})}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100%",backgroundColor:"#000000",color:"#ffffff",fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',overflow:Fe?"auto":"hidden"},children:[i.jsx(Ym,{state:n,onToggleDebug:Ou,onShowTutorial:()=>u(!0),onShowCredits:()=>Be(!0)}),i.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden",flexDirection:Fe?"column":"row"},children:[i.jsx("div",{ref:s,style:{flex:Fe?"0 0 auto":"0 0 480px",width:Fe?"100%":"auto",maxHeight:Fe?"50vh":"none",padding:Fe?"16px":"24px",borderRight:Fe?"none":"1px solid rgba(255, 255, 255, 0.08)",borderBottom:Fe?"1px solid rgba(255, 255, 255, 0.08)":"none",overflowY:"auto",backgroundColor:"#000000",display:"flex",flexDirection:"column"},children:n&&!n.playerName?i.jsx(zm,{onNameSubmit:Fu,skipAnimation:!1}):i.jsx(Rm,{node:Hu,state:n,onChoice:Bu,turn:(n==null?void 0:n.turn)||0,onReset:_u})}),!Fe&&i.jsxs("div",{style:{flex:"0 0 420px",padding:"24px",borderRight:"1px solid rgba(255, 255, 255, 0.08)",overflowY:"auto",backgroundColor:"#000000"},children:[n&&i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#888",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:600},children:"Map View"}),i.jsx("div",{style:{display:"flex",gap:"8px"},children:["welfareStandards","welfareDebt","enforcement"].map(O=>{var Ve;const K=((Ve=n==null?void 0:n.map)==null?void 0:Ve.mode)===O,ce=O==="welfareStandards"?"Standards":O==="welfareDebt"?"Debt":"Enforcement";return i.jsxs("button",{onClick:()=>r({type:"SET_MAP_MODE",payload:{mode:O}}),onMouseEnter:ze=>{K||(ze.currentTarget.style.backgroundColor="rgba(96, 165, 250, 0.1)",ze.currentTarget.style.borderColor="rgba(96, 165, 250, 0.5)",ze.currentTarget.style.transform="translateY(-1px)",ze.currentTarget.style.boxShadow="0 4px 12px rgba(96, 165, 250, 0.2)")},onMouseLeave:ze=>{K||(ze.currentTarget.style.backgroundColor="rgba(30, 30, 30, 0.95)",ze.currentTarget.style.borderColor="rgba(96, 165, 250, 0.3)",ze.currentTarget.style.transform="translateY(0)",ze.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05)")},style:{flex:1,minWidth:0,padding:"14px 12px",fontSize:"12px",fontWeight:600,background:K?"linear-gradient(135deg, rgba(96, 165, 250, 0.25) 0%, rgba(139, 92, 246, 0.2) 100%)":"linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(20, 20, 20, 0.95) 100%)",color:"#ffffff",border:K?"2px solid rgba(96, 165, 250, 0.6)":"2px solid rgba(96, 165, 250, 0.3)",borderRadius:"10px",cursor:"pointer",textTransform:"capitalize",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:K?"0 4px 16px rgba(96, 165, 250, 0.3), 0 0 24px rgba(96, 165, 250, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05)",textAlign:"center",letterSpacing:"0.3px",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[K&&i.jsx("div",{style:{position:"absolute",inset:0,background:"radial-gradient(circle at center, rgba(96, 165, 250, 0.2) 0%, transparent 70%)",pointerEvents:"none"}}),i.jsx("span",{style:{position:"relative",zIndex:1,display:"block",textAlign:"center",width:"100%",padding:"0 4px",boxSizing:"border-box"},children:ce})]},O)})})]}),i.jsx(Yg,{onShowVariation:()=>y(!0),onShowSaveLoad:()=>m(!0),onShowComparison:()=>C(!0),onShowPolicyComparison:()=>S(!0),onShowDebtTimeline:()=>k(!0),onShowResearchBibliography:()=>U(!0),onShowMetaAnalysis:()=>I(!0),onShowAssumptionTimeline:()=>D(!0),onShowDecisionTree:()=>$(!0),onShowCredits:()=>Be(!0)}),n&&i.jsx(Ag,{state:n}),n&&i.jsx(Lg,{state:n}),n&&i.jsx(oc,{state:n})]}),i.jsx("div",{style:{flex:Fe?"0 0 50vh":1,width:Fe?"100%":"auto",position:"relative",backgroundColor:"#000000",minWidth:0,minHeight:Fe?"300px":0,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("div",{style:{width:"100%",height:"100%",position:"relative"},children:n&&i.jsx(fm,{regionValues:n.map.regionValues,state:n,mapMode:n.map.mode})})})]}),Fe&&i.jsx("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.08)",backgroundColor:"#000000",padding:"16px",overflowY:"auto",maxHeight:"40vh"},children:n&&i.jsx(oc,{state:n})}),c&&n&&i.jsx(dg,{state:n,onClose:()=>l(!1)}),F&&mn&&i.jsx(wg,{isOpen:F,onClose:()=>{G(!1),fo(null)},choiceLabel:mn.choiceLabel,nodeTitle:mn.nodeTitle,delta:mn.delta,previousState:mn.previousState,currentState:mn.currentState}),d&&!T&&!F&&!c&&i.jsx(ug,{onClose:()=>{u(!1),sessionStorage.setItem("tutorialSeen","true"),(!n||n.auditTrail.length===0)&&Et(!0)}}),f&&e&&i.jsx(xg,{currentState:n,scenarioVersion:e.version||"1.0.0",onLoad:Gu,onClose:()=>m(!1)}),x&&i.jsx(vg,{onStart:O=>{if(localStorage.setItem("scenarioVariation",JSON.stringify(O)),e){const K=li(e),ce=Ha(Ga(K.metrics,O.difficulty),O.startingCondition),Ve={...K,metrics:ce,initialMetrics:JSON.parse(JSON.stringify(ce))};r({type:"INIT",payload:{initialState:Ve}}),O.timeLimit&&(setTimeLimit(O.timeLimit),L(O.timeLimit*60))}y(!1)},onClose:()=>y(!1)}),J&&e&&i.jsx(Ig,{scenario:e,onClose:()=>U(!1)}),re&&i.jsx(bg,{onClose:()=>Be(!1)}),Yn&&i.jsx(Wg,{type:Yn.type,title:Yn.title,description:Yn.description,onClose:()=>Fr(null),autoCloseDelay:Yn.type==="phase_transition"?3e3:5e3}),_&&i.jsx(Bg,{choiceLabel:_.choiceLabel,measuredChanges:_.measuredChanges,unmeasuredChanges:_.unmeasuredChanges,onClose:()=>V(null)}),b&&i.jsx(Kg,{onClose:()=>{console.log("TitleCard onClose called");const O=!localStorage.getItem("hasSeenTitleCard");E(!1),localStorage.setItem("hasSeenTitleCard","true"),setTimeout(()=>{const K=localStorage.getItem("hasSeenWelcome");console.log("TitleCard onClose - hasSeenWelcome:",K,"isFirstTime:",O),K?(sessionStorage.removeItem("tutorialSeen"),console.log("TitleCard: Showing tutorial after title card"),u(!0)):(console.log("TitleCard: Showing welcome modal"),h(!0))},100)}}),g&&!b&&i.jsx(Ng,{onClose:()=>{h(!1),localStorage.setItem("hasSeenWelcome","true"),sessionStorage.getItem("tutorialSeen")?Et(!0):u(!0)}}),p&&n&&i.jsx(Gg,{currentState:n,onClose:()=>C(!1)}),v&&n&&i.jsx(Hg,{currentState:n,onSelectRun:O=>{const ce=JSON.parse(localStorage.getItem("parallelRuns")||"[]").find(Ve=>Ve.id===O);ce&&r({type:"INIT",payload:{initialState:ce.state}}),S(!1)},onClose:()=>S(!1)}),j&&n&&i.jsx(Ug,{state:n,onClose:()=>k(!1)}),R&&n&&i.jsx(ju,{state:n,onClose:()=>D(!1)}),W&&e&&n&&i.jsx(Vg,{scenario:e,state:n,onClose:()=>$(!1)}),((Os=n==null?void 0:n.flags)==null?void 0:Os.showDebug)&&i.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"400px",maxHeight:"500px",backgroundColor:"#111111",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px",overflowY:"auto",zIndex:999,fontSize:"11px",fontFamily:"monospace"},children:[i.jsx("div",{style:{color:"#fff",fontWeight:600,marginBottom:"12px"},children:"Debug: State JSON"}),i.jsx("pre",{style:{color:"#aaa",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(n,null,2)})]})]})}console.log("main.tsx: Starting React app...");console.log("Root element:",document.getElementById("root"));const fc=document.getElementById("root");fc?(console.log("Root element found, creating React root..."),$o.createRoot(fc).render(i.jsx(ci.StrictMode,{children:i.jsx(eh,{})})),console.log("React app rendered!")):console.error("Root element not found!");
